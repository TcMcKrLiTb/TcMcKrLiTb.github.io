define(["./_chunks/vendor-fee82cbd","./_chunks/encodePath-70d2cd88"],(function(e,t){"use strict";var i={"7z":"package-x-generic",accdb:"file",ai:"image",apk:"package-x-generic",bash:"text-code",bz2:"package-x-generic",cb7:"text",cba:"text",cbr:"text",cbt:"text",cbtc:"text",cbz:"text",cc:"text-code",cdr:"image",cpp:"text-code",css:"text-code",csv:"x-office-spreadsheet",cvbdl:"text",c:"text-code","c++":"text-code",deb:"package-x-generic",doc:"x-office-document",docm:"x-office-document",docx:"x-office-document",dot:"x-office-document",dotx:"x-office-document",eml:"text",eot:"image",epub:"text",eps:"image",gz:"package-x-generic",gzip:"package-x-generic",h:"text-code",hh:"text-code",hpp:"text-code",html:"text-code",htm:"text-code",java:"text-code",js:"text-code",json:"text-code",jpeg:"image",jpg:"image",lwp:"x-office-document",mdb:"file",odp:"x-office-presentation",ods:"x-office-spreadsheet",odt:"x-office-document",one:"x-office-document",otf:"image",pdf:"application-pdf",pfb:"image",php:"text-code",pl:"text-code",png:"image",pot:"x-office-presentation",potm:"x-office-presentation",potx:"x-office-presentation",ppa:"x-office-presentation",ppam:"x-office-presentation",pps:"x-office-presentation",ppsm:"x-office-presentation",ppsx:"x-office-presentation",ppt:"x-office-presentation",pptm:"x-office-presentation",pptx:"x-office-presentation",ps:"image",psd:"image",py:"text-code",rar:"package-x-generic",rss:"file","sh-lib":"text-code",sh:"text-code",swf:"file",tar:"package-x-generic","tar.bz2":"package-x-generic","tar.gz":"package-x-generic",tbz2:"package-x-generic",tex:"text",tgz:"package-x-generic",ttf:"image",vsd:"x-office-document",woff:"image",wpd:"x-office-document",xcf:"image",xla:"x-office-spreadsheet",xlam:"x-office-spreadsheet",xls:"x-office-spreadsheet",xlsb:"x-office-spreadsheet",xlsm:"x-office-spreadsheet",xlsx:"x-office-spreadsheet",xlt:"x-office-spreadsheet",xltm:"x-office-spreadsheet",xltx:"x-office-spreadsheet",xml:"text-code",yaml:"text-code",yml:"text-code",zip:"package-x-generic"},s={filters:{roundNumber:e=>parseInt(e.toFixed(0))},data:()=>({uploadQueue:new e._default({concurrency:1}),directoryQueue:new e._default({concurrency:1}),uploadFileUniqueId:0,existingResources:[]}),computed:{...e.mapGetters$1("Files",["searchTerm","files","highlightedFile","publicLinkPassword","currentFolder"]),...e.mapGetters$1(["getToken","capabilities","configuration"]),_sidebarOpen(){return null!==this.highlightedFile}},methods:{...e.mapActions$1("Files",["resetSearch","addFileToProgress","removeFileSelection","removeFileFromProgress"]),...e.mapActions$1(["showMessage","createModal","hideModal"]),formDateFromNow(t,i){return"JSDate"===i?e.DateTime_1.fromJSDate(t).setLocale(this.$language.current).toRelative():"Http"===i?e.DateTime_1.fromHTTP(t).setLocale(this.$language.current).toRelative():"ISO"===i?e.DateTime_1.fromISO(t).setLocale(this.$language.current).toRelative():"RFC"===i?e.DateTime_1.fromRFC2822(t).setLocale(this.$language.current).toRelative():void 0},delayForScreenreader(e,t=500){setTimeout((()=>e()),t)},fileTypeIcon(e){if(e){if("folder"===e.type)return"folder";if("string"==typeof e.extension){const t=i[e.extension.toLowerCase()];if(t)return`${t}`}}return"file"},checkIfBrowserSupportsFolderUpload(){const e=document.createElement("input");return e.type="file",void 0!==e.webkitdirectory||void 0!==e.mozdirectory||void 0!==e.directory},checkIfElementExists(e){const t=e.name||e;return this.files.find((e=>e.name===t))},processDirectoryEntryRecursively(e){return this.$client.files.createFolder(this.rootPath+e.fullPath).then((()=>{const t=e.createReader(),i=this;t.readEntries((function(e){e.forEach((function(e){e.isDirectory?i.processDirectoryEntryRecursively(e):e.file((t=>{i.$_ocUpload(t,e.fullPath,null,!1)}))}))}))}))},hideOverwriteDialog(){this.existingResources=[],this.hideModal()},confirmOverwrite(){for(const e of this.existingResources)this.$_ocUpload(e.file,e.path,e.etag);this.hideOverwriteDialog()},displayOverwriteDialog(){const e=this.$gettext("File %{file} already exists"),t=!this.publicPage()&&this.capabilities.files&&this.capabilities.files.versioning,i={variation:t?"passive":"danger",icon:"cloud_upload",title:this.existingResources.length>1?this.$gettext("Multiple files already exists"):this.$gettextInterpolate(e,{file:this.existingResources[0].file.name},!0),message:t?this.$gettext("Do you want to create a new version?"):this.$gettext("Do you want to overwrite it?"),cancelText:this.$gettext("Cancel"),confirmText:t?this.$gettext("Create"):this.$gettext("Overwrite"),onCancel:this.hideOverwriteDialog,onConfirm:this.confirmOverwrite};this.createModal(i)},$_ocUpload_addDropToQue(e){const t=e.dataTransfer.items||e.dataTransfer.files,i=[];if(t instanceof FileList)this.$_ocUpload_addDirectoryToQue(e);else{for(let e of t){e=e.webkitGetAsEntry();const t=this.checkIfElementExists(e);if(e.isDirectory){if(t){this.showMessage({title:this.$gettextInterpolate(this.$gettext("Folder %{folder} already exists."),{folder:e.name},!0),status:"danger",autoClose:{enabled:!0}});continue}this.processDirectoryEntryRecursively(e).then((()=>{this.$emit("success",null,e.name)}))}else t?i.push(new Promise((i=>{e.file((s=>{this.existingResources.push({file:s,path:e.fullPath,etag:t.etag}),i()}))}))):e.file((t=>{this.$_ocUpload(t,e.fullPath)}))}i.length>0&&Promise.all(i).then((()=>{this.displayOverwriteDialog()}))}},$_ocUpload_addFileToQue(e){const t=e.target.files;if(!(t.length<1)){for(let e=0;e<t.length;e++){const i=this.checkIfElementExists(t[e]);i?this.existingResources.push({file:t[e],path:t[e].name,etag:i.etag}):this.$_ocUpload(t[e],t[e].name)}this.$_ocUploadInput_clean(),this.existingResources.length>0&&this.displayOverwriteDialog()}},$_ocUpload_addDirectoryToQue(t){if(this.isIE11())return void this.showMessage({title:this.$gettext("Upload failed"),desc:this.$gettext("Upload of a folder is not supported in Internet Explorer."),status:"danger",autoClose:{enabled:!0}});const i=t.target.files||t.dataTransfer.files;if(!i.length)return;let s=i[0].webkitRelativePath.replace("/"+i[0].name,"");const r=s.split("/")[0];if(this.checkIfElementExists(r))this.showMessage({title:this.$gettextInterpolate(this.$gettext("Folder %{folder} already exists."),{folder:r},!0),status:"danger",autoClose:{enabled:!0}});else{const t=[];for(const r of i){if(this.$_addFileToUploadProgress(r),s=r.webkitRelativePath.replace("/"+r.name,""),t.indexOf(s)>-1)continue;const i=s.split("/");for(let s=0;s<i.length;s++){if(0===s){-1===t.indexOf(i[0])&&t.push(i[0]);continue}const r=`${e.pathUtil.join.apply(null,i.slice(0,s))}/${i[s]}`;-1===t.indexOf(r)&&t.push(r)}}const r=[],o=t[0];for(const e of t){let t;t=this.publicPage()?this.directoryQueue.add((()=>this.$client.publicFiles.createFolder(this.rootPath,e,this.publicLinkPassword))):this.directoryQueue.add((()=>this.$client.files.createFolder(this.rootPath+e))),r.push(t)}const a=[];Promise.all(r).then((()=>{for(const e of i)a.push(this.$_ocUpload(e,e.webkitRelativePath,null,!1,!1));Promise.all(a).then((()=>{this.$emit("success",null,o),this.$_ocUploadInput_clean()}))}))}},$_addFileToUploadProgress(e){e.id=this.uploadFileUniqueId,this.uploadFileUniqueId++,this.addFileToProgress(e)},$_ocUpload(t,i,s=null,r=!0,o=!0){this.$root.$emit("upload-start");let a,n=this.path||"",l=i;if(o&&this.$_addFileToUploadProgress(t),this.publicPage()){const i=n.indexOf("/"),r=n.substr(0,i);n=n.substr(i+1)||"",l=e.pathUtil.join(n,l);const o={};t.lastModifiedDate?o["X-OC-Mtime"]=""+t.lastModifiedDate.getTime()/1e3:t.lastModified&&(o["X-OC-Mtime"]=""+t.lastModified/1e3),a=this.uploadQueue.add((()=>this.$client.publicFiles.putFileContents(r,l,this.publicLinkPassword,t,{headers:o,onProgress:e=>{this.$_ocUpload_onProgress(e,t)},overwrite:s})))}else if(n=this.path||"",l=e.pathUtil.join(n,l),this.browserSupportsChunked&&this.currentFolder.isChunkedUploadSupported){let i=this.configuration.uploadChunkSize;this.capabilities.files.tus_support.max_chunk_size>0&&(null===i||0===i||i>this.capabilities.files.tus_support.max_chunk_size)&&(i=this.capabilities.files.tus_support.max_chunk_size),a=this.uploadQueue.add((()=>this.uploadChunkedFile(t,e.pathUtil.dirname(l),{chunkSize:i,overridePatchMethod:!!this.capabilities.files.tus_support.http_method_override,emitProgress:e=>{this.$_ocUpload_onProgress(e,t)}})))}else{const e={};t.lastModifiedDate?e["X-OC-Mtime"]=""+t.lastModifiedDate.getTime()/1e3:t.lastModified&&(e["X-OC-Mtime"]=""+t.lastModified/1e3),a=this.uploadQueue.add((()=>this.$client.files.putFileContents(l,t,{headers:e,onProgress:e=>{this.$_ocUpload_onProgress(e,t)},overwrite:s})))}a.then((e=>{this.$root.$emit("upload-end"),this.removeFileFromProgress(t),r&&this.$emit("success",e,t)})).catch((e=>{this.removeFileFromProgress(t),this.$emit("error",e)}))},$_ocUpload_onProgress(e,t){const i=parseInt(100*e.loaded/e.total);this.$emit("progress",{id:t.id,fileName:t.name,progress:i})},$_ocUploadInput_clean(){const e=this.$refs.input;e&&(e.value="")}}},r={computed:{isPersonalRoute(){return"files-personal"===this.$route.name},isFavoritesRoute(){return"files-favorites"===this.$route.name},isTrashbinRoute(){return"files-trashbin"===this.$route.name},isSharedWithMeRoute(){return"files-shared-with-me"===this.$route.name},isSharedWithOthersRoute(){return"files-shared-with-others"===this.$route.name},isAnySharedWithRoute(){return this.isSharedWithMeRoute||this.isSharedWithOthersRoute},isPublicFilesRoute(){return"files-public-list"===this.$route.name},isPublicPage(){return!!this.$route.meta&&!1===this.$route.meta.auth}}},o={methods:{...e.mapActions$1("Files",["setHighlightedFile"]),$_destroySideBar_hideDetails(){this.setHighlightedFile(null)}}};function a(e,t){return e.indexOf(t)>-1}const n={user:0,group:1,link:3,guest:4,remote:6},l=[n.user,n.group,n.guest,n.remote];function c(e,t=!1){const i="/"+e.replace(/^\/+/,"").replace(/\/+$/,"");if("/"===i)return[];const s=[],r=i.split("/");for(t&&s.push(i),r.pop();r.length>0;)s.push(r.join("/")),r.pop();return s}var d={cs:{"%{file} was successfully deleted":"%{file} byl úspěšně odstraněn","%{name} already exists":"%{name} již existuje",Accept:"Přijmout",Accepted:"Přijato",Actions:"Akce","Add new person by name, email or federation ID's":"Přidat novou osobu podle jména, emailu nebo federačního ID","Add people":"Přidat lidi","Adding People":"Přidávání lidí","Advanced permissions":"Pokročilá oprávnění","All files":"Všechny soubory","Allow creating":"Povolit vytváření","Allow deleting":"Povolit mazání","Allow editing":"Povolit úpravy","An error occurred while loading the public link":"Při načítání veřejného odkazu došlo k chybě","An error occurred while resolving the private link":"Při načítání odkazu nastala chyba",Cancel:"Zrušit",Confirm:"Potvrdit",Continue:"Pokračovat",Contributor:"Přispěvatel",Copy:"Kopírovat",Create:"Vytvořit","Creating file failed…":"Vytváření souboru selhalo...","Creating folder failed…":"Vytváření složky selhalo...",Decline:"Odmítnout",Declined:"Odmítnuto",Delete:"Odstranit","Delete public link":"Smazat veřejný odkaz","Deletion of %{file} failed":"Odstranění %{file} selhalo","Do you want to overwrite it?":"Opravdu si přejete přepsat tento soubor?",Download:"Stáhnout","Download and preview":"Stáhnout a zobrazit","Drag and drop to upload content into current folder":"Přetáhněte soubor, abyste ho nahráli do aktuální složky","Drop files here to upload or click to select file":"Sem přetáhněte soubory, které chcete nahrát, nebo kliknutím vyberte soubor","Edit public link":"Upravit veřejný odkaz","Edit, download and preview":"Upravit, stáhnout a zobrazit",Editor:"Editor",'Error while deleting "%{file}"':'Chyba při odstraňování "%{file}"','Error while deleting "%{file}" - the file is locked':'Chyba při odstraňování "%{file}" - tento soubor je zamčený','Error while renaming "%{file}" to "%{newName}" - the file is locked':'Chyba při přejmenování "%{file}" na "%{newName}" - tento soubor je zamčený',"Error while searching.":"Hledání selhalo.","Error while sharing.":"Sdílení selhalo.","Expiration date":"Datum vypršení",Favorites:"Oblíbené","File name":"Název souboru","File name cannot be empty":"Jméno souboru nemůže být prázdné",'File name cannot be equal to ".."':'Název souboru nemůže být ".."','File name cannot be equal to "."':'Název souboru nemůže být "."','File name cannot contain "/"':'Název souboru nemůže obsahovat "/"',"File name cannot end with whitespace":"Název souboru nemůže končit mezerou","File upload failed…":"Nahrávání souboru selhalo...",Files:"Soubory","Folder %{folder} already exists.":"Složka s názvem %{folder} již existuje","Folder name":"Jméno složky","Folder name cannot be empty":"Jméno složky nemůže být prázdný",'Folder name cannot be equal to ".."':'Název složky nemůže být ".."','Folder name cannot be equal to "."':'Název složky nemůže být "."','Folder name cannot contain "/"':'Název složky nemůže obsahovat "/"',"Folder name cannot end with whitespace":"Název složky nemůže končit mezerou",Group:"Skupina",Links:"Odkazy","Loading public link…":"Načítání veřejného odkazu...","Mail recipients":"Příjemci pošty","Mark as favorite":"Označit jako oblíbené",Move:{"Action in the files list row to initiate move of a single resource":"Přesunout","":"Přesunout"},"Move here":{"Confirm action in the location picker for move":"Přesunout sem"},Name:"Název",New:"Nový","New file":"Nový soubor","New folder":"Nová složka","No Versions available for this file":"Pro tento soubor nejsou dostupné žádné verze",Overwrite:"Přepsat",Owner:"Vlastník",Password:"Heslo",Pending:"Čekající","Personal note":"Soukromá poznámka","Public link":"Veřejný odkaz","Public Links":"Veřejné odkazy","Recipients can view and download contents.":"Příjemci mohou prohlížet a stahovat obsah.","Recipients can view, download and upload contents.":"Příjemci mohou prohlížet, stahovat a nahrávat obsah.","Recipients can view, download, edit, delete and upload contents.":"Příjemci mohou prohlížet, stahovat, upravovat, mazat a nahrávat obsah.","Remove password":"Odstranit heslo",Rename:"Přejmenovat","Rename file %{name}":"Přejmenovat soubor %{name}","Rename folder %{name}":"Přejmenovat složku %{name}","Resolving private link…":"Načítání soukromého odkazu...","Restoration of %{file} failed":"Obnovení %{file} selhalo",Restore:"Obnovit",Role:"Role",Save:"Uložit","Send a copy to myself":"Pošlete mi kopii","Set detailed permissions":"Nastavit podrobná oprávnění",Share:"Sdílet","Shared with me":"Sdíleno se mnou","Show Details":"Zobrazit detaily",'The name "%{name}" is already taken':'Jméno "%{name}" je již obsazeno','The name cannot be equal to ".."':'Název nemůže být ".."','The name cannot be equal to "."':'Název nemůže být "."','The name cannot contain "/"':'Název nemůže obsahovat "/"',"The name cannot end with whitespace":"Název nemůže končit mezerou","The private link has been copied to your clipboard.":"Soukromý odkaz byl úspěšně zkopírován","This resource is password-protected.":"Tento zdroj je chráněný heslem.",title:"název","Unmark as favorite":"Odznačit jako oblíbené","Upload complete":"Nahrávání dokončeno","Upload failed":"Nahrávání selhalo","Upload File":"Nahrát soubor","Upload Folder":"Nahrát složku","Upload of a folder is not supported in Internet Explorer.":"Nahrávání složky není v aplikaci Internet Explorer podporováno.","Upload, edit, delete, download and preview":"Nahrát, upravit, smazat, stáhnout a zobrazit",Uploader:"Nahrál",User:"Uživatel",Versions:"Verze",Viewer:"Divák","You have no permission to upload!":"Nemáte oprávnění nahrávat soubory.","You have not enough space left to upload!":"Nemáte dostatek místa pro nahrátí."},de:{"(me)":"(ich)","(Opens in new window)":"(Öffnet in neuem Fenster)","%{ amount } item selected. Actions are available above the table.":["%{ amount } Element ausgewählt. Aktionen sind oberhalb der Tabelle verfügbar.","%{ amount } Elemente ausgewählt. Aktionen sind oberhalb der Tabelle verfügbar."],"%{ amount } selected item":["%{ amount } ausgewähltes Element","%{ amount } ausgewählte Elemente"],"%{ amount } selected item - %{ size }":["%{ amount } ausgewähltes Element - %{ size }","%{ amount }  ausgewählte Elemente - %{ size }"],"%{ filesCount } file":["%{ filesCount } Datei","%{ filesCount } Dateien"],"%{ foldersCount } folder":["%{ foldersCount } Ordner","%{ foldersCount } Ordner"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr})":["%{ itemsCount } Datei insgesamt (%{ filesStr}, %{foldersStr})","%{ itemsCount } Dateien insgesamt (%{ filesStr}, %{foldersStr})"],"%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr})":["%{ itemsCount } Datei mit %{ itemSize } insgesamt (%{ filesStr}, %{foldersStr})","%{ itemsCount } Dateien mit %{ itemSize } insgesamt (%{ filesStr}, %{foldersStr})"],"%{count} resource could not be copied":["%{count} Ressource konnte nicht kopiert werden","%{count} Dateien konnten nicht kopiert werden"],"%{count} resource could not be moved":["%{count} Ressource konnte nicht verschoben werden","%{count} Dateien konnten nicht verschoben werden"],"%{file} was restored successfully":"%{file} wurde erfolgreich wiederhergestellt","%{file} was successfully deleted":"%{file} wurde erfolgreich gelöscht","%{name} already exists":"%{name} existiert bereits","%{owner} shared this folder with you for uploading":"%{owner} hat diesen Ordner zum Upload geteilt.","%{resource} was restored successfully":"%{resource} erfolgreich wiederhergestellt",Accept:"Annehmen","Accept share":"Freigabe annehmen",Accepted:"Angenommen",action:"Aktion",Actions:"Aktionen","Add files or folders":"Dateien oder Ordner hinzufügen","Add new person by name, email or federation ID's":"Eine neue Person durch Name, E-Mail oder Federation-ID hinzufügen","Add people":"Personen hinzufügen","Adding People":"Personen werden hinzugefügt","Additional permissions":"Zusätzliche Rechte","Advanced permissions":"Zusätzliche Rechte","All deleted files were removed":"Alle gelöschten Dateien wurden entfernt","All files":"Alle Dateien","Allow creating":"Erstellen erlauben","Allow deleting":"Löschen erlauben","Allow editing":"Editieren erlauben","Allow sharing":"Teilen erlauben","An error occurred while copying %{resource}":"Beim Kopieren von %{resource} ist ein Fehler aufgetreten","An error occurred while copying several resources":"Beim Kopieren von mehreren Dateien ist ein Fehler aufgetreten","An error occurred while loading the public link":"Beim Laden des öffentlichen Links ist ein Fehler aufgetreten","An error occurred while moving %{resource}":"Beim Verschieben von %{resource} ist ein Fehler aufgetreten","An error occurred while moving several resources":"Beim Verschieben von mehreren Dateien ist ein Fehler aufgetreten","An error occurred while resolving the private link":"Beim Auflösen des privaten Links ist ein Fehler aufgetreten.","Any external person with the respective link can access this resource. No sign-in\n            required. Assign a password to avoid unintended document exposure.":"Externe Personen mit einem Link können auf diese Datei oder diesen Ordner zugreifen. Ein Login ist nicht erforderlich. Um unbeabsichtigte Zugriffe zu verhindern, sollte ein Passwort vergeben werden.","Are you sure you want to delete all selected resources?":"Sollen die gewählten Dateien wirklich gelöscht werden?","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":"Sollen die gewählten Dateien wirklich gelöscht werden? Der gesamte Inhalt wird endgültig gelöscht. Diese Aktion kann nicht rückgängig gemacht werden.","Are you sure you want to delete this file?":"Soll diese Datei wirklich gelöscht werden?","Are you sure you want to delete this file? All it’s content will be permanently removed. This action cannot be undone.":"Soll diese Datei wirklich gelöscht werden? Der gesamte Inhalt wird endgültig gelöscht. Diese Aktion kann nicht rückgängig gemacht werden.","Are you sure you want to delete this folder?":"Soll dieser Ordner wirklich gelöscht werden?","Are you sure you want to delete this folder? All it’s content will be permanently removed. This action cannot be undone.":"Soll dieser Ordner wirklich gelöscht werden? Der gesamte Inhalt wird endgültig gelöscht. Diese Aktion kann nicht rückgängig gemacht werden.","Are you sure you want to delete this link? Recreating the same link again is not possible.":"Soll der ausgewählte Link wirklich gelöscht werden? Derselbe Link kann danach nicht wieder erzeugt werden.",Cancel:"Abbrechen","Clear selection":"Auswahl aufheben","Click row to toggle upload progress details":"Zeile anklicken für Uploaddetails","Click to mark this file as favorite":"Klicken Sie um diese Datei als Favorit zu markieren.","Click to remove this file from your favorites":"Klicken Sie um diese Datei als Favorit abzuwählen.","Close file sidebar":"Seitenleiste schließen",Confirm:"Bestätigen",Continue:"Weiter",Contributor:"Mitarbeiter",Copy:"Kopieren","Copy into »%{ target }«":"Nach »%{ target }« kopieren","Copy link to clipboard":"Link in die Zwischenablage kopieren","Copy private link to clipboard":"Privaten Link in die Zwischenablage kopieren","Could not delete files":"Dateien konnten nicht gelöscht werden",Create:"Erstellen","Create a new file":"Neue Datei erstellen","Create a new folder":"Neuen Ordner erstellen","Create and copy public link":"Öffentlichen Link erstellen und kopieren","Create new public link":"Neuen öffentlichen Link erstellen",Creating:"Erstelle","Creating file failed…":"Erstellen der Datei fehlgeschlagen…","Creating folder failed…":"Erstellen des Ordners fehlgeschlagen…","Creating Public Link":"Erstelle den öffentlichen Link",Decline:"Ablehnen","Decline share":"Freigabe ablehnen",Declined:"Abgelehnt",Delete:"Löschen","Delete file %{name}":"Datei %{name} löschen","Delete folder %{name}":"Ordner %{name} löschen","Delete public link":"Lösche den öffentlichen Link","Delete selected resource?":["Ausgewählte Ressource löschen?","%{amount} ausgewählte Dateien löschen?"],"Delete share":"Freigabe entfernen","Delete share with %{ currentCollaborator }":"%{ currentCollaborator } die Freigabe entziehen","Deleted files":"Gelöschte Dateien","Deletion of %{file} failed":"Löschen von %{file} ist fehlgeschlagen",Details:"Details","Display customization options of the files list":"Anpassungsoptionen für die Dateienliste anzeigen","Do you want to create a new version?":"Soll eine neue Version erstellt werden?","Do you want to overwrite it?":"Soll es überschrieben werden?",Download:"Herunterladen","Download and preview":"Herunterladen und Vorschau","Download older version":"Ältere Version herunterladen","Download, preview and share":"Herunterladen, Vorschau und Teilen","Drag and drop to upload content into current folder":"Ziehen Sie Inhalte per Drag & Drop in den aktuellen Ordner",'Drag files and folders here or use the "+ New" button to upload':'Dateien und Ordner hierher ziehen oder den "+Neu"-Button zum Hochladen nutzen',"Drop files here to upload or click to select file":"Dateien hier fallenlassen oder anklicken zum Selektieren","Edit public link":"Bearbeite öffentlichen Link","Edit share with %{ currentCollaborator }":"Freigabe für %{ currentCollaborator } bearbeiten","Edit, download and preview":"Bearbeiten, Herunterladen und Vorschau","Edit, download, preview and share":"Bearbeiten, Herunterladen, Vorschau und Teilen","Editing share with %{ currentCollaborator }":"Freigabe für %{ currentCollaborator } bearbeiten",Editor:"Editor","Empty trash bin":"Papierkorb leeren","Enter password for public link":"Passworteingabe für öffentlichen Link","Error while accepting the selected share.":["Fehler beim Annehmen der ausgewählten Freigabe.","Fehler beim Annehmen der ausgewählten Freigaben."],"Error while declining the selected share.":["Fehler beim Ablehnen der ausgewählten Freigabe.","Fehler beim Ablehnen der ausgewählten Freigaben."],'Error while deleting "%{file}"':'Fehler beim Löschen von "%{file}"','Error while deleting "%{file}" - the file is locked':'Fehler beim Löschen von "%{file}" - Datei ist gesperrt','Error while renaming "%{file}" to "%{newName}"':'Fehler beim Umbennen von "%{file}" zu "%{newName}"','Error while renaming "%{file}" to "%{newName}" - the file is locked':'Fehler beim Umbennen von "%{file}" zu "%{newName}" - Datei ist gesperrt',"Error while searching.":"Fehler beim Suchen.","Error while sharing.":"Fehler beim Teilen.",'Error while starring "%{file}"':'Fehler beim hinzufügen von "%{file}" zu den Favoriten',"Expiration date":"Ablaufdatum","Expiration date (required)":"Verfallsdatum (erforderlich)","Expires %{expires}":"Läuft ab: %{expires}","Favorite files":"Favorisierte Dateien",Favorites:"Favoriten","File %{file} already exists":"Datei %{file} bereits vorhanden","File name":"Dateiname","File name cannot be empty":"Der Dateiname darf nicht leer sein.",'File name cannot be equal to ".."':'Der Dateiname darf nicht ".." sein.','File name cannot be equal to "."':'Der Dateiname darf nicht "." sein.','File name cannot contain "/"':'Der Dateiname darf kein "/" enthalten.',"File name cannot end with whitespace":"Der Dateiname darf nicht mit einem Leerzeichen enden.","File owner":"Besitzer","File upload failed…":"Datei konnte nicht hochgeladen werden…",Files:"Dateien","Files shared via link":"Per Link geteilte Dateien","Files shared with me":"Mit mir geteilte Dateien","Files shared with others":"Mit anderen geteilten Dateien","Folder %{folder} already exists.":"Der Ordner %{folder} existiert bereits..","Folder name":"Ordnername","Folder name cannot be empty":"Der Ordnername darf nicht leer sein.",'Folder name cannot be equal to ".."':'Der Ordnername darf nicht ".." sein.','Folder name cannot be equal to "."':'Der Ordnername darf nicht "." sein.','Folder name cannot contain "/"':'Der Ordnername darf kein "/" enthalten.',"Folder name cannot end with whitespace":"Der Ordnername darf nicht mit einem Leerzeichen enden.","Go to »All files«":'Gehe zu "Alle Dateien"',Group:"Gruppe",Guest:"Gast","Hide Details":"Details verstecken","Incorrect password":"Falsches Kennwort","Last modified:":"Zuletzt bearbeitet:",Links:"Links","Loading list of file links":"Lade Dateilinks","Loading people list":"Lade Personen","Loading public link…":"Lade öffentlichen Link…","Mail recipients":"E-Mail Empfänger","Mark as favorite":"Als Favorit markieren",Move:{"Action in the files list row to initiate move of a single resource":"Verschieben","":"Verschieben"},"Move here":{"Confirm action in the location picker for move":"Hierher verschieben"},"Move into »%{ target }«":"Nach »%{ target }« verschieben",msg:"Nachricht","Multiple files already exists":"Mehrere Dateien bereits vorhanden",Name:"Name","Navigate into the desired folder and copy selected resources into it.\n        You can navigate into a folder by clicking on its name.\n        To navigate back, you can click on the breadcrumbs.\n        Resources will be copied into the folder where you are currently located.":"Navigieren Sie in den gewünschten Ordner und kopieren Sie die ausgewählten Datei dorthin.\nSie können in einen Ordner navigieren, indem Sie auf seinen Namen klicken.\nUm zurück zu navigieren, können Sie auf die Brotkrümelnavigation klicken.\nDie Dateien werden in den Ordner kopiert, in dem Sie sich gerade befinden.","Navigate into the desired folder and move selected resources into it.\n          You can navigate into a folder by clicking on its name.\n          To navigate back, you can click on the breadcrumbs.\n          Resources will be moved into the folder where you are currently located.":"Navigieren Sie in den gewünschten Ordner und kopieren Sie die ausgewählten Datei dorthin.\nSie können in einen Ordner navigieren, indem Sie auf seinen Namen klicken.\nUm zurück zu navigieren, können Sie auf die Brotkrümelnavigation klicken.\nDie Dateien werden in den Ordner kopiert, in dem Sie sich gerade befinden.","Navigate to the parent":"Zum übergeordneten Ordner wechseln",New:"Neu","New file":"Neue Datei","New folder":"Neuer Ordner","New folder…":"Neuer Ordner…","No items selected.":"Keine Elemente ausgewählt.","No matching role found":"Keine passende Rolle gefunden","No public links":"Keine öffentlichen Links","No Versions available for this file":"Für diese Datei sind keine Versionen verfügbar. ","Only invited people can use this link.":"Nur eingeladene Personen können diesen Link öffnen.","Open folder":{"Action in the files list row to open a folder":"Ordner öffnen"},"Open in %{app}":"In %{app} öffnen","Open in browser":"Im Browser öffnen","Overview of the information about the selected file":"Übersicht der Informationen für die ausgewählte Datei",Overwrite:"Überschreiben",Owner:"Besitzer","Owner:":"Besitzer:",Password:"Passwort","Password (required)":"Passwort (erforderlich)","Password protected":"Geschützt durch Passwort","Paste here":{"Confirm action in the location picker for copy":"Hier einfügen"},Pending:"Ausstehend",People:"Personen","Permanently delete file %{name}":"Datei %{name} endgültig löschen?","Permanently delete folder %{name}":"Ordner %{name} endgültig löschen?","Permanently delete selected resource?":["Ausgewählte Ressource endgültig löschen?","%{amount} ausgewählte Dateien endgültig löschen?"],"Person was added":"Person hinzugefügt","Personal note":"Persönliche Notiz","Please, accept this share first to display available actions":"Um die verfügbaren Aktionen anzuzeigen, muss diese Freigabe zuerst akzeptiert werden.","Private Link":"Privater Link","Private link copied":"Privater Link kopiert","Public file upload":"Öffentlicher Datei-Upload","Public files":"Öffentliche Dateien","Public link":"Öffentlicher Link","Public link copied":"Öffentlicher Link kopiert","Public link created":"Öffentlicher Link erstellt","Public link has been successfully created and copied into your clipboard.":"Der öffentliche Link wurde erfolgreich erstellt und in die Zwischenablage kopiert.","Public link was successfully deleted":"Der öffentliche Link wurde erfolgreich gelöscht","Public Links":"Öffentliche Links","Recipients can upload but existing contents are not revealed.":"Empfänger können hochladen, aber existierende Inhalte werden nicht angezeigt.","Recipients can view and download contents.":"Empfänger können Inhalte sehen und herunterladen.","Recipients can view, download and upload contents.":"Empfänger können Inhalte sehen, herunterladen und hochladen.","Recipients can view, download, edit, delete and upload contents.":"Empfänger können Inhalte sehen, herunterladen, hochladen, editieren und löschen.","Reload public link":"Öffentlichen Link neu laden","Remote user":"Remote-Benutzer","Remove expiration date":"Entferne Ablaufdatum","Remove password":"Entferne Passwort","Removing person":"Entferne Person","Removing public link":"Entferne öffentlichen Link",Rename:"Umbenennen","Rename file %{name}":"Datei %{name} umbenennen","Rename folder %{name}":"Ordner %{name} umbenennen",Resharer:"Weiter-Verteiler","Resolving private link":"Privater Link wird aufgelöst","Resolving private link…":"Auflösen des privaten Links…","Resolving public link":"Öffentlicher Link wird aufgelöst","Resource not found":"Datei nicht gefunden","Resource with name %{name} already exists":"Datei oder Ordner mit dem Namen %{name} ist bereits vorhanden","Restoration of %{file} failed":"Wiederherstellen von %{fileName} ist fehlgeschlagen.","Restoration of %{resource} failed":"%{resource} konnte nicht wiederhergestellt werden",Restore:"Wiederherstellen","Restore older version":"Ältere Version wiederherstellen",Role:"Rolle",Save:"Speichern","Save Share":"Freigabe speichern",Saving:"Speichern","Saving Public Link":"Speichere den öffentlichen Link","Saving Share":"Speichere Freigabe","See all versions":"Alle Versionen ansehen","Select a person to add":"Person zum hinzufügen auswählen","Selected people":"Ausgewählte Personen","Send a copy to myself":"Eine Kopie an mich schicken","Set detailed permissions":"Detaillierte Rechte festlegen",Share:"Teilen","Share receivers":"Empfänger der Freigabe","Shared by":"Geteilt von","Shared by %{resharer}":"Geteilt von %{resharer}","Shared via link":"Per Link geteilt","Shared with me":"Mit mir geteilt","Shared with others":"Mit anderen geteilt","Shared:":"Geteilt:","Show Details":"Details ansehen","Show hidden files":"Versteckte Dateien anzeigen","Show invited people":"Zeige eingeladene Personen","Show links":"Zeige Links","Size:":"Größe:",Tags:"Schlagwörter",'The name "%{name}" is already taken':'Der Name "%{name}" ist bereits vergeben',"The name cannot be empty":"Der Name darf nicht leer sein",'The name cannot be equal to ".."':'Der Name darf nicht ".." sein.','The name cannot be equal to "."':'Der Name darf nicht "." sein.','The name cannot contain "/"':'Der Name darf kein "/" enthalten.',"The name cannot end with whitespace":"Der Name darf nicht mit einem Leerzeichen enden","The private link has been copied to your clipboard.":"Der private Link wurde in die Zwichenablage kopiert.",'The public link "%{linkName}" has been copied to your clipboard.':'Der öffentliche Link "%{linkName}" wurde in die Zwischenablage kopiert.',"There are no resources in this folder":"Dieser Ordner hat keinen Inhalt","There are no resources in this folder.":"Dieser Ordner hat keinen Inhalt.","There are no resources marked as favorite":"Nichts zum favorisieren ausgewählt","There are no resources with a public link at the moment":"Aktuell gibt es keine Dateien mit öffentlichen Links",this:"dies","This folder contains %{ itemCount } item.":["Dieser Ordner enthält %{ itemCount } Element.","Dieser Ordner enthält %{ itemCount } Elemente."],"This folder has no content.":"Dieser Ordner ist leer.","This item is directly shared via links.":"Dieses Element wurde direkt über Links geteilt.","This item is directly shared with others.":"Dieses Element wurde direkt mit anderen Personen geteilt.","This item is shared via links through one of the parent folders.":"Dieses Element wurde durch einen übergeordneten Ordner über Links geteilt.","This item is shared with others through one of the parent folders.":"Dieses Element wurde durch einen übergeordneten Ordner mit anderen Personen geteilt.","This resource is password-protected.":"Diese Datei ist passwortgeschützt.",title:"Titel","Unknown Role":"Unbekannte Rolle","Unknown type":"Unbekannter Typ","Unmark as favorite":"Favorit abwählen","Upload complete":"Hochladen abgeschlossen","Upload failed":"Hochladen fehlgeschlagen","Upload File":"Datei hochladen","Upload Folder":"Ordner hochladen","Upload of a folder is not supported in Internet Explorer.":"Das Hochladen eines Ordners wird im Internet Explorer nicht unterstützt.","Upload, edit, delete, download and preview":"Hochladen, Bearbeiten, Löschen, Herunterladen und Vorschau","Upload, edit, delete, download, preview and share":"Hochladen, Bearbeiten, Löschen, Herunterladen, Vorschau und Teilen",Uploader:"Nur hochladen",'Uploading "%{ fileName }"':'Hochladen "%{ fileName }"',"Uploading %{ count } item":["Hochladen von %{ count } Element","Hochladen von %{ count } Elementen"],'Uploading file "%{fileName}"':'Lade Datei "%{ fileName }" hoch',User:"Benutzer",Versions:"Versionen","Versions:":"Versionen:","Via %{folderName}":"Durch %{folderName}",View:"Ansicht",Viewer:"Betrachter","We went looking everywhere, but were unable to find the selected resource.":"Wir haben überall gesucht, konnten die ausgewählte Datei aber nicht finden.","You are currently not collaborating on any of your resources with other people":"Es sind keine Inhalte mit anderen Personen zur Zusammenarbeit geteilt","You are currently not collaborating on other people's resources":"Es gibt keine Einladungen zur Zusammenarbeit für Inhalte anderer Personen","You are the file owner":"Sie sind der Besitzer","You don't have permission to share this file.":"Keine Berechtigung diese Datei zu teilen.","You don't have permission to share this folder.":"Keine Berechtigung diesen Ordner zu teilen.","You have no deleted files":"Keine gelöschte Dateien","You have no permission to upload!":"Sie haben keine Berechtigung zum Hochladen!","You have not enough space left to upload!":"Sie haben zum Hochladen nicht genügend Speicherplatz zur Verfügung."},es:{"(me)":"(yo)","%{ amount } selected item":["%{ amount } elemento seleccionado","%{ amount } elementos seleccionados"],"%{file} was restored successfully":"%{file} fue restaurado con éxito","%{file} was successfully deleted":"%{file} fue eliminado exitosamente","%{name} already exists":"%{name} ya existe","%{owner} shared this folder with you for uploading":"%{owner} compartió esta carpeta con usted para subir archivos.",Accept:"Aceptar",Actions:"Acciones","Advanced permissions":"Permisos avanzados","All files":"Todos los archivos","Allow creating":"Permitir crear","Allow deleting":"Permitir eliminar","Allow editing":"Permitir editar","An error occurred while loading the public link":"Se ha producido un error al cargar el enlace público","An error occurred while resolving the private link":"Un error ocurrió resolviendo el enlace privado ",Cancel:"Cancelar",Continue:"Continuar",Contributor:"Colaborador",Create:"Crear",Creating:"Creando","Creating file failed…":"Falló la creación de archivo...","Creating folder failed…":"Falló la creación de la carpeta...","Creating Public Link":"Creando Enlace Público",Decline:"Rechazar",Declined:"Rechazado",Delete:"Eliminar","Delete public link":"Eliminar enlace público","Deleted files":"Archivos borrados","Deletion of %{file} failed":"Borrado de %{file} falló","Do you want to create a new version?":"¿Quieres crear una nueva versión?","Do you want to overwrite it?":"¿Quieres sobreescribirlo?",Download:"Descargar","Download and preview":"Descargar y previsualizar","Drag and drop to upload content into current folder":"Arrastre y suelte para subir contenido a la carpeta actual","Drop files here to upload or click to select file":"Arrastra archivos aquí o haz clic para seleccionar un archivo","Edit public link":"Editar enlace público","Edit, download and preview":"Editar, descargar y previsualizar",Editor:"Editor","Empty trash bin":"Vaciar papelera",'Error while deleting "%{file}"':'Error al eliminar "%{file}"','Error while deleting "%{file}" - the file is locked':'Error al eliminar "%{file}" - el archivo está bloqueado','Error while renaming "%{file}" to "%{newName}"':'Error al renombrar "%{file}" a "%{newName}"','Error while renaming "%{file}" to "%{newName}" - the file is locked':'Error al renombrar "%{file}" a "%{newName}" - el archivo está bloqueado',"Error while searching.":"Error durante la búsqueda.","Error while sharing.":"Error al compartir","Expiration date":"Fecha de expiración","Expires %{expires}":"Expira %{expires}",Favorites:"Favoritos","File name":"Nombre de archivo","File name cannot be empty":"El nombre de archivo no puede ser vacío",'File name cannot be equal to ".."':'El nombre de archivo no puede ser igual a ".."','File name cannot be equal to "."':'El nombre de archivo no puede ser igual a "."','File name cannot contain "/"':'El nombre del archivo no puede contener "/"',"File name cannot end with whitespace":"El nombre del archivo no puede terminar con un espacio en blanco","File upload failed…":"La subida del archivo falló...",Files:"Archivos","Folder %{folder} already exists.":"La carpeta %{folder} ya existe.","Folder name":"Nombre de carpeta","Folder name cannot be empty":"El nombre de carpeta no puede ser vacío",'Folder name cannot be equal to ".."':'El nombre de carpeta no puede ser igual a ".."','Folder name cannot be equal to "."':'El nombre de carpeta no puede ser igual a "."','Folder name cannot contain "/"':'El nombre de la carpeta no puede contener "/"',"Folder name cannot end with whitespace":"El nombre de la carpeta no puede terminar con un espacio en blanco",Group:"Grupo","Hide Details":"Ocultar Detalles",Links:"Enlaces","Loading public link…":"Cargando enlace público...","Mail recipients":"Destinatarios de correo",msg:"msg",Name:"Nombre","New file":"Nuevo archivo","New folder":"Nueva carpeta","New folder…":"Nueva carpeta...","No public links":"Ningún enlace público","No Versions available for this file":"No hay versiones disponibles para este archivo",Owner:"Propietario",Password:"Contraseña","Password protected":"Protegido con contraseña",Pending:"Pendiente","Personal note":"Nota personal","Private Link":"Enlace Privado","Public Links":"Enlaces Públicos","Recipients can upload but existing contents are not revealed.":"Los receptores pueden subir archivos pero el contenido existente no será revelado.","Recipients can view and download contents.":"Los destinatarios pueden ver y descargar contenidos.","Recipients can view, download and upload contents.":"Los destinatarios pueden ver, descargar y cargar contenidos.","Recipients can view, download, edit, delete and upload contents.":"Los destinatarios pueden ver, descargar, editar, borrar y cargar contenidos.","Remove expiration date":"Eliminar fecha de vencimiento","Remove password":"Eliminar contraseña",Rename:"Renombrar","Rename file %{name}":"Renombrar archivo %{name}","Rename folder %{name}":"Renombrar carpeta %{name}",Resharer:"Recompartidor","Resolving private link…":"Resolviendo enlace privado...","Restoration of %{file} failed":"Restauración de %{file} falló",Restore:"Restaurar",Role:"Rol",Save:"Guardar","Save Share":"Guardar recurso compartido",Saving:"Guardando","Saving Public Link":"Guardar Enlace Público","Saving Share":"Guardando recurso compartido","Send a copy to myself":"Enviar una copia a mí mismo","Set detailed permissions":"Definir permisos detallados","Shared with me":"Compartido conmigo","Shared with others":"Compartido con otros","Show Details":"Mostrar Detalles",'The name "%{name}" is already taken':'El nombre "%{name}" ya está tomado','The name cannot be equal to ".."':'El nombre no puede ser igual a ".."','The name cannot be equal to "."':'El nombre no puede ser igual a "."','The name cannot contain "/"':'El nombre no puede contener "/"',"The name cannot end with whitespace":"El nombre no puede terminar con un espacio en blanco","The private link has been copied to your clipboard.":"El enlace privado ha sido copiado al portapapeles","There are no resources in this folder.":"No hay recursos en esta carpeta.",this:"esto","This resource is password-protected.":"Este recurso está protegido por contraseña.",title:"titulo","Unknown Role":"Rol desconocido","Upload complete":"Subida completa","Upload failed":"Subida fallida","Upload File":"Subir archivo","Upload Folder":"Subir carpeta","Upload of a folder is not supported in Internet Explorer.":"Subir carpetas no esta soportado en Internet Explorer","Upload, edit, delete, download and preview":"Subir, editar, eliminar, descargar y previsualizar",Uploader:"Cargador",'Uploading "%{ fileName }"':'Subiendo "%{ fileName }"',"Uploading %{ count } item":["Subiendo %{ count } ítems","Subiendo %{ count } ítems"],'Uploading file "%{fileName}"':'Subiendo archivo "%{fileName}"',User:"Usuario",Versions:"Versiones","Via %{folderName}":"A través de %{folderName}",Viewer:"Visor","You have no permission to upload!":"No tienes permisos para subir.","You have not enough space left to upload!":"No tiene suficiente espacio para subir."},fr:{"%{file} was restored successfully":"%{file} a été réstauré avec succès","%{file} was successfully deleted":"%{file} a été supprimé avec succès","%{name} already exists":"%{name} est déjà existant","%{owner} shared this folder with you for uploading":"%{owner} a partagé ce dossier avec vous pour uploader.",Accept:"Accepter",Actions:"Actions","Add new person by name, email or federation ID's":"Ajouter une nouvelle personne par nom, email ou par son ID de Fédération","Add people":"Ajouter des personnes ","Adding People":"Ajout des personnes ","Advanced permissions":"Permissions avancées","All deleted files were removed":"Tous les fichiers supprimés ont été retirés","All files":"Tous les fichiers","Allow creating":"Autoriser la création","Allow deleting":"Autoriser la suppression","Allow editing":"Autoriser les modifications","Allow sharing":"Autoriser le partage","An error occurred while copying %{resource}":"Une erreur est survenue lors de la copie de %{resource}","An error occurred while copying several resources":"Une erreur est survenue lors de la copie de plusieurs fichiers","An error occurred while loading the public link":"Une erreur est apparue lors du chargement du lien public","An error occurred while moving %{resource}":"Une erreur est survenue lors du déplacement de %{resource}","An error occurred while moving several resources":"Une erreur est survenue lors du déplacement de plusieurs fichiers","An error occurred while resolving the private link":"Une erreur est apparue lors de la résolution du lien privé","Are you sure you want to delete all selected resources?":"Êtes vous sûr de vouloir supprimer les ressources selectionnées?","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":"Êtes-vous sûr de vouloir supprimer toutes les ressources sélectionnées ? Tout leur contenu sera définitivement supprimé. Cette action ne peut pas être annulée. ","Are you sure you want to delete this file?":'Êtes-vous sûr de vouloir supprimer "%{file}"?',"Are you sure you want to delete this file? All it’s content will be permanently removed. This action cannot be undone.":"Êtes-vous sûr de vouloir supprimer ce fichier ? Tout son contenu sera supprimé de manière permanente. Cette action ne peut pas être annulée.","Are you sure you want to delete this folder?":"Êtes-vous sûr de vouloir supprimer ce dossier?","Are you sure you want to delete this folder? All it’s content will be permanently removed. This action cannot be undone.":"Êtes-vous sûr de vouloir supprimer ce dossier? Tout son contenu sera supprimé de manière permanente. Cette action ne peut pas être annulée.",Cancel:"Annuler","Clear selection":"Annuler la sélection",Confirm:"Confirmer",Continue:"Continuer",Contributor:"Contributeur",Copy:"Copier","Could not delete files":"Impossible de supprimer les fichiers",Create:"Créer","Create a new file":"Créer un nouveau fichier...","Create a new folder":"Créer un nouveau dossier...","Create new public link":"Créer un nouveau lien public",Creating:"Création en cours","Creating file failed…":"Echec de création de fichier...","Creating folder failed…":"Echec de création de dossier...","Creating Public Link":"Création lien public",Decline:"Décliner",Declined:"Décliné",Delete:"Supprimer","Delete file %{name}":"Supprimer le fichier %{name}","Delete folder %{name}":"Supprimer le dossier %{name}","Delete public link":"Supprimer lien public","Delete selected resource?":[" Supprimer la ressource sélectionnée?"," Supprimer les %{amount} ressources sélectionnées?"],"Deleted files":"Fichiers supprimés","Deletion of %{file} failed":"Echec de la suppression de %{file}","Do you want to create a new version?":"Voulez-vous creer une nouvelle version ?","Do you want to overwrite it?":"Voulez-vous l'écraser ?",Download:"Télécharger","Download and preview":"Téléchargé et visualiser","Download, preview and share":"Téléchargé, visualiser et partager","Drag and drop to upload content into current folder":"Glisser et déplacer pour uploader du contenu dans le dossier courant","Drop files here to upload or click to select file":"Déposer des fichiers ici pour uploader ou cliquer pour sélectionner des fichiers","Edit public link":"Editer lien public","Edit, download and preview":"Modifier, télécharger et visualiser","Edit, download, preview and share":"Modifier, téléchargé, visualiser et partager",Editor:"Éditeur","Empty trash bin":"Vider la corbeille","Enter password for public link":"Entrer le mot de passe du lien public",'Error while deleting "%{file}"':'Erreur lors de la suppression de "%{file}"','Error while deleting "%{file}" - the file is locked':'Erreur lors de la suppression de "%{file}" - le fichier est verrouillé','Error while renaming "%{file}" to "%{newName}"':'Erreur lors du renommage de "%{file}" en "%{newName}"','Error while renaming "%{file}" to "%{newName}" - the file is locked':'Erreur lors du renommage de "%{file}" en "%{newName}" - le fichier est verrouillé',"Error while searching.":"Erreur apparue lors de la recherche.","Error while sharing.":"Erreur apparue lors du partage.","Expiration date":"Date d'éxpiration",Favorites:"Favoris","File name":"Nom de fichier","File name cannot be empty":"Nom de fichier ne peut pas être vide",'File name cannot be equal to ".."':'Le nom du fichier ne peut pas être ".."','File name cannot be equal to "."':'Le nom du fichier ne peut pas être "."','File name cannot contain "/"':'Le nom du fichier ne peut pas contenir "/"',"File name cannot end with whitespace":"Le nom du fichier ne peut pas se terminer avec un espace","File upload failed…":"Échec d'upload du fichier...",Files:"Fichiers","Folder %{folder} already exists.":"Dossier %{folder} existe déjà","Folder name":"Nom de dossier","Folder name cannot be empty":"Nom de dossier ne peut pas être vide",'Folder name cannot be equal to ".."':'Le nom du dossier ne peut pas être ".."','Folder name cannot be equal to "."':'Le nom du dossier ne peut pas être "."','Folder name cannot contain "/"':'Le nom du dossier ne peut pas contenir "/"',"Folder name cannot end with whitespace":"Le nom du dossier ne peut pas se terminer avec un espace","Go to »All files«":"Aller à »All files« ",Group:"Groupe",Guest:" Invité","Hide Details":"Masquer les détails","Incorrect password":"Mot de passe incorrect",Links:"Liens","Loading public link…":"Chargement du lien public...","Mail recipients":"Destinataires",Move:{"Action in the files list row to initiate move of a single resource":"Déplacer","":"Déplacer"},"Move here":{"Confirm action in the location picker for move":"Déplacer ici"},msg:"msg",Name:"Nom","New file":"Nouveau fichier","New folder":"Nouveau dossier","New folder…":"Nouveau dossier...","No public links":"Aucun lien public","No Versions available for this file":"Aucune version n'existe pour ce fichier","Only invited people can use this link.":"Seuls les personnes invités peuvent utiliser ce lien.","Open folder":{"Action in the files list row to open a folder":"Ouvrir le dossie"},"Open in browser":"Ouvrir dans le navigateur",Owner:"Propriétaire",Password:"Mot de passe","Password protected":"Protégé par mot de passe",Pending:"En attente","Permanently delete folder %{name}":" Supprimer définitivement le dossier %{name}","Permanently delete selected resource?":["Supprimer définitivement la ressource sélectionnée ?"," Supprimer définitivement les %{amount} ressources sélectionnées?"],"Person was added":"Une personne a été ajoutée","Personal note":"Note personnelle","Please, accept this share first to display available actions":"S’il vous plaît, acceptez ce partage pour afficher les actions disponibles ","Private Link":"Lien privé","Public link":"Lien public","Public link created":"Lien public créé","Public Links":"Liens publics","Recipients can upload but existing contents are not revealed.":"Destinataires peuvent uploader mais le contenu existant n'est pas visible.","Recipients can view and download contents.":"Destinataires peuvent lister et télécharger le contenu.","Recipients can view, download and upload contents.":"Destinataires peuvent lister, télécharger et uploader du contenu.","Recipients can view, download, edit, delete and upload contents.":"Destinataires peuvent lister, télécharger, modifier, supprimer et uploader du contenu.","Reload public link":"Recharger le lien public","Remote user":"Utilisateur distant","Remove expiration date":"Supprimer date d'expiration","Remove password":"Supprimer mot de passe",Rename:"Renommer","Rename file %{name}":"Renommer fichier %{name}","Rename folder %{name}":"Renommer dossier %{name}",Resharer:"Partageur","Resolving private link…":"Résolution du lien privé...","Resource not found":" Ressource introuvable ","Restoration of %{file} failed":"Échec de restauration du fichier %{file}",Restore:"Restaurer",Role:"Role",Save:"Sauvegarder","Save Share":"Enregistrer partage",Saving:"Sauvegarde en cours","Saving Public Link":"Enregistrement lien public","Saving Share":"Enregistrement partage","Send a copy to myself":"M'envoyer une copie","Set detailed permissions":"Définir des permissions détaillées","Shared with me":"Partagé avec moi","Shared with others":"Partagé avec autres",'The name "%{name}" is already taken':'Le nom "%{name}" existe déjà',"The name cannot be empty":"Le nom ne peut pas être vide",'The name cannot be equal to ".."':'Le nom ne peut pas être ".."','The name cannot be equal to "."':'Le nom ne peut pas être "."','The name cannot contain "/"':'Le nom ne peut pas contenir "/"',"The name cannot end with whitespace":"Le nom ne peut pas finir avec un espace","The private link has been copied to your clipboard.":"Le lien privé a été copié dans le presse-papier.","There are no resources in this folder.":"Il n'y a aucune ressource dans ce dossier","This resource is password-protected.":"Cette resource est protégée par mot de passe.",title:"titre","Unknown Role":"Role inconnu","Unknown type":"Type inconnu","Unmark as favorite":"Retirer des favoris","Upload complete":"Upload terminé","Upload failed":"Upload a échoué","Upload File":"Uploader un Fichier","Upload Folder":"Uploader un Dossier","Upload of a folder is not supported in Internet Explorer.":"Upload de dossier n'est pas supporté sur Internet Explorer.","Upload, edit, delete, download and preview":"Uploader, modifier, supprimer, télécharger et visualiser","Upload, edit, delete, download, preview and share":"Uploader, modifier, supprimer, télécharger, visualiser et partager",Uploader:"Uploadeur","Uploading %{ count } item":['Upload fichier "%{fileName}"',"Upload %{ count } entrées"],'Uploading file "%{fileName}"':'Upload fichier "%{fileName}"',User:"Utilisateur",Versions:"Versions","Via %{folderName}":"Via %{folderName}",Viewer:"Visionneur","We went looking everywhere, but were unable to find the selected resource.":"Nous avons cherché partout, mais nous n’avons pas pu trouver la ressource sélectionnée.","You don't have permission to share this file.":"Vous n'avez pas la permission de partager ce fichier.","You don't have permission to share this folder.":"Vous n'avez pas la permission de partager ce dossier.","You have no permission to upload!":"Vous n'avez pas la permission d'uploader !","You have not enough space left to upload!":"Vous n'avec pas assez d'espace disponible pour uploader !"},gl:{"(me)":"(eu)","%{ amount } selected item":["%{ amount } elemento seleccionado","%{ amount } elementos seleccionados"],"%{ amount } selected item - %{ size }":["%{ amount } elemento seleccionado - %{ size }","%{ amount } elementos seleccionados - %{ size }"],"%{count} resource could not be copied":["Non foi posíbel copiar %{count} recurso","Non foi posíbel copiar %{count} recursos"],"%{count} resource could not be moved":["Non foi posíbel mover %{count} recurso","Non foi posíbel mover %{count} recursos"],"%{file} was restored successfully":"%{file} foi restaurado satisfactoriamente","%{file} was successfully deleted":"%{file} foi eliminado satisfactoriamente","%{name} already exists":"%{name} xa existe","%{owner} shared this folder with you for uploading":"%{owner} compartiu este cartafol con vostede para envialo",Accept:"Aceptar",Accepted:"Aceptado",Actions:"Accións","Add new person by name, email or federation ID's":"Engadir unha nova persoa por  nome, correo ou ID de federación","Add people":"Engadir xente","Adding People":"Engadindo xente","Additional permissions":"Permisos adicionais","Advanced permissions":"Permisos avanzados","All deleted files were removed":"Retiráronse todos os ficheiros eliminados","All files":"Todos os ficheiros","Allow creating":"Permitir crear","Allow deleting":"Permitir eliminar","Allow editing":"Permitir editar","Allow sharing":"Permitir compartir","An error occurred while copying %{resource}":"Produciuse un erro ao copiar %{resource}","An error occurred while copying several resources":"Produciuse un erro ao copiar varios recursos","An error occurred while loading the public link":"Produciuse un erro ao cargar a ligazón pública","An error occurred while moving %{resource}":"Produciuse un erro ao mover %{resource}","An error occurred while moving several resources":"Produciuse un erro ao mover varios recursos","An error occurred while resolving the private link":"Produciuse un erro ao resolver a ligazón privada","Are you sure you want to delete all selected resources?":"Confirma que quere eliminar todos os recursos seleccionados?","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":" \nConfirma que quere eliminar todos os recursos seleccionados? Todo o seu contido eliminarase definitivamente. Esta acción non se pode desfacer.","Are you sure you want to delete this file?":"Confirma que quere eliminar este ficheiro?","Are you sure you want to delete this file? All it’s content will be permanently removed. This action cannot be undone.":"Confirma que quere eliminar este ficheiro? Todo o seu contido eliminarase definitivamente. Esta acción non se pode desfacer.","Are you sure you want to delete this folder?":"Confirma que quere eliminar este cartafol?","Are you sure you want to delete this folder? All it’s content will be permanently removed. This action cannot be undone.":"Confirma que quere eliminar este cartafol? Todo o seu contido eliminarase definitivamente. Esta acción non se pode desfacer.",Cancel:"Cancelar","Clear selection":"Limpar a selección",Confirm:"Confirmar",Continue:"Continuar",Contributor:"Colaborador",Copy:"Copiar","Could not delete files":"Non foi posíbel eliminar os ficheiros",Create:"Crear","Create a new file":"Crear un novo ficheiro","Create a new folder":"Crear un novo cartafol","Create and copy public link":"Crear e copiar unha ligazón pública","Create new public link":"Crear unha nova ligazón pública",Creating:"Creando","Creating file failed…":"Produciuse un fallo ao crear o ficheiro…","Creating folder failed…":"Produciuse un fallo ao crear o cartafol…","Creating Public Link":"Creando a ligazón pública",Decline:"Declinar",Declined:"Declinada",Delete:"Eliminar","Delete file %{name}":"Eliminar o ficheiro %{name}","Delete folder %{name}":"Eliminar o cartafol %{name}","Delete public link":"Eliminar ligazón pública","Delete selected resource?":["Eliminar o recurso seleccionado?","Eliminar os %{amount} recursos seleccionados?"],"Deleted files":"Ficheiros eliminados","Deletion of %{file} failed":"Produciuse un fallo ao eliminar %{file}","Do you want to create a new version?":"Quere crear unha nova versión?","Do you want to overwrite it?":"Quere sobrescribilo?",Download:"Descargar","Download and preview":"Descargar e visionar","Download, preview and share":"Descargar e visionar e compartir","Drag and drop to upload content into current folder":"Arrastre e solte para enviar contido ao cartafol actual","Drop files here to upload or click to select file":"Solte os ficheiros aquí para envialos ou prema para seleccionar ficheiro","Edit public link":"Editar ligazón pública","Edit, download and preview":"Editar, descargar e visionar","Edit, download, preview and share":"Editar, descargar e visionar e compartir",Editor:"Editor","Empty trash bin":"Cesto do lixo baleiro","Enter password for public link":"Introduza o contrasinal para a ligazón pública",'Error while deleting "%{file}"':"Produciuse un erro ao eliminar «%{file}»",'Error while deleting "%{file}" - the file is locked':"Produciuse un erro ao eliminar «%{file}» — o ficheiro está bloqueado",'Error while renaming "%{file}" to "%{newName}"':"Produciuse un erro ao cambiar o nome de «%{file}« a «%{newName}»",'Error while renaming "%{file}" to "%{newName}" - the file is locked':"Produciuse un erro ao cambiar o nome de «%{file}« a «%{newName}» — o ficheiro está bloqueado","Error while searching.":"Produciuse un erro durante a busca.","Error while sharing.":"Produciuse un erro durante a compartición.",'Error while starring "%{file}"':"Produciuse un erro ao destacar «%{file}»","Expiration date":"Data de caducidade","Expires %{expires}":"Caduca %{expires}",Favorites:"Favoritos","File %{file} already exists":"Xa existe o ficheiro %{file}","File name":"Nome de ficheiro","File name cannot be empty":"O nome do ficheiro non pode estar baleiro",'File name cannot be equal to ".."':"O nome do ficheiro non pode ser igual a «..»",'File name cannot be equal to "."':"O nome do ficheiro non pode ser igual a «.»",'File name cannot contain "/"':"O nome do ficheiro non pode conter unha «/»","File name cannot end with whitespace":"O nome do ficheiro non pode rematar cun espazo en branco","File upload failed…":"Produciuse un fallo ao enviar o ficheiro…",Files:"Ficheiros","Folder %{folder} already exists.":"Xa existe o cartafol %{folder}.","Folder name":"Nome do cartafol","Folder name cannot be empty":"O nome do cartafol non pode estar baleiro",'Folder name cannot be equal to ".."':"O nome do cartafol non pode ser igual a «..»",'Folder name cannot be equal to "."':"O nome do cartafol non pode ser igual a «.»",'Folder name cannot contain "/"':"O nome do cartafol non pode conter unha «/»","Folder name cannot end with whitespace":"O nome do cartafol non pode rematar cun espazo en branco","Go to »All files«":"Ir a «Todos os ficheiros»",Group:"Grupo",Guest:"Convidado","Hide Details":"Agochar os detalles","Incorrect password":"Contrasinal incorrecta",Links:"Ligazóns","Loading public link…":"Cargando a ligazón pública…","Mail recipients":"Destinatarios de correo","Mark as favorite":"Marca como favorito",Move:{"Action in the files list row to initiate move of a single resource":"Mover","":"Mover"},"Move here":{"Confirm action in the location picker for move":"Mover aquí"},msg:"msx","Multiple files already exists":"Xa existen varios ficheiros",Name:"Nome","Navigate to the parent":"Navegar ata o pai",New:"Novo","New file":"Novo ficheiro","New folder":"Novo cartafol","New folder…":"Novo cartafol…","No public links":"Non hai ligazóns públicas","No Versions available for this file":"Non hai versións dispoñíbeis para este ficheiro","Only invited people can use this link.":"Só as persoas convidadas poden usar esta ligazón.","Open folder":{"Action in the files list row to open a folder":"Abrir cartafol"},"Open in browser":"Abrir no navegador",Overwrite:"Sobreescribir",Owner:"Propietario",Password:"Contrasinal","Password protected":"Protexido por contrasinal","Paste here":{"Confirm action in the location picker for copy":"Pegar aquí"},Pending:"Pendente",People:"Xente","Permanently delete file %{name}":"Eliminar de xeito permanente o ficheiro %{name}","Permanently delete folder %{name}":"Eliminar de xeito permanente o cartafol %{name}","Permanently delete selected resource?":["Eliminar de xeito permanente o recurso seleccionado?","Eliminar de xeito permanente os %{amount} recursos seleccionados?"],"Person was added":"Engadiuse a persoa","Personal note":"Nota persoal","Please, accept this share first to display available actions":"Acepte primeiro esta compartición para amosar as accións dispoñíbeis","Private Link":"Ligazón privada","Public link":"Ligazón pública","Public link created":"Creouse unha ligazón pública","Public link has been successfully created and copied into your clipboard.":"A ligazón pública foi creada e copiada satispactoriamente no portapapeis.","Public Links":"Ligazóns públicas","Recipients can upload but existing contents are not revealed.":"Os destinatarios poden enviar, mais non se revelan os contidos existentes.","Recipients can view and download contents.":"Os destinatarios poden ver e descargar contidos.","Recipients can view, download and upload contents.":"Os destinatarios poden ver, descargar e enviar contidos.","Recipients can view, download, edit, delete and upload contents.":"Os destinatarios poden ver, descargar, editar, eliminar e enviar contidos.","Reload public link":"Volvendo cargar a ligazón pública","Remote user":"Usuario remoto","Remove expiration date":"Retirar a data de caducidade","Remove password":"Retirar o contrasinal",Rename:"Renomear","Rename file %{name}":"Renomear o ficheiro %{name}","Rename folder %{name}":"Renomear o cartafol %{name}",Resharer:"Volver compartir","Resolving private link…":"Resolvendo a ligazón privada…","Resource not found":"Non se atopou o recurso","Resource with name %{name} already exists":"Xa existe o frecurso nome %{name}","Restoration of %{file} failed":"Produciuse un fallo ao restaurar %{file}",Restore:"Restaurar",Role:"Rol",Save:"Gardar","Save Share":"Gardar a compartición",Saving:"Gardando","Saving Public Link":"Gardando ligazón pública","Saving Share":"Gardando compartición","Send a copy to myself":"Envíame unha copia","Set detailed permissions":"Estabelecer os permisos detallados",Share:"Compartir","Shared by %{resharer}":"Compartido por %{resharer}","Shared with me":"Compartido comigo","Shared with others":"Compartido con outros","Show Details":"Amosar os detalles",'The name "%{name}" is already taken':"O nome «%{name}» xa está ocupado","The name cannot be empty":"O nome non pode estar baleiro",'The name cannot be equal to ".."':"O nome non pode ser igual a «..»",'The name cannot be equal to "."':"O nome non pode ser igual a «.»",'The name cannot contain "/"':"O nome non pode conter unha «/»","The name cannot end with whitespace":"O nome non pode rematar cun espazo en branco","The private link has been copied to your clipboard.":"A ligazón privada foi copiada no portapapeis.","There are no resources in this folder.":"Non hai recursos neste cartafol.",this:"este","This resource is password-protected.":"Este recurso está protexido por contrasinal.",title:"título","Unknown Role":"Rol descoñecido","Unknown type":"Tipo descoñecido","Unmark as favorite":"Retirar a marca de favorito","Upload complete":"Envío completado","Upload failed":"Produciuse un fallo no envío","Upload File":"Enviar ficheiro","Upload Folder":"Enviar cartafol","Upload of a folder is not supported in Internet Explorer.":"O envío dun cartafol non é compatíbel co Internet Explorer.","Upload, edit, delete, download and preview":"Enviar, editar, eliminar, descargar e visionar","Upload, edit, delete, download, preview and share":"Enviar, editar, eliminar, descargar visionar e compartir",Uploader:"Xestor de envíos",'Uploading "%{ fileName }"':"Enviando «%{ fileName }»","Uploading %{ count } item":["Enviando %{ count } elemento","Enviando %{ count } elementos"],'Uploading file "%{fileName}"':"Enviando o ficheiro «%{fileName}»",User:"Usuario",Versions:"Versións","Via %{folderName}":"Mediante %{folderName}",Viewer:"Visor","We went looking everywhere, but were unable to find the selected resource.":"Buscamos por todas partes, mais non puidemos atopar o recurso seleccionado.","You don't have permission to share this file.":"Non ten permiso para compartir este ficheiro.","You don't have permission to share this folder.":"Non ten permiso para compartir este cartafol.","You have no permission to upload!":"Non ten permiso para facer envíos!","You have not enough space left to upload!":"Non dispón de espazo abondo para facer un envío!"},it:{}};e.vueGettext.translate.initTranslations(d,{language:"de",getTextPluginSilent:!1,getTextPluginMuteLanguages:[],silent:!1});const{gettext:u,ngettext:h,gettextInterpolate:p}=e.vueGettext.translate,m=e=>void 0!==e.shareTypes?e.shareTypes:e.shares?Array.from(new Set(e.shares.map((e=>parseInt(e.type,10))))):[],f=t=>e.intersection(l,m(t)).length>0,g=e=>m(e).indexOf(n.link)>=0,v=(t,i)=>f(t)||((t,i)=>t.isReceivedShare()||e.intersection(l,E(t.path,i)).length>0)(t,i),b=(e,t)=>g(e)||((e,t)=>E(e.path,t).indexOf(n.link)>=0)(e,t),_=e=>f(e)?u("This item is directly shared with others."):u("This item is shared with others through one of the parent folders."),w=e=>g(e)?u("This item is directly shared via links."):u("This item is shared via links through one of the parent folders."),E=(e,t)=>{const i=c(e,!0);if(0===i.length)return[];i.pop();const s={};return i.forEach((e=>{const i=t[e];i&&i.forEach((e=>{s[e.shareType]=!0}))})),Object.keys(s).map((e=>parseInt(e,10)))},k=(e,t)=>[{id:`files-sharing-${e.id.replaceAll("=","")}`,accessibleDescription:_(e),label:u("Show invited people"),visible:v(e,t),icon:"group",target:"sharing-item",type:f(e)?"user-direct":"user-indirect",handler:C},{id:`file-link-${e.id.replaceAll("=","")}`,accessibleDescription:w(e),label:u("Show links"),visible:b(e,t),icon:"link",target:"sidebar-links-item",type:g(e)?"link-direct":"link-indirect",handler:C}].filter((e=>e.visible)),C=(e,t)=>{window.Vue.$store.dispatch("Files/setHighlightedFile",e),window.Vue.$store.commit("Files/SET_APP_SIDEBAR_EXPANDED_ACCORDION",t)};function x(e){return e}var S=({isFolder:e=!1,$gettext:t=x,allowSharePerm:i=!1})=>e?[{name:"viewer",label:t("Viewer"),description:t(i?"Download, preview and share":"Download and preview"),permissions:i?["read","share"]:["read"]},{name:"editor",label:t("Editor"),description:t(i?"Upload, edit, delete, download, preview and share":"Upload, edit, delete, download and preview"),permissions:i?["read","update","create","delete","share"]:["read","update","create","delete"]}]:[{name:"viewer",label:t("Viewer"),description:t(i?"Download, preview and share":"Download and preview"),permissions:i?["read","share"]:["read"]},{name:"editor",label:t("Editor"),description:t(i?"Edit, download, preview and share":"Edit, download and preview"),permissions:i?["read","update","share"]:["read","update"]}];const y={read:1,update:2,create:4,delete:8,share:16,all:31};function F(e,t=[]){let i=0;for(const t of e.permissions)i|=y[t];if(t)for(const s of t)e.additionalPermissions&&e.additionalPermissions[s]&&(i|=y[s]);return i}function R(e,t,i){const s=S({isFolder:t,allowSharePerm:i});e=parseInt(e,10);for(const t in s){const i=s[t];let r=0;i.permissions.forEach((e=>{r|=y[e]}));const o=r,a=i.additionalPermissions;for(const e in a)r|=y[a[e].name];if(r===e||o===e)return i}return{name:"advancedRole"}}function $(e,t){const i=y[t];return(e&i)===i}function P(e){const t=i[e];return t||"file"}function T(t){const i=e.pathUtil.extname(t);return i?i.replace(/^(.)/,"").toLowerCase():""}function A(t){const i="dir"===t.type,s=T(t.name);return{id:t.fileInfo["{http://owncloud.org/ns}fileid"],fileId:t.fileInfo["{http://owncloud.org/ns}fileid"],icon:i?"folder":P(s),name:e.pathUtil.basename(t.name),extension:i?"":s,path:t.name,type:i?"folder":t.type,mdate:t.fileInfo["{DAV:}getlastmodified"],size:i?t.fileInfo["{http://owncloud.org/ns}size"]:t.fileInfo["{DAV:}getcontentlength"],indicators:[],permissions:t.fileInfo["{http://owncloud.org/ns}permissions"]||"",starred:"0"!==t.fileInfo["{http://owncloud.org/ns}favorite"],etag:t.fileInfo["{DAV:}getetag"],sharePermissions:t.fileInfo["{http://open-collaboration-services.org/ns}share-permissions"],shareTypes:function(){let e=t.fileInfo["{http://owncloud.org/ns}share-types"];return e&&(e=e.map((e=>parseInt(e,10)))),e||[]}(),privateLink:t.fileInfo["{http://owncloud.org/ns}privatelink"],downloadURL:t.fileInfo["{http://owncloud.org/ns}downloadURL"],ownerDisplayName:t.fileInfo["{http://owncloud.org/ns}owner-display-name"],ownerId:t.fileInfo["{http://owncloud.org/ns}owner-id"],canUpload:function(){return this.permissions.indexOf("C")>=0},canDownload:function(){return!i},canBeDeleted:function(){return this.permissions.indexOf("D")>=0},canRename:function(){return this.permissions.indexOf("N")>=0},canShare:function(){return this.permissions.indexOf("R")>=0},canCreate:function(){return this.permissions.indexOf("C")>=0},isMounted:function(){return this.permissions.indexOf("M")>=0},isReceivedShare:function(){return this.permissions.indexOf("S")>=0}}}function I(t,i=!1,s,r,o){if(i)return e.orderBy(t,["file_target","permissions"],["asc","desc"]).map((e=>D(e,i,s)));t.sort(((e,t)=>e.path.localeCompare(t.path)));const a=[];let c=null;for(const e of t)c&&e.path===c.path?l.includes(e.share_type)?c.sharedWith.push({username:e.share_with,displayName:e.share_with_displayname,avatar:void 0}):e.share_type===n.link&&c.sharedWith.push({name:e.name||e.token,link:!0}):(l.includes(e.share_type)?e.sharedWith=[{username:e.share_with,displayName:e.share_with_displayname,avatar:void 0}]:e.share_type===n.link&&(e.sharedWith=[{name:e.name||e.token,link:!0}]),c=e,a.push(e));return a.map((e=>D(e,i,s)))}function D(t,i=!1,s){const r={id:t.id,fileId:t.item_source,type:t.item_type},o="folder"===r.type;return i?(r.resourceOwner={username:t.uid_file_owner,displayName:t.displayname_file_owner},r.owner=[{username:t.uid_owner,displayName:t.displayname_owner,avatar:void 0}],r.status=t.state,r.name=e.pathUtil.basename(t.file_target),r.path=t.file_target,r.isReceivedShare=()=>!0):(r.sharedWith=t.sharedWith,r.shareOwner=t.uid_owner,r.shareOwnerDisplayname=t.displayname_owner,r.name=e.pathUtil.basename(t.path),r.path=t.path,r.isReceivedShare=()=>!1),r.extension=o?"":T(r.name),r.canUpload=()=>!0,r.canBeDeleted=()=>!r.isReceivedShare()||$(t.permissions,"delete"),r.canRename=()=>!r.isReceivedShare()||$(t.permissions,"update"),r.canShare=()=>!r.isReceivedShare()||$(t.permissions,"share"),r.isMounted=()=>!1,r.canDownload=()=>!o,r.share=L(t,r,s),r.indicators=[],r.icon=o?"folder":P(r.extension),r.sdate=1e3*t.stime,r}function L(t,i,s){return parseInt(t.share_type,10)===n.link?function(t){let i="";switch(t.permissions){case"1":i=u("Viewer");break;case"5":i=u("Contributor");break;case"4":i=u("Uploader");break;case"15":i=u("Editor")}return{shareType:parseInt(t.share_type,10),id:t.id,token:t.token,url:t.url,path:t.path,permissions:t.permissions,description:i,stime:t.stime,name:"string"==typeof t.name?t.name:"",password:!(!t.share_with||!t.share_with_displayname),expiration:"string"==typeof t.expiration?e.DateTime_1.fromFormat(t.expiration,"yyyy-MM-dd HH:mm:ss").toFormat("yyyy-MM-dd"):null,itemSource:t.item_source,file:{parent:t.file_parent,source:t.file_source,target:t.file_target}}}(t):N(t,i,s)}function O(e){return"string"!=typeof e?null:e}function N(e,t,i){const s={shareType:parseInt(e.share_type,10),id:e.id};switch(s.shareType){case n.user:case n.remote:case n.group:s.role=R(e.permissions,"folder"===t.type,i),s.permissions=e.permissions,s.collaborator={name:e.share_with,displayName:e.share_with_displayname,additionalInfo:O(e.share_with_additional_info)},s.owner={name:e.uid_owner,displayName:e.displayname_owner,additionalInfo:O(e.additional_info_owner)},s.fileOwner={name:e.uid_file_owner,displayName:e.displayname_file_owner,additionalInfo:O(e.additional_info_file_owner)},s.customPermissions={update:e.permissions&y.update,create:e.permissions&y.create,delete:e.permissions&y.delete,share:e.permissions&y.share}}return("string"==typeof e.expiration||e.expiration instanceof String)&&(s.expires=new Date(e.expiration)),s.path=e.path,s}function U(t){const i="dir"===t.type,s=t.fileInfo["{http://owncloud.org/ns}trashbin-original-filename"],r=i?"":T(s);return{type:i?"folder":t.type,ddate:t.fileInfo["{http://owncloud.org/ns}trashbin-delete-datetime"],name:e.pathUtil.basename(s),extension:r,path:t.fileInfo["{http://owncloud.org/ns}trashbin-original-location"],id:e.pathUtil.basename(t.name),icon:i?"folder":P(r),indicators:[]}}const z={accepted:0,pending:1,declined:2};async function M(e,t,i,s){const r=function(e){switch(e){case z.accepted:return"POST";case z.declined:return"DELETE";default:return null}}(t);if(!r)throw new Error("invalid new share status");let o=await s.requests.ocs({service:"apps/files_sharing",action:`api/v1/shares/pending/${e.share.id}`,method:r});if(200!==o.status)throw new Error(o.statusText);if(parseInt(o.headers.get("content-length"))>0&&(o=await o.json(),o.ocs.data.length>0)){return D(o.ocs.data[0],!0,i)}return null}var G={mixins:[r],computed:{...e.mapGetters$1(["isOcis"]),$_acceptShare_items(){return[{icon:"check",handler:this.$_acceptShare_trigger,label:()=>this.$gettext("Accept share"),isEnabled:({resource:e})=>!!a(["files-shared-with-me"],this.$route.name)&&[z.pending,z.declined].includes(e.status),componentType:"oc-button",class:"oc-files-actions-sidebar-accept-share-trigger"}]}},methods:{...e.mapMutations("Files",["UPDATE_RESOURCE"]),async $_acceptShare_trigger(e){try{const t=await M(e,z.accepted,!this.isOcis,this.$client);this.UPDATE_RESOURCE(t)}catch(e){console.log(e),this.showMessage({title:this.$gettext("Error while accepting the selected share."),status:"danger"})}}}},B={mixins:[r],computed:{$_copy_items(){return[{icon:"file_copy",handler:this.$_copy_trigger,label:()=>this.$gettext("Copy"),isEnabled:()=>!!a(["files-personal","files-public-list","files-favorites"],this.$route.name)&&(!this.publicPage()||this.currentFolder.canCreate()),componentType:"oc-button",class:"oc-files-actions-sidebar-copy-trigger"}]}},methods:{$_copy_trigger(t){const i=e.dirname(t.path),s=this.isPublicPage?"public":"private";this.$router.push({name:"files-location-picker",params:{context:s,item:i,action:"copy"},query:{resource:t.path}})}}},H={mixins:[r],computed:{...e.mapGetters$1(["isOcis"]),$_declineShare_items(){return[{icon:"not_interested",handler:this.$_declineShare_trigger,label:()=>this.$gettext("Decline share"),isEnabled:({resource:e})=>!!a(["files-shared-with-me"],this.$route.name)&&[z.pending,z.accepted].includes(e.status),componentType:"oc-button",class:"oc-files-actions-sidebar-decline-share-trigger"}]}},methods:{...e.mapMutations("Files",["UPDATE_RESOURCE"]),async $_declineShare_trigger(e){try{const t=await M(e,z.declined,!this.isOcis,this.$client);this.UPDATE_RESOURCE(t)}catch(e){console.log(e),this.showMessage({title:this.$gettext("Error while declining the selected share."),status:"danger"})}}}};function V(e){return JSON.parse(JSON.stringify(e))}var q={data:()=>({deleteResources_queue:new e._default({concurrency:4}),deleteResources_deleteOps:[],resourcesToDelete:[]}),computed:{...e.mapGetters$1("Files",["selectedFiles"]),...e.mapGetters$1(["user"]),$_deleteResources_isInTrashbin(){return a(["files-trashbin"],this.$route.name)},$_deleteResources_resources(){return V(this.resourcesToDelete)},$_deleteResources_dialogTitle(){const e=this.$_deleteResources_resources,t="folder"===e[0].type;let i=null;return 1===e.length?(i=t?this.$_deleteResources_isInTrashbin?this.$gettext("Permanently delete folder %{name}"):this.$gettext("Delete folder %{name}"):this.$_deleteResources_isInTrashbin?this.$gettext("Permanently delete file %{name}"):this.$gettext("Delete file %{name}"),this.$gettextInterpolate(i,{name:e[0].name},!0)):(i=this.$_deleteResources_isInTrashbin?this.$ngettext("Permanently delete selected resource?","Permanently delete %{amount} selected resources?",e.length):this.$ngettext("Delete selected resource?","Delete %{amount} selected resources?",e.length),this.$gettextInterpolate(i,{amount:e.length},!1))},$_deleteResources_dialogMessage(){const e=this.$_deleteResources_resources,t="folder"===e[0].type;return 1===e.length?t?this.$_deleteResources_isInTrashbin?this.$gettext("Are you sure you want to delete this folder? All it’s content will be permanently removed. This action cannot be undone."):this.$gettext("Are you sure you want to delete this folder?"):this.$_deleteResources_isInTrashbin?this.$gettext("Are you sure you want to delete this file? All it’s content will be permanently removed. This action cannot be undone."):this.$gettext("Are you sure you want to delete this file?"):this.$_deleteResources_isInTrashbin?this.$gettext("Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone."):this.$gettext("Are you sure you want to delete all selected resources?")}},methods:{...e.mapActions$1("Files",["pushResourcesToDeleteList","removeFilesFromTrashbin","setHighlightedFile","resetFileSelection","addFileSelection","deleteFiles"]),...e.mapActions$1(["showMessage","toggleModalConfirmButton","hideModal","createModal"]),...e.mapMutations(["SET_QUOTA"]),$_deleteResources_hideDialog(){this.setHighlightedFile(null),this.hideModal()},$_deleteResources_trashbin_deleteOp(e){return this.$client.fileTrash.clearTrashBin(e.id).then((()=>{this.removeFilesFromTrashbin([e]);const t=this.$gettext("%{file} was successfully deleted");this.showMessage({title:this.$gettextInterpolate(t,{file:e.name},!0),autoClose:{enabled:!0}})})).catch((t=>{if(423===t.statusCode){const t=this.deleteResources_queue.add((()=>this.$_deleteResources_trashbin_deleteOp(e)));return void this.deleteResources_deleteOps.push(t)}const i=this.$gettext("Deletion of %{file} failed");this.showMessage({title:this.$gettextInterpolate(i,{file:e.name},!0),desc:t.message,status:"danger",autoClose:{enabled:!0}})}))},$_deleteResources_trashbin_delete(){this.toggleModalConfirmButton();for(const e of this.$_deleteResources_resources){const t=this.deleteResources_queue.add((()=>this.$_deleteResources_trashbin_deleteOp(e)));this.deleteResources_deleteOps.push(t)}Promise.all(this.deleteResources_deleteOps).then((()=>{this.$_deleteResources_hideDialog(),this.toggleModalConfirmButton()}))},$_deleteResources_filesList_delete(){this.deleteFiles({client:this.$client,files:this.$_deleteResources_resources,publicPage:this.publicPage(),$gettext:this.$gettext,$gettextInterpolate:this.$gettextInterpolate}).then((async()=>{this.$_deleteResources_hideDialog(),this.toggleModalConfirmButton();const e=await this.$client.users.getUser(this.user.id);this.SET_QUOTA(e.quota)}))},$_deleteResources_delete(){this.toggleModalConfirmButton(),this.$_deleteResources_isInTrashbin?this.$_deleteResources_trashbin_delete():this.$_deleteResources_filesList_delete()},$_deleteResources_displayDialog(e=null,t=!1){this.resourcesToDelete=t?[e]:this.selectedFiles;const i={variation:"danger",icon:"warning",title:this.$_deleteResources_dialogTitle,message:this.$_deleteResources_dialogMessage,cancelText:this.$gettext("Cancel"),confirmText:this.$gettext("Delete"),onCancel:this.$_deleteResources_hideDialog,onConfirm:this.$_deleteResources_delete};this.createModal(i)}}},j={mixins:[q],computed:{$_delete_items(){return[{icon:"delete",label:()=>this.$gettext("Delete"),handler:this.$_delete_trigger,isEnabled:({resource:e})=>!a(["files-shared-with-me","files-trashbin"],this.$route.name)&&e.canBeDeleted(),componentType:"oc-button",class:"oc-files-actions-sidebar-delete-trigger"},{icon:"delete",label:()=>this.$gettext("Delete"),handler:this.$_delete_trigger,isEnabled:()=>a(["files-trashbin"],this.$route.name),componentType:"oc-button",class:"oc-files-actions-sidebar-delete-trigger"}]}},methods:{$_delete_trigger(e){this.$_deleteResources_displayDialog(e,!0)}}},W={computed:{$_download_items(){return[{icon:"file_download",handler:this.$_download_trigger,label:()=>this.$gettext("Download"),isEnabled:({resource:e})=>!a(["files-trashbin"],this.$route.name)&&e.canDownload(),canBeDefault:!0,componentType:"oc-button",class:"oc-files-actions-sidebar-download-trigger"}]}},methods:{$_download_trigger(e){this.downloadFile(e)}}},Y={computed:{$_favorite_items(){return[{icon:"star",handler:this.$_favorite_trigger,label:e=>e.starred?this.$gettext("Unmark as favorite"):this.$gettext("Mark as favorite"),isEnabled:()=>{const e=a(["files-personal","files-favorites"],this.$route.name);return this.isAuthenticated&&this.capabilities.files&&this.capabilities.files.favorites&&e},componentType:"oc-button",class:"oc-files-actions-sidebar-favorite-trigger"}]}},methods:{...e.mapActions$1("Files",["markFavorite"]),$_favorite_trigger(e){this.markFavorite({client:this.$client,file:e}).catch((()=>{const t=this.$gettext('Error while starring "%{file}"'),i=this.$gettextInterpolate(t,{file:e.name},!0);this.showMessage({title:i,status:"danger",autoClose:{enabled:!0}})}))}}},X={mixins:[r],computed:{...e.mapGetters$1(["configuration"]),$_fetch_items(){return[{icon:"remove_red_eye",handler:e=>this.$_fetch_trigger(e,"application/pdf",this.isPublicFilesRoute),label:()=>this.$gettext("Open in browser"),isEnabled:({resource:e})=>!this.isTrashbinRoute&&"pdf"===e.extension,canBeDefault:!0,componentType:"oc-button",class:"oc-files-actions-sidebar-fetch-trigger",opensInNewWindow:!0}]}},methods:{$_fetch_trigger(e,t,i){if(i){const t=e.downloadURL;return void window.open(t,"_blank")}const s=this.$client.helpers._webdavUrl+e.path,r=new Headers;r.append("Authorization","Bearer "+this.getToken),r.append("X-Requested-With","XMLHttpRequest"),fetch(s,{method:"GET",headers:r}).then((e=>e.blob())).then((e=>this.$_fetch_openBlobInNewTab(e,t)))},$_fetch_openBlobInNewTab(e,t){const i=new Blob([e],{type:t}),s=window.URL.createObjectURL(i);window.open(s,"_blank")}}};function Q(e,t){const i=e.isReceivedShare()||e.isMounted(),s=""===t&&i;return e.canBeDeleted()&&!s}var K={mixins:[r],computed:{$_move_items(){return[{icon:"folder-move",handler:e=>this.$_move_trigger(e),label:()=>this.$pgettext("Action in the files list row to initiate move of a single resource","Move"),isEnabled:({resource:e})=>!!a(["files-personal","files-public-list","files-favorites"],this.$route.name)&&(!!this.currentFolder&&Q(e,this.currentFolder.path)),componentType:"oc-button",class:"oc-files-actions-sidebar-move-trigger"}]}},methods:{$_move_trigger(t){const i=e.dirname(t.path),s=this.isPublicPage?"public":"private";this.$router.push({name:"files-location-picker",params:{context:s,item:i,action:"move"},query:{resource:t.path}})}}},Z={computed:{$_navigate_items(){return[{icon:"folder-open",handler:e=>this.$_navigate_trigger(e),label:()=>this.$pgettext("Action in the files list row to open a folder","Open folder"),isEnabled:({resource:e})=>!a(["files-trashbin"],this.$route.name)&&"folder"===e.type,canBeDefault:!0,componentType:"router-link",route:this.route,class:"oc-files-actions-sidebar-navigate-trigger"}]},route(){let e="files-personal";return this.publicPage()&&(e="files-public-list"),e}},methods:{...e.mapActions$1("Files",["resetSearch"]),$_navigate_trigger(e){""!==this.searchTerm&&this.$route.params.item===e.path&&this.resetSearch(),this.$router.push({name:this.route,params:{item:e.path}})}}},J={computed:{...e.mapGetters$1("Files",["activeFiles"]),$_rename_items(){return[{icon:"edit",label:()=>this.$gettext("Rename"),handler:this.$_rename_trigger,isEnabled:({resource:e})=>!a(["files-trashbin"],this.$route.name)&&e.canRename(),componentType:"oc-button",class:"oc-files-actions-sidebar-rename-trigger"}]}},methods:{...e.mapActions$1(["createModal","hideModal","setModalInputErrorMessage","toggleModalConfirmButton"]),...e.mapActions$1("Files",["renameFile"]),$_rename_trigger(e){const t="folder"===e.type,i={variation:"passive",title:this.$gettextInterpolate(t?this.$gettext("Rename folder %{name}"):this.$gettext("Rename file %{name}"),{name:e.name}),cancelText:this.$gettext("Cancel"),confirmText:this.$gettext("Rename"),hasInput:!0,inputValue:e.name,inputLabel:t?this.$gettext("Folder name"):this.$gettext("File name"),onCancel:this.hideModal,onConfirm:t=>{this.$_rename_renameResource(e,t)},onInput:t=>{this.$_rename_checkNewName(e.name,t)}};this.createModal(i)},$_rename_checkNewName(e,t){if(!t)return this.setModalInputErrorMessage(this.$gettext("The name cannot be empty"));if(/[/]/.test(t))return this.setModalInputErrorMessage(this.$gettext('The name cannot contain "/"'));if("."===t)return this.setModalInputErrorMessage(this.$gettext('The name cannot be equal to "."'));if(".."===t)return this.setModalInputErrorMessage(this.$gettext('The name cannot be equal to ".."'));if(/\s+$/.test(t))return this.setModalInputErrorMessage(this.$gettext("The name cannot end with whitespace"));if(!this.flatFileList){if(this.activeFiles.find((i=>i.name===t&&e!==t))){const e=this.$gettext('The name "%{name}" is already taken');return this.setModalInputErrorMessage(this.$gettextInterpolate(e,{name:t},!0))}}this.setModalInputErrorMessage(null)},$_rename_renameResource(e,t){this.toggleModalConfirmButton(),this.renameFile({client:this.$client,file:e,newValue:t,publicPage:this.publicPage()}).then((()=>{this.hideModal()})).catch((i=>{this.toggleModalConfirmButton();let s=this.$gettext('Error while renaming "%{file}" to "%{newName}"');423===i.statusCode&&(s=this.$gettext('Error while renaming "%{file}" to "%{newName}" - the file is locked'));const r=this.$gettextInterpolate(s,{file:e.name,newName:t},!0);this.showMessage({title:r,status:"danger",autoClose:{enabled:!0}})}))}}},ee={computed:{$_restore_items(){return[{icon:"restore",label:()=>this.$gettext("Restore"),handler:this.$_restore_trigger,isEnabled:()=>a(["files-trashbin"],this.$route.name),componentType:"oc-button",class:"oc-files-actions-sidebar-restore-trigger"}]}},methods:{...e.mapActions$1("Files",["resetFileSelection","addFileSelection","setHighlightedFile","removeFilesFromTrashbin"]),$_restore_trigger(e){this.resetFileSelection(),this.addFileSelection(e),this.$client.fileTrash.restore(e.id,e.path).then((()=>{this.removeFilesFromTrashbin([e]);const t=this.$gettext("%{file} was restored successfully");this.showMessage({title:this.$gettextInterpolate(t,{file:e.name},!0),autoClose:{enabled:!0}})})).catch((t=>{const i=this.$gettext("Restoration of %{file} failed");this.showMessage({title:this.$gettextInterpolate(i,{file:e.name},!0),desc:t.message,status:"danger",autoClose:{enabled:!0}})})),this.resetFileSelection(),this.setHighlightedFile(null)}}};const te=["fetch","navigate","download","favorite","copy","move","rename","restore","delete","acceptShare","declineShare"];var ie={mixins:[G,B,H,j,W,Y,X,K,Z,J,ee],computed:{...e.mapState(["apps"]),...e.mapGetters$1("Files",["highlightedFile","currentFolder"]),...e.mapGetters$1(["configuration"]),$_fileActions_systemActions(){const e=[];for(const t of te)e.push(...this[`$_${t}_items`]);return e},$_fileActions_editorActions(){return this.apps.fileEditors.map((t=>({label:()=>{const e=this.$gettext("Open in %{app}");return this.$gettextInterpolate(e,{app:this.apps.meta[t.app].name},!0)},icon:this.apps.meta[t.app].icon,handler:e=>this.$_fileActions_openEditor(t,e.path,e.id,"edit"),isEnabled:({resource:e})=>!(t.routes?.length>0&&!a(t.routes,this.$route.name))&&e.extension===t.extension,canBeDefault:!0,componentType:"oc-button",class:`oc-files-actions-sidebar-${e.kebabCase(this.apps.meta[t.app].name).toLowerCase()}-trigger`})))}},methods:{...e.mapActions$1(["openFile"]),$_fileActions_openEditor(e,t,i,s){if(e.handler)return e.handler({config:this.configuration,extensionConfig:e.config,filePath:t,fileId:i,mode:s});if(this.openFile({filePath:t}),e.newTab){const r=this.$router.resolve({name:e.routeName,params:{filePath:t,fileId:i,mode:s}}).href,o=`${e.routeName}-${t}`,a=window.open(r,o);a&&a.focus()}else this.$router.push({name:e.routeName||e.app,params:{filePath:t,fileId:i,mode:s,contextRouteName:this.$route.name}})},$_fileActions_triggerDefaultAction(e){let t=this.$_fileActions_editorActions.concat(this.$_fileActions_systemActions);t=t.filter((t=>t.isEnabled({resource:e,parent:this.currentFolder})&&t.canBeDefault)),t[0].handler(e,t[0].handlerData)}}},se={methods:{scrollToResource(e){let t=document.querySelector("#files-app-bar").getBoundingClientRect().bottom;t+=document.querySelector(".files-table thead").getBoundingClientRect().height,this.$scrollTo(`.oc-tbody-tr-${e.id}`,300,{offset:-t})}}};const re={mixins:[r,q],computed:{...e.mapGetters$1("Files",["selectedFiles","currentFolder","activeFiles"]),emptyTrashbinButtonText(){return this.selectedFiles.length<1?this.$gettext("Empty trash bin"):this.$gettext("Delete")},canMove(){if(!a(["files-personal","files-public-list","files-favorites"],this.$route.name))return!1;return!this.selectedFiles.some((e=>!1===Q(e,this.currentFolder.path)))},canCopy(){return!!a(["files-personal","files-public-list","files-favorites"],this.$route.name)&&(!this.isPublicFilesRoute||this.currentFolder.canCreate())},canDelete(){if(this.isSharedWithMeRoute)return!1;if(this.isPublicFilesRoute)return this.currentFolder.canBeDeleted();return!this.selectedFiles.some((e=>!e.canBeDeleted()))},canAccept(){if(!this.isSharedWithMeRoute)return!1;return!this.selectedFiles.some((e=>e.status===z.accepted))},canDecline(){if(!this.isSharedWithMeRoute)return!1;return!this.selectedFiles.some((e=>e.status===z.declined))},displayBulkActions(){return this.$route.meta.hasBulkActions&&this.selectedFiles.length>0},isEmpty(){return this.activeFiles.length<1}},methods:{...e.mapActions$1("Files",["removeFilesFromTrashbin","resetFileSelection","setHighlightedFile"]),...e.mapActions$1(["showMessage"]),...e.mapMutations("Files",["UPDATE_RESOURCE"]),restoreFiles(e=this.selectedFiles){for(const t of e)this.$client.fileTrash.restore(t.id,t.path).then((()=>{const e=this.$gettext("%{resource} was restored successfully");this.showMessage({title:this.$gettextInterpolate(e,{resource:t.name},!0)}),this.removeFilesFromTrashbin([t])})).catch((e=>{const i=this.$gettext("Restoration of %{resource} failed");this.showMessage({title:this.$gettextInterpolate(i,{resource:t.name},!0),desc:e.message,status:"danger"})}));this.resetFileSelection(),this.setHighlightedFile(null)},emptyTrashbin(){this.$client.fileTrash.clearTrashBin().then((()=>{this.showMessage({title:this.$gettext("All deleted files were removed")}),this.removeFilesFromTrashbin(this.activeFiles)})).catch((e=>{this.showMessage({title:this.$gettext("Could not delete files"),desc:e.message,status:"danger"})}))},triggerLocationPicker(e){const t=V(this.selectedFiles),i=this.isPublicPage?"public":"private";this.$router.push({name:"files-location-picker",params:{context:i,item:this.currentFolder.path,action:e},query:{resource:t.map((e=>e.path))}})},acceptShares(){this.triggerShareActions(z.accepted)},declineShares(){this.triggerShareActions(z.declined)},async triggerShareActions(t){const i=[],s=[],r=new e._default({concurrency:4});this.selectedFiles.forEach((e=>{s.push(r.add((async()=>{try{const i=await M(e,t,!this.isOcis,this.$client);i&&this.UPDATE_RESOURCE(i)}catch(e){i.push(e)}})))})),await Promise.all(s),0!==i.length?(console.log(i),t!==z.accepted?t===z.declined&&this.showMessage({title:this.$ngettext("Error while declining the selected share.","Error while declining selected shares.",this.selectedFiles.length),status:"danger"}):this.showMessage({title:this.$ngettext("Error while accepting the selected share.","Error while accepting selected shares.",this.selectedFiles.length),status:"danger"})):this.resetFileSelection()}}};var oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-flex uk-flex-middle"},[e.isTrashbinRoute?[e.selectedFiles.length>0?i("oc-button",{key:"restore-btn",staticClass:"oc-mr-s",attrs:{id:"restore-selected-btn",variation:"primary"},on:{click:function(t){return e.restoreFiles()}}},[i("oc-icon",{attrs:{name:"restore"}}),e._v(" "),i("translate",[e._v("Restore")])],1):e._e(),e._v(" "),e.isEmpty?e._e():i("oc-button",{key:"delete-btn",attrs:{id:"delete-selected-btn",variation:"danger"},on:{click:function(t){e.selectedFiles.length<1?e.emptyTrashbin():e.$_deleteResources_displayDialog()}}},[i("oc-icon",{attrs:{name:"delete"}}),e._v("\n      "+e._s(e.emptyTrashbinButtonText)+"\n    ")],1)]:e._e(),e._v(" "),e.displayBulkActions?i("oc-grid",{attrs:{gutter:"small"}},[e.canCopy?i("div",[i("oc-button",{key:"copy-selected-btn",attrs:{id:"copy-selected-btn",variation:"primary"},on:{click:function(t){return e.triggerLocationPicker("copy")}}},[i("oc-icon",{attrs:{name:"file_copy"}}),e._v(" "),i("translate",[e._v("Copy")])],1)],1):e._e(),e._v(" "),e.canMove?i("div",[i("oc-button",{key:"move-selected-btn",attrs:{id:"move-selected-btn",variation:"primary"},on:{click:function(t){return e.triggerLocationPicker("move")}}},[i("oc-icon",{attrs:{name:"folder-move"}}),e._v(" "),i("translate",[e._v("Move")])],1)],1):e._e(),e._v(" "),e.canDelete?i("div",[i("oc-button",{key:"delete-selected-btn",attrs:{id:"delete-selected-btn",variation:"primary"},on:{click:e.$_deleteResources_displayDialog}},[i("oc-icon",{attrs:{name:"delete"}}),e._v(" "),i("translate",[e._v("Delete")])],1)],1):e._e(),e._v(" "),e.canAccept?i("div",[i("oc-button",{key:"accept-shares-btn",attrs:{id:"accept-selected-shares-btn",variation:"primary"},on:{click:function(t){return e.acceptShares()}}},[i("oc-icon",{attrs:{name:"check"}}),e._v(" "),i("translate",[e._v("Accept")])],1)],1):e._e(),e._v(" "),e.canDecline?i("div",[i("oc-button",{key:"decline-shares-btn",attrs:{id:"decline-selected-shares-btn",variation:"primary"},on:{click:function(t){return e.declineShares()}}},[i("oc-icon",{attrs:{name:"not_interested"}}),e._v(" "),i("translate",[e._v("Decline")])],1)],1):e._e()]):e._e()],2)};oe._withStripped=!0;const ae=e.normalizeComponent({render:oe,staticRenderFns:[]},undefined,re,undefined,false,undefined,!1,void 0,void 0,void 0);const ne={components:{vueDropzone:e.vue2Dropzone},mixins:[s],props:{rootPath:{type:String,required:!0},path:{type:String,required:!0},headers:{type:Object,default:()=>({})},requestType:{type:String,default:"PUT"}},data:()=>({ocDropzone_options:{url:"#",clickable:!1,autoQueue:!1}}),computed:{...e.mapGetters$1("Files",["dropzone"])},methods:{...e.mapActions$1("Files",["dragOver"]),$_ocDropzone_dragEnd(){this.dragOver(!1)},$_ocDropzone_removeFiles(e){this.$refs.ocDropzone.removeFile(e)}}};var le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.dropzone?i("vue-dropzone",{ref:"ocDropzone",staticClass:"oc-dropzone",attrs:{id:"oc-dropzone",options:e.ocDropzone_options,"use-custom-slot":!0,"include-styling":!1},on:{"vdropzone-drop":e.$_ocUpload_addDropToQue,"vdropzone-files-added":e.$_ocDropzone_dragEnd,"vdropzone-file-added":e.$_ocDropzone_removeFiles,"vdropzone-drag-leave":e.$_ocDropzone_dragEnd}},[i("oc-dropzone",[i("translate",[e._v("\n      Drag and drop to upload content into current folder\n    ")])],1)],1):e._e()};le._withStripped=!0;const ce=e.normalizeComponent({render:le,staticRenderFns:[]},undefined,ne,undefined,false,undefined,!1,void 0,void 0,void 0);const de={mixins:[s],props:{path:{type:String,required:!0},headers:{type:Object,default:()=>({})},additionalData:{type:Object,default:()=>({})},requestType:{type:String,default:"PUT"}},methods:{triggerUpload(){this.$refs.input.click()}}};var ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("oc-button",{staticClass:"uk-width-1-1",attrs:{"justify-content":"left",appearance:"raw"},on:{click:e.triggerUpload}},[i("oc-icon",{attrs:{name:"file_upload"}}),e._v(" "),i("span",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{id:"files-file-upload-button"}},[e._v("Upload File")])],1),e._v(" "),i("input",{ref:"input",attrs:{id:"fileUploadInput",type:"file","aria-labelledby":"files-file-upload-button",name:"file",multiple:"",tabindex:"-1"},on:{change:e.$_ocUpload_addFileToQue}})],1)};ue._withStripped=!0;const he=e.normalizeComponent({render:ue,staticRenderFns:[]},undefined,de,"data-v-68549851",false,undefined,!1,void 0,void 0,void 0);const pe={mixins:[s],props:{rootPath:{type:String,required:!0},path:{type:String,required:!0},headers:{type:Object,default:()=>({})},additionalData:{type:Object,default:()=>({})},requestType:{type:String,default:"PUT"}},methods:{triggerUpload(){this.$refs.input.click()}}};var me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("oc-button",{staticClass:"uk-width-1-1",attrs:{"justify-content":"left",appearance:"raw"},on:{click:e.triggerUpload}},[i("oc-icon",{attrs:{name:"cloud_upload"}}),e._v(" "),i("span",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{id:"files-folder-upload-button"}},[e._v("Upload Folder")])],1),e._v(" "),i("input",{ref:"input",attrs:{id:"folderUploadInput",type:"file",name:"folder","aria-labelledby":"files-folder-upload-button",webkitdirectory:"",mozdirectory:"",allowdirs:"",tabindex:"-1"},on:{change:e.$_ocUpload_addDirectoryToQue}})],1)};me._withStripped=!0;const fe=e.normalizeComponent({render:me,staticRenderFns:[]},undefined,pe,"data-v-ad632752",false,undefined,!1,void 0,void 0,void 0);var ge={methods:{getResourceSize(t){if(t<0)return"";if(isNaN(t))return"?";return e.filesize_min(t,{round:t<1048576?0:1})}}};const ve={mixins:[ge],computed:{...e.mapGetters$1("Files",["selectedFiles"]),selectedResourcesAmount(){return this.selectedFiles.length},selectedResourcesSize(){const e=V(this.selectedFiles);let t=0;for(const i of e)t+=parseInt(i.size,10);return this.getResourceSize(t)},clearSelectionLabel(){return this.$gettext("Clear selection")}},methods:{...e.mapMutations("Files",["RESET_SELECTION"])}};var be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-flex uk-flex-middle"},["?"!==e.selectedResourcesSize?i("translate",{key:"multiple-select-info",attrs:{"translate-n":e.selectedResourcesAmount,"translate-params":{amount:e.selectedResourcesAmount,size:e.selectedResourcesSize},"translate-plural":"%{ amount } selected items - %{ size }","translate-comment":"Number of selected resources and their size displayed above the files list"}},[e._v("%{ amount } selected item - %{ size }\n  ")]):i("translate",{key:"multiple-select-info-with-size",attrs:{"translate-n":e.selectedResourcesAmount,"translate-params":{amount:e.selectedResourcesAmount},"translate-plural":"%{ amount } selected items","translate-comment":"Number of selected resources displayed above the files list"}},[e._v("%{ amount } selected item\n  ")]),e._v(" "),i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.clearSelectionLabel,expression:"clearSelectionLabel"}],staticClass:"oc-ml oc-mr-xs",attrs:{"aria-label":e.clearSelectionLabel},on:{click:e.RESET_SELECTION}},[i("oc-icon",{attrs:{name:"close"}})],1)],1)};be._withStripped=!0;const _e=e.normalizeComponent({render:be,staticRenderFns:[]},undefined,ve,undefined,false,undefined,!1,void 0,void 0,void 0);const we={computed:{...e.mapState("Files",["areHiddenFilesShown","filesPageLimit"]),viewButtonAriaLabel(){return this.$gettext("Display customization options of the files list")},hiddenFilesShownModel:{get(){return this.areHiddenFilesShown},set(e){this.SET_HIDDEN_FILES_VISIBILITY(e)}},pageItemsLimit:{get(){return this.filesPageLimit},set(e){this.updateQuery(e)}}},watch:{$route:{handler(e){Object.prototype.hasOwnProperty.call(e.query,"items-limit")?this.SET_FILES_PAGE_LIMIT(e.query["items-limit"]):this.updateQuery()},immediate:!0}},methods:{...e.mapMutations("Files",["SET_HIDDEN_FILES_VISIBILITY","SET_FILES_PAGE_LIMIT"]),updateQuery(e=this.pageItemsLimit){const t={...this.$route.query,"items-limit":e};this.SET_FILES_PAGE_LIMIT(e),this.$router.replace({query:t}).catch((()=>{}))}}};var Ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("oc-button",{key:"files-view-options-btn",attrs:{id:"files-view-options-btn","data-testid":"files-view-options-btn","aria-label":e.viewButtonAriaLabel,variation:"passive",appearance:"raw",size:"small","gap-size":"xsmall"}},[i("oc-icon",{attrs:{name:"tune",size:"small"}}),e._v(" "),i("translate",[e._v("View")])],1),e._v(" "),i("oc-drop",{staticClass:"uk-width-auto",attrs:{"drop-id":"files-view-options-drop",toggle:"#files-view-options-btn",mode:"click"}},[i("oc-list",[i("li",{staticClass:"files-view-options-list-item"},[i("oc-switch",{attrs:{"data-testid":"files-switch-hidden-files",label:e.$gettext("Show hidden files")},model:{value:e.hiddenFilesShownModel,callback:function(t){e.hiddenFilesShownModel=t},expression:"hiddenFilesShownModel"}})],1),e._v(" "),i("li",{staticClass:"files-view-options-list-item"},[i("oc-page-size",{staticClass:"files-pagination-size",attrs:{"data-testid":"files-pagination-size",label:e.$gettext("Items per page"),options:[100,500,1e3,e.$gettext("All")]},model:{value:e.pageItemsLimit,callback:function(t){e.pageItemsLimit=t},expression:"pageItemsLimit"}})],1)])],1)],1)};Ee._withStripped=!0;const ke={components:{BatchActions:ae,FileDrop:ce,FileUpload:he,FolderUpload:fe,SizeInfo:_e,ViewOptions:e.normalizeComponent({render:Ee,staticRenderFns:[]},undefined,we,"data-v-3e9e6e26",false,undefined,!1,void 0,void 0,void 0)},mixins:[s,ie,r,se],data:()=>({newFileAction:null,path:"",fileFolderCreationLoading:!1}),computed:{...e.mapGetters$1(["getToken","configuration","newFileHandlers","quota","user"]),...e.mapGetters$1("Files",["activeFiles","inProgress","currentFolder","davProperties","selectedFiles","publicLinkPassword"]),...e.mapState(["route"]),...e.mapState("Files",["areHiddenFilesShown"]),newButtonTooltip(){return this.canUpload?this.hasFreeSpace?null:this.$gettext("You have not enough space left to upload!"):this.$gettext("You have no permission to upload!")},newButtonAriaLabel(){const e=this.newButtonTooltip;return e||this.$gettext("Add files or folders")},currentPath(){const e=this.$route.params.item||"";return e.endsWith("/")?e:e+"/"},currentPathSegments(){const t=this.currentPath.replace(/^\/+/,"").replace(/\/+$/,"");return e.isEmpty(t)?[]:t.split("/")},headers(){if(this.publicPage()){const t=this.publicLinkPassword;return t?{Authorization:"Basic "+e.Buffer.from("public:"+t).toString("base64")}:{}}return{Authorization:"Bearer "+this.getToken}},canUpload(){return null!==this.currentFolder&&this.currentFolder.canUpload()},showActions(){return!0!==this.$route.meta.hideFilelistActions},showBreadcrumb(){return this.isPublicFilesRoute||this.isPersonalRoute},pageTitle(){const e=this.$route.meta.title;return this.$gettext(e)},breadcrumbs(){const t=this.currentPathSegments,i=[];let s;const r=[];this.isPersonalRoute?(s="/files/list/all/",r.push("/"),i.push({text:this.$gettext("All files"),to:s+encodeURIComponent(e.pathUtil.join(...r))})):(s="/files/public/list/",r.push(t.splice(0,1)[0]),i.push({text:this.$gettext("Public link"),to:s+encodeURIComponent(e.pathUtil.join(...r))}));for(let o=0;o<t.length;o++){r.push(t[o]);const a=s+encodeURIComponent(e.pathUtil.join(...r));i.push({text:t[o],to:o+1===t.length?null:a})}return i},hasFreeSpace(){return!this.quota||this.quota.free>0||this.currentFolder&&this.currentFolder.permissions&&this.currentFolder.permissions.indexOf("M")>=0||this.publicPage()},areDefaultActionsVisible(){return this.selectedFiles.length<1},isNewBtnDisabled(){return!this.canUpload||!this.hasFreeSpace},selectedResourcesAnnouncement(){if(0===this.selectedFiles.length)return this.$gettext("No items selected.");const e=this.$ngettext("%{ amount } item selected. Actions are available above the table.","%{ amount } items selected. Actions are available above the table.",this.selectedFiles.length);return this.$gettextInterpolate(e,{amount:this.selectedFiles.length})}},created(){const e="true"===(window.localStorage.getItem("oc_hiddenFilesShown")||"true");e!==this.areHiddenFilesShown&&this.SET_HIDDEN_FILES_VISIBILITY(e)},methods:{...e.mapActions$1("Files",["updateFileProgress","removeFilesFromTrashbin","loadIndicators"]),...e.mapActions$1(["openFile","showMessage","createModal","setModalInputErrorMessage"]),...e.mapMutations("Files",["UPSERT_RESOURCE","SET_HIDDEN_FILES_VISIBILITY"]),...e.mapMutations(["SET_QUOTA"]),showCreateResourceModal(e=!0,t="txt",i=null){const s=e?this.$gettext("New folder"):this.$gettext("New file")+"."+t;e||(this.newFileAction=i);const r={variation:"passive",title:e?this.$gettext("Create a new folder"):this.$gettext("Create a new file"),cancelText:this.$gettext("Cancel"),confirmText:this.$gettext("Create"),hasInput:!0,inputValue:s,inputLabel:e?this.$gettext("Folder name"):this.$gettext("File name"),inputError:e?this.checkNewFolderName(s):this.checkNewFileName(s),onCancel:this.hideModal,onConfirm:e?this.addNewFolder:this.addNewFile,onInput:t=>{this.setModalInputErrorMessage(e?this.checkNewFolderName(t):this.checkNewFileName(t))}};this.createModal(r)},async addNewFolder(t){if(""!==t){this.fileFolderCreationLoading=!0;try{const i=e.pathUtil.join(this.currentPath,t);let s;this.isPersonalRoute?(await this.$client.files.createFolder(i),s=await this.$client.files.fileInfo(i,this.davProperties)):(await this.$client.publicFiles.createFolder(i,null,this.publicLinkPassword),s=await this.$client.publicFiles.getFileInfo(i,this.publicLinkPassword,this.davProperties)),s=A(s),this.UPSERT_RESOURCE(s),this.hideModal(),this.isPersonalRoute&&this.loadIndicators({client:this.$client,currentFolder:this.currentFolder.path}),setTimeout((()=>{this.setHighlightedFile(s),this.scrollToResource(s)}))}catch(e){this.showMessage({title:this.$gettext("Creating folder failed…"),desc:e,status:"danger"})}this.fileFolderCreationLoading=!1}},checkNewFolderName(e){if(""===e)return this.$gettext("Folder name cannot be empty");if(/[/]/.test(e))return this.$gettext('Folder name cannot contain "/"');if("."===e)return this.$gettext('Folder name cannot be equal to "."');if(".."===e)return this.$gettext('Folder name cannot be equal to ".."');if(/\s+$/.test(e))return this.$gettext("Folder name cannot end with whitespace");if(this.activeFiles.find((t=>t.name===e))){const t=this.$gettext("%{name} already exists");return this.$gettextInterpolate(t,{name:e},!0)}return null},async addNewFile(t){if(""!==t){this.fileFolderCreationLoading=!0;try{const i=e.pathUtil.join(this.currentPath,t);let s;if(this.isPersonalRoute?(await this.$client.files.putFileContents(i,""),s=await this.$client.files.fileInfo(i,this.davProperties)):(await this.$client.publicFiles.putFileContents(i,null,this.publicLinkPassword,""),s=await this.$client.publicFiles.getFileInfo(i,this.publicLinkPassword,this.davProperties)),this.newFileAction){const e=s.fileInfo["{http://owncloud.org/ns}fileid"];return this.$_fileActions_openEditor(this.newFileAction,i,e,"create"),void this.hideModal()}s=A(s),this.UPSERT_RESOURCE(s),this.hideModal(),this.isPersonalRoute&&this.loadIndicators({client:this.$client,currentFolder:this.currentFolder.path}),setTimeout((()=>{this.setHighlightedFile(s),this.scrollToResource(s)}))}catch(e){this.showMessage({title:this.$gettext("Creating file failed…"),desc:e,status:"danger"})}this.fileFolderCreationLoading=!1}},checkNewFileName(e){if(""===e)return this.$gettext("File name cannot be empty");if(/[/]/.test(e))return this.$gettext('File name cannot contain "/"');if("."===e)return this.$gettext('File name cannot be equal to "."');if(".."===e)return this.$gettext('File name cannot be equal to ".."');if(/\s+$/.test(e))return this.$gettext("File name cannot end with whitespace");if(this.activeFiles.find((t=>t.name===e))){const t=this.$gettext("%{name} already exists");return this.$gettextInterpolate(t,{name:e},!0)}return null},async onFileSuccess(t,i){try{i.name&&(i=i.name),await this.$nextTick();const t=e.pathUtil.join(this.currentPath,i);let s=this.isPersonalRoute?await this.$client.files.fileInfo(t,this.davProperties):await this.$client.publicFiles.getFileInfo(t,this.publicLinkPassword,this.davProperties);s=A(s),this.UPSERT_RESOURCE(s),this.isPersonalRoute&&this.loadIndicators({client:this.$client,currentFolder:this.currentFolder.path,encodePath:this.encodePath});const r=await this.$client.users.getUser(this.user.id);this.SET_QUOTA(r.quota)}catch(e){console.error(e)}},onFileError(e){this.showMessage({title:this.$gettext("File upload failed…"),desc:e.message,status:"danger"})},onFileProgress(e){this.updateFileProgress(e)}}};var Ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"files-app-bar"},[i("oc-hidden-announcer",{attrs:{announcement:e.selectedResourcesAnnouncement,level:"polite"}}),e._v(" "),!e.isIE11()&&e.canUpload&&e.hasFreeSpace?i("file-drop",{attrs:{"root-path":e.currentPath,path:e.currentPath,headers:e.headers},on:{success:e.onFileSuccess,error:e.onFileError,progress:e.onFileProgress}}):e._e(),e._v(" "),i("div",{staticClass:"files-topbar oc-py-s"},[e.showBreadcrumb?i("oc-breadcrumb",{staticClass:"oc-p-s",attrs:{id:"files-breadcrumb",items:e.breadcrumbs}}):e._e(),e._v(" "),i("h1",{staticClass:"oc-invisible-sr",domProps:{textContent:e._s(e.pageTitle)}}),e._v(" "),i("div",{staticClass:"files-app-bar-actions"},[e.showActions||e.selectedFiles.length>0||e.isTrashbinRoute?i("div",{staticClass:"uk-flex-1 uk-flex uk-flex-start"},[e.showActions&&e.areDefaultActionsVisible?[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.newButtonTooltip,expression:"newButtonTooltip"}],key:"new-file-menu-btn-enabled",attrs:{id:"new-file-menu-btn","aria-label":e.newButtonAriaLabel,variation:"primary",appearance:"filled",disabled:e.isNewBtnDisabled}},[i("oc-icon",{attrs:{name:"add"}}),e._v(" "),i("translate",[e._v("New")])],1),e._v(" "),i("oc-drop",{attrs:{"drop-id":"new-file-menu-drop",toggle:"#new-file-menu-btn",mode:"click","close-on-click":"",options:{delayHide:0}}},[i("ul",{staticClass:"uk-list"},[i("li",[i("file-upload",{attrs:{path:e.currentPath,headers:e.headers},on:{success:e.onFileSuccess,error:e.onFileError,progress:e.onFileProgress}})],1),e._v(" "),e.checkIfBrowserSupportsFolderUpload?i("li",[e.isIE11()?e._e():i("folder-upload",{attrs:{"root-path":e.currentPath,path:e.currentPath,headers:e.headers},on:{success:e.onFileSuccess,error:e.onFileError,progress:e.onFileProgress}})],1):e._e(),e._v(" "),i("li",[i("div",[i("oc-button",{staticClass:"uk-width-1-1",attrs:{id:"new-folder-btn",appearance:"raw","justify-content":"left"},on:{click:e.showCreateResourceModal}},[i("oc-icon",{attrs:{name:"create_new_folder"}}),e._v(" "),i("translate",[e._v("New folder…")])],1)],1)]),e._v(" "),e._l(e.newFileHandlers,(function(t,s){return i("li",{key:s},[i("div",[i("oc-button",{class:["new-file-btn-"+t.ext,"uk-width-1-1"],attrs:{appearance:"raw","justify-content":"left"},on:{click:function(i){return e.showCreateResourceModal(!1,t.ext,t.action)}}},[i("oc-icon",{attrs:{name:t.icon||"save"}}),e._v(" "),i("span",[e._v(e._s(t.menuTitle(e.$gettext)))])],1)],1)])}))],2)])]:e._e(),e._v(" "),e.selectedFiles.length>0?i("size-info",{staticClass:"oc-mr-s uk-visible@l"}):e._e(),e._v(" "),i("batch-actions")],2):e._e(),e._v(" "),i("view-options")],1)],1)],1)};Ce._withStripped=!0;const xe=e.normalizeComponent({render:Ce,staticRenderFns:[]},undefined,ke,"data-v-8b1d4ef4",false,undefined,!1,void 0,void 0,void 0);const Se={filters:{toInt:e=>parseInt(e)},mixins:[s,ge],props:{items:{type:Array,default:()=>[],required:!0}}};var ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"uk-list uk-list-divider oc-ml-rm oc-mr-rm"},e._l(e.items,(function(t){return i("li",{key:t.id},[i("div",{staticClass:"uk-flex uk-flex-middle"},[i("oc-icon",{staticClass:"oc-mr-s",attrs:{name:"file_copy"}}),e._v(" "),i("div",{staticClass:"uk-width-expand"},[i("div",{staticClass:"uk-flex"},[i("div",{staticClass:"oc-text-bold uk-width-expand uk-text-truncate"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"uk-width-auto uk-text-nowrap"},[e._v(e._s(e.getResourceSize(t.size)))])]),e._v(" "),i("div",{staticClass:"oc-m-rm uk-position-relative uk-width-expand"},[i("oc-progress",{staticClass:"uk-width-expand oc-m-rm",attrs:{"aria-hidden":!0,max:100,value:e._f("toInt")(t.progress)}}),e._v(" "),i("span",{staticClass:"uk-position-center oc-progress-text",attrs:{"aria-hidden":!0}},[e._v("\n            "+e._s(e._f("roundNumber")(t.progress))+" %\n          ")])],1)])],1)])})),0)};ye._withStripped=!0;const Fe={name:"UploadProgress",components:{DetailsWidget:e.normalizeComponent({render:ye,staticRenderFns:[]},undefined,Se,undefined,false,undefined,!1,void 0,void 0,void 0)},mixins:[s],data(){return{expanded:!1,announcement:"",announcementOnComplete:this.$gettext("Upload complete")}},computed:{...e.mapGetters$1("Files",["inProgress","uploaded"]),count(){return this.inProgress.length},totalUploadProgress(){let e=0,t=0;for(const i of this.inProgress)e+=i.size,t+=i.size*i.progress/100;for(const i of this.uploaded)e+=i.size,t+=i.size;return this.inProgress.length>0&&e>0?t/e*100:100},uploadPending(){return this.totalUploadProgress<100}},watch:{totalUploadProgress(e){100===e&&(this.expanded=!1,this.announcement=this.announcementOnComplete)}},created(){this.$root.$on("upload-start",(()=>{this.$nextTick((()=>{this.delayForScreenreader((()=>this.$refs.progressbar.$el.focus()))}))})),window.addEventListener("beforeunload",this.confirmUnload)},beforeDestroy(){window.removeEventListener("beforeunload",this.confirmUnload)},methods:{$_toggleExpanded(){this.expanded=!this.expanded},confirmUnload(e){this.uploadPending&&(e.preventDefault(),e.returnValue="")}}};var Re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"files-upload-progress uk-clearfix oc-py-rm"},[i("div",{staticClass:"oc-m-rm uk-position-relative uk-width-expand"},[i("oc-progress",{ref:"progressbar",staticClass:"uk-width-expand oc-m-rm",attrs:{"aria-hidden":!0,max:100,value:e.totalUploadProgress}}),e._v(" "),i("span",{staticClass:"uk-position-center oc-progress-text",attrs:{"aria-hidden":!0}},[e._v("\n      "+e._s(e._f("roundNumber")(e.totalUploadProgress))+" %\n    ")]),e._v(" "),i("oc-hidden-announcer",{attrs:{announcement:e.announcement,level:"assertive"}})],1),e._v(" "),i("oc-grid",{staticClass:"oc-mt-s oc-mb-s oc-text-muted oc-cursor-pointer",attrs:{flex:"","aria-label":e.$gettext("Click row to toggle upload progress details")},nativeOn:{click:function(t){return e.$_toggleExpanded.apply(null,arguments)}}},[i("oc-icon",{staticClass:"uk-width-auto",attrs:{name:e.expanded?"expand_less":"expand_more"}}),e._v(" "),i("div",{staticClass:"uk-width-expand uk-text-truncate"},[1===e.count?i("translate",{key:"upload-progress-single",attrs:{"translate-params":{fileName:e.inProgress[0].name},"translate-comment":"Upload progress when only uploading one file shows the name of the file."}},[e._v('\n        Uploading "%{ fileName }"\n      ')]):i("translate",{key:"upload-progress-multi",attrs:{"translate-n":e.count,"translate-plural":"Uploading %{ count } items","translate-comment":"Upload progress when uploading multiple files only shows the number of uploads."}},[e._v("\n        Uploading %{ count } item\n      ")])],1),e._v(" "),i("div",{staticClass:"uk-width-auto"},[e.expanded?i("translate",{key:"upload-progress-collapse-details",attrs:{"translate-comment":"Hide details panel of upload progress"}},[e._v("\n        Hide Details\n      ")]):i("translate",{key:"upload-progress-expand-details",attrs:{"translate-comment":"Show details panel of upload progress"}},[e._v("\n        Show Details\n      ")])],1)],1),e._v(" "),e.expanded?i("details-widget",{staticClass:"uk-width-expand oc-upload-details-scrollable",attrs:{items:e.inProgress}}):e._e()],1)};Re._withStripped=!0;const $e=e.normalizeComponent({render:Re,staticRenderFns:[]},undefined,Fe,"data-v-18f29bb2",false,undefined,!1,void 0,void 0,void 0);const Pe={mixins:[s,ge,r],computed:{...e.mapGetters$1(["fileSideBars","capabilities"]),...e.mapGetters$1("Files",["highlightedFile"]),...e.mapState("Files",["appSidebarExpandedAccordion"]),accordions(){return this.isTrashbinRoute?[this.fileSideBars.find((e=>"actions-item"===e.app))]:this.fileSideBars.filter((e=>e.enabled(this.capabilities,this.highlightedFile)))},isFavoritesEnabled(){return this.capabilities.files&&this.capabilities.files.favorites&&this.isContentDisplayed&&!this.isAnySharedWithRoute&&!this.isTrashbinRoute},expandedAccordionId(){return this.buildAppSidebarId(this.appSidebarExpandedAccordion)},modificationTime(){return this.isTrashbinRoute?this.formDateFromNow(this.highlightedFile.ddate,"RFC"):this.formDateFromNow(this.highlightedFile.mdate,"Http")},isShareAccepted(){return 0===this.highlightedFile.status},isContentDisplayed(){return!this.isSharedWithMeRoute||this.isShareAccepted},sidebarAccordionsWarningMessage(){return this.isShareAccepted?null:this.$gettext("Please, accept this share first to display available actions")},favoriteIconClass(){return this.highlightedFile.starred?"oc-star-shining":"oc-star-dimm"}},watch:{highlightedFile:function(){null===this.expandedAccordionId&&this.expandFirstAccordion(),this.$nextTick((()=>this.$emit("fileChanged",this,"fileChanged")))}},beforeDestroy(){this.SET_APP_SIDEBAR_EXPANDED_ACCORDION(null)},mounted(){null===this.expandedAccordionId&&this.expandFirstAccordion()},methods:{...e.mapActions$1("Files",["markFavorite"]),...e.mapMutations("Files",["SET_APP_SIDEBAR_EXPANDED_ACCORDION"]),close(){this.$emit("reset")},toggleFileFavorite(e){this.markFavorite({client:this.$client,file:e})},buildAppSidebarId:e=>e?`app-sidebar-${e}`:null,expandAccordion(e){this.SET_APP_SIDEBAR_EXPANDED_ACCORDION(e?e.replace("app-sidebar-",""):null)},expandFirstAccordion(){const e=this.accordions[0];this.SET_APP_SIDEBAR_EXPANDED_ACCORDION(e.app)},onClickOutside(e){(document.querySelector(".files-topbar").contains(e.target)||document.querySelector(".oc-topbar").contains(e.target)||document.querySelector(".oc-app-navigation").contains(e.target)||"files-view"===e.target.id)&&this.close()}}};var Te=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("oc-app-side-bar",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],key:e.highlightedFile.id,staticClass:"files-sidebar oc-px-s oc-border-l",attrs:{"disable-action":!1,"close-button-label":e.$gettext("Close file sidebar")},on:{close:function(t){return e.close()}}},[e.highlightedFile?i("template",{slot:"title"},[i("div",{staticClass:"uk-inline"},[i("oc-icon",{attrs:{name:e.highlightedFile.icon,size:"xlarge"}})],1),e._v(" "),i("div",{staticClass:"uk-inline"},[i("div",{staticClass:"uk-flex uk-flex-middle"},[i("h2",{staticClass:"oc-text-initial oc-mr-s oc-text-bold uk-margin-remove",attrs:{id:"files-sidebar-item-name",tabindex:"-1"},domProps:{textContent:e._s(e.highlightedFile.name)}})]),e._v(" "),i("div",{staticClass:"uk-flex uk-flex-middle"},[!e.publicPage()&&e.isFavoritesEnabled?i("oc-button",{staticClass:"oc-mr-xs",attrs:{id:"files-sidebar-star-icon","aria-label":e.highlightedFile.starred?e.$gettext("Click to remove this file from your favorites"):e.$gettext("Click to mark this file as favorite"),appearance:"raw"},nativeOn:{click:function(t){return t.stopPropagation(),e.toggleFileFavorite(e.highlightedFile)}}},[i("oc-icon",{class:e.favoriteIconClass,attrs:{name:"star"}})],1):e._e(),e._v(" "),e.highlightedFile.size>-1?[e._v("\n          "+e._s(e.getResourceSize(e.highlightedFile.size))+",\n        ")]:e._e(),e._v("\n        "+e._s(e.modificationTime)+"\n      ")],2)])]):e._e(),e._v(" "),i("template",{slot:"content"},[e.isContentDisplayed?i("oc-accordion",{key:"sidebar-accordions",staticClass:"oc-mt-m",attrs:{"expand-first":!0,"expanded-id":e.expandedAccordionId,mode:"data"},on:{expand:e.expandAccordion,collapse:function(t){return e.expandAccordion(null)}}},e._l(e.accordions,(function(t){return i("oc-accordion-item",{key:t.app,attrs:{id:e.buildAppSidebarId(t.app),title:t.component.title(e.$gettext),icon:t.icon}},[i(t.component,{tag:"component",staticClass:"oc-px"})],1)})),1):i("p",{key:"sidebar-warning-message",staticClass:"oc-mt",domProps:{textContent:e._s(e.sidebarAccordionsWarningMessage)}})],1)],2)};Te._withStripped=!0;const Ae={components:{AppBar:xe,ProgressBar:$e,SideBar:e.normalizeComponent({render:Te,staticRenderFns:[]},undefined,Pe,undefined,false,undefined,!1,void 0,void 0,void 0)},mixins:[s,r,o],data:()=>({createFolder:!1,fileUploadName:"",fileUploadProgress:0,upload:!1,fileName:"",selected:[],breadcrumbs:[]}),computed:{...e.mapGetters$1("Files",["dropzone","highlightedFile","inProgress"]),_sidebarOpen(){return null!==this.highlightedFile},$_uploadProgressVisible(){return this.inProgress.length>0}},watch:{$route(){this.$_destroySideBar_hideDetails(),this.resetFileSelection()}},created(){this.$root.$on("upload-end",(()=>{this.delayForScreenreader((()=>this.$refs.filesListWrapper.focus()))}))},beforeDestroy(){this.SET_SIDEBAR_FOOTER_CONTENT_COMPONENT(null)},methods:{...e.mapActions$1("Files",["dragOver","resetFileSelection"]),...e.mapActions$1(["showMessage"]),...e.mapMutations("Files",["SET_APP_SIDEBAR_EXPANDED_ACCORDION"]),...e.mapMutations(["SET_SIDEBAR_FOOTER_CONTENT_COMPONENT"]),trace(){console.info("trace",arguments)},focusSideBar(e,t){this.focus({from:document.activeElement,to:this.$refs.filesSidebar?.$el,revert:"beforeDestroy"===t})},$_ocApp_dragOver(){this.dragOver(!0)}}};var Ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{staticClass:"uk-flex uk-height-1-1",attrs:{id:"files"}},[i("div",{ref:"filesListWrapper",staticClass:"files-list-wrapper uk-width-expand",class:{"uk-visible@m":e._sidebarOpen},attrs:{tabindex:"-1"},on:{dragover:e.$_ocApp_dragOver}},[i("app-bar",{attrs:{id:"files-app-bar"}}),e._v(" "),i("progress-bar",{directives:[{name:"show",rawName:"v-show",value:e.$_uploadProgressVisible,expression:"$_uploadProgressVisible"}],staticClass:"oc-p-s",attrs:{id:"files-upload-progress"}}),e._v(" "),i("router-view",{attrs:{id:"files-view"}})],1),e._v(" "),e._sidebarOpen?i("side-bar",{ref:"filesSidebar",staticClass:"uk-width-1-1 uk-width-1-2@m uk-width-1-3@xl",attrs:{id:"files-sidebar",tabindex:"-1"},on:{reset:e.$_destroySideBar_hideDetails,beforeDestroy:e.focusSideBar,mounted:e.focusSideBar,fileChanged:e.focusSideBar}}):e._e()],1)};Ie._withStripped=!0;const De=e.normalizeComponent({render:Ie,staticRenderFns:[]},undefined,Ae,"data-v-7e8419e4",false,undefined,!1,void 0,void 0,void 0);var Le,Oe={computed:{...e.mapGetters$1("Files",["activeFilesCount"])},methods:{accessibleBreadcrumb_focusAndAnnounceBreadcrumb(t){const i=e.last(document.getElementById("files-breadcrumb").children[0].children),s=i.lastChild;if(!s)return;const r=this.activeFilesCount.files+this.activeFilesCount.folders,o=this.$ngettext("This folder contains %{ itemCount } item.","This folder contains %{ itemCount } items.",r),a=this.activeFilesCount.folders>0||this.activeFilesCount.files>0?o:this.$gettext("This folder has no content.");document.querySelectorAll(".oc-breadcrumb-sr").forEach((e=>e.remove()));const n=document.createElement("p");n.className="oc-invisible-sr oc-breadcrumb-sr",n.innerHTML=a,i.append(n),t&&s.focus()}}},Ne={data:()=>({headerPosition:0}),methods:{adjustTableHeaderPosition(){this.$nextTick((()=>{const e=document.querySelector("#files-app-bar");this.headerPosition=e.getBoundingClientRect().height}))}}},Ue={methods:{...e.mapMutations("Files",["UPDATE_CURRENT_PAGE"]),$_filesListPagination_updateCurrentPage(){const e=this.$route.params.page||1;this.UPDATE_CURRENT_PAGE(e)}}},ze={methods:{...e.mapActions$1("Files",["setHighlightedFile"]),$_mountSideBar_showDetails(e){this.setHighlightedFile(e)}}};!function(e){e[e.enter=0]="enter",e[e.exit=1]="exit"}(Le||(Le={}));var Me=function(){function t(e,t,i){this.unobserver=e,this.threshold=t,this.onEnter=i.onEnter,this.onExit=i.onExit,this.observeEnter=!!i.onEnter,this.observeExit=!!i.onExit,this.onEnterCallCount=0,this.onExitCallCount=0}return t.prototype.request=function(t,i){var s=this,r={element:i,unobserve:function(){return s.unobserve(t,i)}};t===Le.enter&&this.observeEnter&&this.onEnter?(this.onEnterCallCount++,this.onEnter(e.__assign({callCount:this.onEnterCallCount},r))):this.state===Le.enter&&t===Le.exit&&this.observeExit&&this.onExit&&(this.onExitCallCount++,this.onExit(e.__assign({callCount:this.onExitCallCount},r))),this.state=t},t.prototype.unobserve=function(e,t){e===Le.enter?this.observeEnter=!1:e===Le.exit&&(this.observeExit=!1),this.observeEnter||this.observeExit||this.unobserver(t)},t}(),Ge=function(){function e(e){void 0===e&&(e={}),this.options={root:e.root,rootMargin:e.rootMargin,threshold:e.threshold||0},this.targets=new WeakMap,this.intersectionObserver=new IntersectionObserver(this.trigger.bind(this),this.options)}return e.prototype.observe=function(e,t,i){void 0===t&&(t={}),(t.onEnter||t.onExit)&&(this.targets.set(e,new Me(this.unobserve.bind(this),i||this.options.threshold||0,{onEnter:t.onEnter,onExit:t.onExit})),this.intersectionObserver.observe(e))},e.prototype.unobserve=function(e){this.targets.delete(e),this.intersectionObserver.unobserve(e)},e.prototype.disconnect=function(){this.targets=new WeakMap,this.intersectionObserver.disconnect()},e.prototype.trigger=function(e){var t=this;e.forEach((function(e){var i=t.targets.get(e.target);i&&i.request(e.isIntersecting&&e.intersectionRatio>i.threshold?Le.enter:Le.exit,e.target)}))},e}(),Be=function(){function e(){}return e.Thumbnail=[36,36],e.Preview=[1200,1200],e.Avatar=64,e}(),He=function(){function e(){}return e.Thumbnail="thumbnail",e.Preview="preview",e.Avatar="avatar",e}();const Ve={name:"QuickActions",props:{actions:{type:Object,required:!0},item:{type:Object,required:!0}},computed:{filteredActions(){return e.filterObj(this.actions,((e,t)=>!0===t.displayed(this.item,this.$store)))}}};var qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-flex"},e._l(e.filteredActions,(function(t){return i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.$gettext(t.label),expression:"$gettext(action.label)"}],key:t.label,staticClass:"oc-mr-xs",class:"files-quick-action-"+t.id,attrs:{"aria-label":e.$gettext(t.label),appearance:"raw"},on:{click:function(i){return i.stopPropagation(),t.handler({item:e.item,client:e.$client,store:e.$store})}}},[i("oc-icon",{staticClass:"uk-flex",attrs:{name:t.icon}})],1)})),1)};qe._withStripped=!0;const je=e.normalizeComponent({render:qe,staticRenderFns:[]},undefined,Ve,undefined,false,undefined,!1,void 0,void 0,void 0);var We=function(e,t){var i=t._c;return i("div",{staticClass:"uk-flex uk-flex-middle uk-flex-center uk-height-1-1"},[i("oc-spinner",{attrs:{id:"files-list-progress",size:"large","aria-hidden":!0,"aria-label":""}})],1)};We._withStripped=!0;const Ye=e.normalizeComponent({render:We,staticRenderFns:[]},undefined,{},undefined,true,undefined,!1,void 0,void 0,void 0);const Xe={name:"NoContentMessage",props:{icon:{type:String,required:!0}}};var Qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-height-1-1 uk-flex uk-flex-column uk-flex-center uk-flex-middle uk-text-center"},[i("oc-icon",{attrs:{name:e.icon,type:"div",size:"xxlarge"}}),e._v(" "),i("div",{staticClass:"oc-text-muted uk-text-large"},[e._t("message")],2),e._v(" "),i("div",{staticClass:"oc-text-muted"},[e._t("callToAction")],2)],1)};Qe._withStripped=!0;const Ke=e.normalizeComponent({render:Qe,staticRenderFns:[]},undefined,Xe,undefined,false,undefined,!1,void 0,void 0,void 0);const Ze={name:"NotFoundMessage",mixins:[r],computed:{...e.mapGetters$1(["homeFolder","configuration"]),showHomeButton(){return this.isPersonalRoute},homeRoute(){return{name:"files-personal",params:{item:this.homeFolder}}},showPublicLinkButton(){return this.isPublicFilesRoute},publicLinkRoute(){return{name:"files-public-list",params:{item:this.$route.params.item.replace(/^\/+/,"").split("/")[0]}}}}};var Je=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-text-center uk-flex-middle uk-flex uk-flex-center uk-flex-column",attrs:{id:"files-list-not-found-message"}},[i("oc-icon",{attrs:{name:"cloud",type:"div",size:"xxlarge"}}),e._v(" "),i("div",{staticClass:"oc-text-muted uk-text-large"},[i("translate",[e._v("Resource not found")])],1),e._v(" "),i("div",{staticClass:"oc-text-muted"},[i("translate",[e._v("\n      We went looking everywhere, but were unable to find the selected resource.\n    ")])],1),e._v(" "),i("div",{staticClass:"oc-mt-s"},[e.showHomeButton?i("oc-button",{attrs:{id:"files-list-not-found-button-go-home",type:"router-link",appearance:"raw",to:e.homeRoute}},[i("translate",[e._v("Go to »All files«")])],1):e._e(),e._v(" "),e.showPublicLinkButton?i("oc-button",{attrs:{id:"files-list-not-found-button-reload-link",type:"router-link",appearance:"raw",to:e.publicLinkRoute}},[i("translate",[e._v("Reload public link")])],1):e._e()],1)],1)};Je._withStripped=!0;const et=e.normalizeComponent({render:Je,staticRenderFns:[]},undefined,Ze,undefined,false,undefined,!1,void 0,void 0,void 0);const tt={props:{files:{type:Number,required:!0},folders:{type:Number,required:!0},size:{type:[String,Number],required:!1,default:null}},computed:{items(){return this.files+this.folders},text(){const t=this.$gettextInterpolate(this.$ngettext("%{ filesCount } file","%{ filesCount } files",this.files),{filesCount:this.files}),i=this.$gettextInterpolate(this.$ngettext("%{ foldersCount } folder","%{ foldersCount } folders",this.folders),{foldersCount:this.folders}),s=e.getResourceSize(this.size),r=this.size>0?this.$ngettext("%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr})","%{ itemsCount } items with %{ itemSize } in total (%{ filesStr}, %{foldersStr})",this.items):this.$ngettext("%{ itemsCount } item in total (%{ filesStr}, %{foldersStr})","%{ itemsCount } items in total (%{ filesStr}, %{foldersStr})",this.items);return this.$gettextInterpolate(r,{itemsCount:this.items,itemSize:s,filesStr:t,foldersStr:i})}}};var it=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-text-nowrap uk-text-center"},[i("p",{staticClass:"oc-text-muted",attrs:{"data-testid":"files-list-footer-info","data-test-items":e.items,"data-test-files":e.files,"data-test-folders":e.folders,"data-test-size":e.size}},[e._v("\n    "+e._s(e.text)+"\n  ")])])};it._withStripped=!0;const st=e.normalizeComponent({render:it,staticRenderFns:[]},undefined,tt,undefined,false,undefined,!1,void 0,void 0,void 0);const rt={computed:{...e.mapState("Files",["currentPage"]),...e.mapGetters$1("Files",["pages"])}};var ot=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.pages>1?i("oc-pagination",{staticClass:"files-pagination uk-flex uk-flex-center oc-my-s",attrs:{pages:e.pages,"current-page":e.currentPage,"max-displayed":3,"current-route":e.$route}}):e._e()};ot._withStripped=!0;const at=e.normalizeComponent({render:ot,staticRenderFns:[]},undefined,rt,undefined,false,undefined,!1,void 0,void 0,void 0),nt=new Ge;const lt={components:{QuickActions:je,ListLoader:Ye,NoContentMessage:Ke,NotFoundMessage:et,ListInfo:st,Pagination:at},mixins:[Oe,ie,Ne,se,Ue,ze],data:()=>({loading:!0}),computed:{...e.mapState(["app"]),...e.mapState("Files",["files"]),...e.mapGetters$1("Files",["davProperties","highlightedFile","activeFiles","selectedFiles","inProgress","currentFolder","totalFilesCount","totalFilesSize"]),...e.mapGetters$1(["user","homeFolder","configuration"]),isSidebarOpen(){return null!==this.highlightedFile},isEmpty(){return this.activeFiles.length<1},uploadProgressVisible(){return this.inProgress.length>0},selected:{get(){return this.selectedFiles},set(e){this.SELECT_RESOURCES(e)}},folderNotFound(){return null===this.currentFolder},targetRoute(){return{name:this.$route.name}},displayThumbnails(){return!this.configuration.options.disablePreviews}},watch:{$route:{handler:function(t,i){if(e.isNil(this.$route.params.item))return void this.$router.push({name:"files-personal",params:{item:this.homeFolder}});this.$_filesListPagination_updateCurrentPage();const s=t.name===i?.name,r=t.params?.item===i?.params?.item;s&&r||this.loadResources(s)},immediate:!0},uploadProgressVisible(){this.adjustTableHeaderPosition()}},created(){window.onresize=this.adjustTableHeaderPosition},mounted(){this.adjustTableHeaderPosition()},beforeDestroy(){nt.disconnect()},methods:{...e.mapActions$1("Files",["loadIndicators","loadPreview"]),...e.mapMutations("Files",["SELECT_RESOURCES","SET_CURRENT_FOLDER","LOAD_FILES","CLEAR_CURRENT_FILES_LIST"]),...e.mapMutations(["SET_QUOTA"]),rowMounted(t,i){if(!this.displayThumbnails)return;const s=e.debounce((({unobserve:e})=>{e(),this.loadPreview({resource:t,isPublic:!1,dimensions:Be.Thumbnail,type:He.Thumbnail})}),250);nt.observe(i.$el,{onEnter:s,onExit:s.cancel})},async loadResources(e){this.loading=!0,this.CLEAR_CURRENT_FILES_LIST();try{let e=await this.$client.files.list(this.$route.params.item,1,this.davProperties);e=e.map(A),this.LOAD_FILES({currentFolder:e[0],files:e.slice(1)}),this.loadIndicators({client:this.$client,currentFolder:this.$route.params.item});const t=await this.$client.users.getUser(this.user.id);this.SET_QUOTA(t.quota)}catch(e){this.SET_CURRENT_FOLDER(null),console.error(e)}this.adjustTableHeaderPosition(),this.loading=!1,this.accessibleBreadcrumb_focusAndAnnounceBreadcrumb(e),this.scrollToResourceFromRoute()},scrollToResourceFromRoute(){const e=this.$route.query.scrollTo;e&&this.activeFiles.length>0&&this.$nextTick((()=>{const t=this.activeFiles.find((t=>t.name===e));t&&(this.$_mountSideBar_showDetails(t),this.scrollToResource(t))}))}}};var ct=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.loading?i("list-loader"):[e.folderNotFound?i("not-found-message",{staticClass:"files-not-found uk-height-1-1"}):e.isEmpty?i("no-content-message",{staticClass:"files-empty",attrs:{id:"files-personal-empty",icon:"folder"},scopedSlots:e._u([{key:"message",fn:function(){return[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("There are no resources in this folder")])]},proxy:!0},{key:"callToAction",fn:function(){return[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v('Drag files and folders here or use the "+ New" button to upload')])]},proxy:!0}])}):i("oc-table-files",{staticClass:"files-table",class:{"files-table-squashed":e.isSidebarOpen},attrs:{id:"files-personal-table","are-thumbnails-displayed":e.displayThumbnails,resources:e.activeFiles,"target-route":e.targetRoute,highlighted:e.highlightedFile?e.highlightedFile.id:null,"header-position":e.headerPosition},on:{showDetails:e.$_mountSideBar_showDetails,fileClick:e.$_fileActions_triggerDefaultAction,rowMounted:e.rowMounted},scopedSlots:e._u([{key:"quickActions",fn:function(t){var s=t.resource;return[i("quick-actions",{staticClass:"oc-visible@s",class:s.preview,attrs:{item:s,actions:e.app.quickActions}})]}},{key:"footer",fn:function(){return[i("pagination"),e._v(" "),e.activeFiles.length>0?i("list-info",{staticClass:"uk-width-1-1 oc-my-s",attrs:{files:e.totalFilesCount.files,folders:e.totalFilesCount.folders,size:e.totalFilesSize}}):e._e()]},proxy:!0}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})]],2)};ct._withStripped=!0;const dt=e.normalizeComponent({render:ct,staticRenderFns:[]},undefined,lt,undefined,false,undefined,!1,void 0,void 0,void 0),ut=new Ge;const ht={components:{QuickActions:je,ListLoader:Ye,NoContentMessage:Ke,ListInfo:st,Pagination:at},mixins:[ie,Ne,Ue,ze],data:()=>({loading:!0}),computed:{...e.mapState(["app"]),...e.mapState("Files",["files"]),...e.mapGetters$1("Files",["davProperties","highlightedFile","activeFiles","selectedFiles","inProgress","totalFilesCount","totalFilesSize"]),...e.mapGetters$1(["user","configuration"]),isSidebarOpen(){return null!==this.highlightedFile},targetRoute:()=>({name:"files-personal"}),selected:{get(){return this.selectedFiles},set(e){this.SELECT_RESOURCES(e)}},isEmpty(){return this.activeFiles.length<1},uploadProgressVisible(){return this.inProgress.length>0},displayThumbnails(){return!this.configuration.options.disablePreviews}},watch:{uploadProgressVisible(){this.adjustTableHeaderPosition()},$route:{handler:"$_filesListPagination_updateCurrentPage",immediate:!0}},created(){this.loadResources(),window.onresize=this.adjustTableHeaderPosition},mounted(){this.adjustTableHeaderPosition()},beforeDestroy(){ut.disconnect()},methods:{...e.mapActions$1("Files",["loadIndicators","loadPreview"]),...e.mapMutations("Files",["SELECT_RESOURCES","LOAD_FILES","CLEAR_CURRENT_FILES_LIST"]),...e.mapMutations(["SET_QUOTA"]),rowMounted(t,i){if(!this.displayThumbnails)return;const s=e.debounce((({unobserve:e})=>{e(),this.loadPreview({resource:t,isPublic:!1,dimensions:Be.Thumbnail,type:He.Thumbnail})}),250);ut.observe(i.$el,{onEnter:s,onExit:s.cancel})},async loadResources(){this.loading=!0,this.CLEAR_CURRENT_FILES_LIST();let e=await this.$client.files.getFavoriteFiles(this.davProperties);e=e.map(A),this.LOAD_FILES({currentFolder:null,files:e}),this.loadIndicators({client:this.$client,currentFolder:"/"});const t=await this.$client.users.getUser(this.user.id);this.SET_QUOTA(t.quota),this.loading=!1}}};var pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.loading?i("list-loader"):[e.isEmpty?i("no-content-message",{staticClass:"files-empty",attrs:{id:"files-favorites-empty",icon:"star"},scopedSlots:e._u([{key:"message",fn:function(){return[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("There are no resources marked as favorite")])]},proxy:!0}],null,!1,2464274424)}):i("oc-table-files",{staticClass:"files-table",class:{"files-table-squashed":e.isSidebarOpen},attrs:{id:"files-favorites-table","are-paths-displayed":!0,"are-thumbnails-displayed":e.displayThumbnails,resources:e.activeFiles,"target-route":e.targetRoute,highlighted:e.highlightedFile?e.highlightedFile.id:null,"header-position":e.headerPosition},on:{showDetails:e.$_mountSideBar_showDetails,fileClick:e.$_fileActions_triggerDefaultAction,rowMounted:e.rowMounted},scopedSlots:e._u([{key:"quickActions",fn:function(t){return[i("quick-actions",{staticClass:"oc-visible@s",attrs:{item:t.resource,actions:e.app.quickActions}})]}},{key:"footer",fn:function(){return[i("pagination"),e._v(" "),e.activeFiles.length>0?i("list-info",{staticClass:"uk-width-1-1 oc-my-s",attrs:{files:e.totalFilesCount.files,folders:e.totalFilesCount.folders,size:e.totalFilesSize}}):e._e()]},proxy:!0}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})]],2)};pt._withStripped=!0;const mt=e.normalizeComponent({render:pt,staticRenderFns:[]},undefined,ht,undefined,false,undefined,!1,void 0,void 0,void 0),ft=new Ge;const gt={components:{ListLoader:Ye,NoContentMessage:Ke,ListInfo:st,Pagination:at},mixins:[ie,G,H,Ne,Ue,ze],data:()=>({loading:!0,shareStatus:z}),computed:{...e.mapState(["app"]),...e.mapState("Files",["files"]),...e.mapGetters$1("Files",["davProperties","highlightedFile","activeFiles","selectedFiles","inProgress","totalFilesCount"]),...e.mapGetters$1(["isOcis","configuration","getToken","user"]),selected:{get(){return this.selectedFiles},set(e){this.SELECT_RESOURCES(e)}},isEmpty(){return this.activeFiles.length<1},isSidebarOpen(){return null!==this.highlightedFile},uploadProgressVisible(){return this.inProgress.length>0},targetRoute:()=>({name:"files-personal"}),displayThumbnails(){return!this.configuration.options.disablePreviews}},watch:{uploadProgressVisible(){this.adjustTableHeaderPosition()},$route:{handler:"$_filesListPagination_updateCurrentPage",immediate:!0}},created(){this.loadResources(),window.onresize=this.adjustTableHeaderPosition},mounted(){this.adjustTableHeaderPosition()},beforeDestroy(){ft.disconnect()},methods:{...e.mapActions$1("Files",["loadIndicators","loadPreview","loadAvatars"]),...e.mapActions$1(["showMessage"]),...e.mapMutations("Files",["LOAD_FILES","SELECT_RESOURCES","CLEAR_CURRENT_FILES_LIST","UPDATE_RESOURCE"]),...e.mapMutations(["SET_QUOTA"]),rowMounted(t,i){const s=e.debounce((({unobserve:e})=>{e(),this.loadAvatars({resource:t}),this.displayThumbnails&&this.loadPreview({resource:t,isPublic:!1,dimensions:Be.Thumbnail,type:He.Thumbnail})}),250);ft.observe(i.$el,{onEnter:s,onExit:s.cancel})},async loadResources(){this.loading=!0,this.CLEAR_CURRENT_FILES_LIST();let e=await this.$client.requests.ocs({service:"apps/files_sharing",action:"/api/v1/shares?format=json&shared_with_me=true&state=all&include_tags=false",method:"GET"});e=await e.json(),e=e.ocs.data,e.length&&(e=I(e,!0,!this.isOcis,this.configuration.server,this.getToken)),this.LOAD_FILES({currentFolder:null,files:e});const t=await this.$client.users.getUser(this.user.id);this.SET_QUOTA(t.quota),this.loading=!1},getShareStatusText(e){switch(e){case z.accepted:return this.$gettext("Accepted");case z.declined:return this.$gettext("Declined");case z.pending:default:return this.$gettext("Pending")}}}};var vt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.loading?i("list-loader"):[e.isEmpty?i("no-content-message",{staticClass:"files-empty",attrs:{id:"files-shared-with-me-empty",icon:"group"},scopedSlots:e._u([{key:"message",fn:function(){return[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n          You are currently not collaborating on other people's resources\n        ")])]},proxy:!0}],null,!1,2450961210)}):i("oc-table-files",{staticClass:"files-table",class:{"files-table-squashed":e.isSidebarOpen},attrs:{id:"files-shared-with-me-table","are-thumbnails-displayed":e.displayThumbnails,resources:e.activeFiles,"target-route":e.targetRoute,highlighted:e.highlightedFile?e.highlightedFile.id:null,"header-position":e.headerPosition},on:{showDetails:e.$_mountSideBar_showDetails,fileClick:e.$_fileActions_triggerDefaultAction,rowMounted:e.rowMounted},scopedSlots:e._u([{key:"status",fn:function(t){var s=t.resource;return[i("div",{key:s.id+s.status,staticClass:"uk-text-nowrap uk-flex uk-flex-middle uk-flex-right"},[[e.shareStatus.pending,e.shareStatus.declined].includes(s.status)?i("oc-button",{staticClass:"file-row-share-status-action",attrs:{size:"small"},on:{click:function(t){return t.stopPropagation(),e.$_acceptShare_trigger(s)}}},[i("oc-icon",{attrs:{size:"small",name:"check"}}),e._v(" "),i("translate",[e._v("Accept")])],1):e._e(),e._v(" "),[e.shareStatus.pending,e.shareStatus.accepted].includes(s.status)?i("oc-button",{staticClass:"file-row-share-status-action oc-ml-s",attrs:{size:"small"},on:{click:function(t){return t.stopPropagation(),e.$_declineShare_trigger(s)}}},[i("oc-icon",{attrs:{size:"small",name:"not_interested"}}),e._v(" "),i("translate",[e._v("Decline")])],1):e._e(),e._v(" "),i("span",{staticClass:"uk-text-small oc-ml file-row-share-status-text uk-text-baseline",domProps:{textContent:e._s(e.getShareStatusText(s.status))}})],1)]}},{key:"footer",fn:function(){return[i("pagination"),e._v(" "),e.activeFiles.length>0?i("list-info",{staticClass:"uk-width-1-1 oc-my-s",attrs:{files:e.totalFilesCount.files,folders:e.totalFilesCount.folders}}):e._e()]},proxy:!0}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})]],2)};vt._withStripped=!0;const bt=e.normalizeComponent({render:vt,staticRenderFns:[]},undefined,gt,undefined,false,undefined,!1,void 0,void 0,void 0),_t=new Ge;const wt={components:{ListLoader:Ye,NoContentMessage:Ke,ListInfo:st,Pagination:at},mixins:[ie,Ne,ge,Ue,ze],data:()=>({loading:!0}),computed:{...e.mapState(["app"]),...e.mapState("Files",["files"]),...e.mapGetters$1("Files",["davProperties","highlightedFile","activeFiles","selectedFiles","inProgress","totalFilesCount"]),...e.mapGetters$1(["isOcis","configuration","getToken","user"]),selected:{get(){return this.selectedFiles},set(e){this.SELECT_RESOURCES(e)}},isEmpty(){return this.activeFiles.length<1},isSidebarOpen(){return null!==this.highlightedFile},uploadProgressVisible(){return this.inProgress.length>0},targetRoute:()=>({name:"files-personal"}),displayThumbnails(){return!this.configuration.options.disablePreviews}},watch:{uploadProgressVisible(){this.adjustTableHeaderPosition()},$route:{handler:"$_filesListPagination_updateCurrentPage",immediate:!0}},created(){this.loadResources(),window.onresize=this.adjustTableHeaderPosition},mounted(){this.adjustTableHeaderPosition()},beforeDestroy(){_t.disconnect()},methods:{...e.mapActions$1("Files",["loadIndicators","loadPreview","loadAvatars"]),...e.mapMutations("Files",["LOAD_FILES","SELECT_RESOURCES","CLEAR_CURRENT_FILES_LIST","UPDATE_RESOURCE"]),...e.mapMutations(["SET_QUOTA"]),rowMounted(t,i){const s=e.debounce((({unobserve:e})=>{e(),this.loadAvatars({resource:t}),this.displayThumbnails&&this.loadPreview({resource:t,isPublic:!1,dimensions:Be.Thumbnail,type:He.Thumbnail})}),250);_t.observe(i.$el,{onEnter:s,onExit:s.cancel})},async loadResources(){this.loading=!0,this.CLEAR_CURRENT_FILES_LIST();let e=await this.$client.requests.ocs({service:"apps/files_sharing",action:"/api/v1/shares?format=json&reshares=true&include_tags=false",method:"GET"});e=await e.json(),e=e.ocs.data,e.length&&(e=I(e,!1,!this.isOcis,this.configuration.server,this.getToken)),this.LOAD_FILES({currentFolder:null,files:e});const t=await this.$client.users.getUser(this.user.id);this.SET_QUOTA(t.quota),this.loading=!1},shareStatus(e){return 0===e?this.$gettext("Accepted"):1===e?this.$gettext("Pending"):2===e?this.$gettext("Declined"):void 0}}};var Et=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.loading?i("list-loader"):[e.isEmpty?i("no-content-message",{staticClass:"files-empty",attrs:{id:"files-shared-with-others-empty",icon:"group"},scopedSlots:e._u([{key:"message",fn:function(){return[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n          You are currently not collaborating on any of your resources with other people\n        ")])]},proxy:!0}],null,!1,1652169698)}):i("oc-table-files",{staticClass:"files-table",class:{"files-table-squashed":e.isSidebarOpen},attrs:{id:"files-shared-with-others-table","are-thumbnails-displayed":e.displayThumbnails,resources:e.activeFiles,"target-route":e.targetRoute,highlighted:e.highlightedFile?e.highlightedFile.id:null,"header-position":e.headerPosition},on:{showDetails:e.$_mountSideBar_showDetails,fileClick:e.$_fileActions_triggerDefaultAction,rowMounted:e.rowMounted},scopedSlots:e._u([{key:"footer",fn:function(){return[i("pagination"),e._v(" "),e.activeFiles.length>0?i("list-info",{staticClass:"uk-width-1-1 oc-my-s",attrs:{files:e.totalFilesCount.files,folders:e.totalFilesCount.folders}}):e._e()]},proxy:!0}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})]],2)};Et._withStripped=!0;const kt=e.normalizeComponent({render:Et,staticRenderFns:[]},undefined,wt,undefined,false,undefined,!1,void 0,void 0,void 0),Ct=new Ge;const xt={components:{ListLoader:Ye,NoContentMessage:Ke,ListInfo:st,Pagination:at},mixins:[ie,Ne,ge,Ue,ze],data:()=>({loading:!0}),computed:{...e.mapState(["app"]),...e.mapState("Files",["files"]),...e.mapGetters$1("Files",["davProperties","highlightedFile","activeFiles","selectedFiles","inProgress","totalFilesCount"]),...e.mapGetters$1(["isOcis","configuration","getToken","user"]),selected:{get(){return this.selectedFiles},set(e){this.SELECT_RESOURCES(e)}},isEmpty(){return this.activeFiles.length<1},isSidebarOpen(){return null!==this.highlightedFile},uploadProgressVisible(){return this.inProgress.length>0},targetRoute:()=>({name:"files-personal"}),displayThumbnails(){return!this.configuration.options.disablePreviews}},watch:{uploadProgressVisible(){this.adjustTableHeaderPosition()},$route:{handler:"$_filesListPagination_updateCurrentPage",immediate:!0}},created(){this.loadResources(),window.onresize=this.adjustTableHeaderPosition},mounted(){this.adjustTableHeaderPosition()},beforeDestroy(){Ct.disconnect()},methods:{...e.mapActions$1("Files",["loadIndicators","loadPreview"]),...e.mapMutations("Files",["LOAD_FILES","SELECT_RESOURCES","CLEAR_CURRENT_FILES_LIST"]),...e.mapMutations(["SET_QUOTA"]),rowMounted(t,i){if(!this.displayThumbnails)return;const s=e.debounce((({unobserve:e})=>{e(),this.loadPreview({resource:t,isPublic:!1,dimensions:Be.Thumbnail,type:He.Thumbnail})}),250);Ct.observe(i.$el,{onEnter:s,onExit:s.cancel})},async loadResources(){this.loading=!0,this.CLEAR_CURRENT_FILES_LIST();let e=await this.$client.requests.ocs({service:"apps/files_sharing",action:"/api/v1/shares?format=json&share_types=3&include_tags=false",method:"GET"});e=await e.json(),e=e.ocs.data,e.length&&(e=I(e,!1,!this.isOcis,this.configuration.server,this.getToken)),this.LOAD_FILES({currentFolder:null,files:e});const t=await this.$client.users.getUser(this.user.id);this.SET_QUOTA(t.quota),this.loading=!1}}};var St=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.loading?i("list-loader"):[e.isEmpty?i("no-content-message",{staticClass:"files-empty",attrs:{id:"files-shared-via-link-empty",icon:"group"},scopedSlots:e._u([{key:"message",fn:function(){return[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("There are no resources with a public link at the moment")])]},proxy:!0}],null,!1,2205227924)}):i("oc-table-files",{staticClass:"files-table",class:{"files-table-squashed":e.isSidebarOpen},attrs:{id:"files-shared-via-link-table","are-thumbnails-displayed":e.displayThumbnails,resources:e.activeFiles,"target-route":e.targetRoute,highlighted:e.highlightedFile?e.highlightedFile.id:null,"header-position":e.headerPosition},on:{showDetails:e.$_mountSideBar_showDetails,fileClick:e.$_fileActions_triggerDefaultAction,rowMounted:e.rowMounted},scopedSlots:e._u([{key:"footer",fn:function(){return[i("pagination"),e._v(" "),e.activeFiles.length>0?i("list-info",{staticClass:"uk-width-1-1 oc-my-s",attrs:{files:e.totalFilesCount.files,folders:e.totalFilesCount.folders}}):e._e()]},proxy:!0}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})]],2)};St._withStripped=!0;const yt=e.normalizeComponent({render:St,staticRenderFns:[]},undefined,xt,undefined,false,undefined,!1,void 0,void 0,void 0);const Ft={components:{ListLoader:Ye,NoContentMessage:Ke,ListInfo:st,Pagination:at},mixins:[Ne,ge,Ue,ze],data:()=>({loading:!0}),computed:{...e.mapState("Files",["files"]),...e.mapGetters$1("Files",["davProperties","highlightedFile","activeFiles","selectedFiles","inProgress","totalFilesCount"]),selected:{get(){return this.selectedFiles},set(e){this.SELECT_RESOURCES(e)}},isEmpty(){return this.activeFiles.length<1},isSidebarOpen(){return null!==this.highlightedFile},uploadProgressVisible(){return this.inProgress.length>0}},watch:{uploadProgressVisible(){this.adjustTableHeaderPosition()},$route:{handler:"$_filesListPagination_updateCurrentPage",immediate:!0}},created(){this.loadResources(),window.onresize=this.adjustTableHeaderPosition},mounted(){this.adjustTableHeaderPosition()},methods:{...e.mapMutations("Files",["LOAD_FILES","SELECT_RESOURCES","CLEAR_CURRENT_FILES_LIST"]),async loadResources(){this.loading=!0,this.CLEAR_CURRENT_FILES_LIST();const e=await this.$client.fileTrash.list("","1",["{http://owncloud.org/ns}trashbin-original-filename","{http://owncloud.org/ns}trashbin-original-location","{http://owncloud.org/ns}trashbin-delete-datetime","{DAV:}getcontentlength","{DAV:}resourcetype"]);this.LOAD_FILES({currentFolder:A(e[0]),files:e.slice(1).map(U)}),this.adjustTableHeaderPosition(),this.loading=!1}}};var Rt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.loading?i("list-loader"):[e.isEmpty?i("no-content-message",{staticClass:"files-empty",attrs:{id:"files-trashbin-empty",icon:"delete"},scopedSlots:e._u([{key:"message",fn:function(){return[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("You have no deleted files")])]},proxy:!0}],null,!1,2049851514)}):i("oc-table-files",{staticClass:"files-table",class:{"files-table-squashed":e.isSidebarOpen},attrs:{id:"files-trashbin-table","are-paths-displayed":!0,"are-thumbnails-displayed":!1,resources:e.activeFiles,highlighted:e.highlightedFile?e.highlightedFile.id:null,"are-resources-clickable":!1,"header-position":e.headerPosition},on:{showDetails:e.$_mountSideBar_showDetails},scopedSlots:e._u([{key:"footer",fn:function(){return[i("pagination"),e._v(" "),e.activeFiles.length>0?i("list-info",{staticClass:"uk-width-1-1 oc-my-s",attrs:{files:e.totalFilesCount.files,folders:e.totalFilesCount.folders}}):e._e()]},proxy:!0}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})]],2)};Rt._withStripped=!0;const $t=e.normalizeComponent({render:Rt,staticRenderFns:[]},undefined,Ft,undefined,false,undefined,!1,void 0,void 0,void 0);const Pt={data:()=>({loading:!0,errorMessage:null}),computed:{...e.mapGetters$1(["configuration"]),pageTitle(){return this.$gettext(this.$route.meta.title)},backgroundImg(){return this.configuration.theme.loginPage.backgroundImg},logoImg(){return this.configuration.theme.logo.login}},mounted(){this.loading=!0,this.$client.files.getPathForFileId(this.$route.params.fileId).then((e=>{const t=e.lastIndexOf("/"),i=e.substring(0,t).replace(/^(\/)/,""),s=e.substring(t+1);this.$router.push({name:"files-personal",params:{item:i||"/"},query:{scrollTo:s}})})).catch((e=>{this.errorMessage=e})).finally((()=>{this.loading=!1}))}};var Tt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-login",style:{backgroundImage:"url("+e.backgroundImg+")"},attrs:{"uk-height-viewport":""}},[i("h1",{staticClass:"oc-invisible-sr"},[e._v(e._s(e.pageTitle))]),e._v(" "),i("div",{staticClass:"oc-login-card uk-position-center"},[i("img",{staticClass:"oc-login-logo",attrs:{src:e.logoImg,alt:"","aria-hidden":!0}}),e._v(" "),e.loading?i("div",{staticClass:"oc-login-card-body"},[i("h2",{staticClass:"oc-login-card-title"},[i("translate",[e._v("Resolving private link…")])],1),e._v(" "),i("oc-spinner",{attrs:{"aria-hidden":!0}})],1):e._e(),e._v(" "),e.errorMessage?i("div",{staticClass:"oc-login-card-body"},[i("h2",{staticClass:"oc-login-card-title"},[i("translate",[e._v("An error occurred while resolving the private link")])],1),e._v(" "),i("span",[e._v(e._s(e.errorMessage))])]):e._e()])])};Tt._withStripped=!0;const At=e.normalizeComponent({render:Tt,staticRenderFns:[]},undefined,Pt,undefined,false,undefined,!1,void 0,void 0,void 0);const It={mixins:[s],data:()=>({loading:!0,errorMessage:null,firstTime:!0,passwordRequired:!1,password:null,inputErrorMessage:null}),computed:{...e.mapGetters$1(["configuration"]),...e.mapGetters$1("Files",["davProperties","publicLinkPassword"]),pageTitle(){return this.$gettext(this.$route.meta.title)},passwordFieldLabel(){return this.$gettext("Enter password for public link")},backgroundImg(){return this.configuration.theme.loginPage.backgroundImg},logoImg(){return this.configuration.theme.logo.login}},mounted(){this.resolvePublicLink()},methods:{...e.mapActions$1("Files",["setPublicLinkPassword"]),resolvePublicLink(){const e=this.password||this.publicLinkPassword;this.loading=!0,this.inputErrorMessage=null;const t=this.davProperties.concat([this.$client.publicFiles.PUBLIC_LINK_ITEM_TYPE,this.$client.publicFiles.PUBLIC_LINK_PERMISSION,this.$client.publicFiles.PUBLIC_LINK_EXPIRATION,this.$client.publicFiles.PUBLIC_LINK_SHARE_DATETIME,this.$client.publicFiles.PUBLIC_LINK_SHARE_OWNER]);this.$client.publicFiles.list(this.$route.params.token,e,t,"0").then((t=>{this.passwordRequired=!1,this.setPublicLinkPassword(e),"4"!==t[0].getProperty(this.$client.publicFiles.PUBLIC_LINK_PERMISSION)?this.$router.push({name:"files-public-list",params:{item:this.$route.params.token}}):this.$router.push({name:"files-public-drop",params:{item:this.$route.params.token}})})).catch((e=>{401===e.statusCode?(this.passwordRequired=!0,this.firstTime||(this.inputErrorMessage=this.$gettext("Incorrect password")),this.firstTime=!1,this.loading=!1,this.$nextTick((()=>{this.$refs.passwordInput.focus()}))):this.errorMessage=e})).finally((()=>{this.loading=!1}))}}};var Dt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-login",style:{backgroundImage:"url("+e.backgroundImg+")"},attrs:{"uk-height-viewport":""}},[i("h1",{staticClass:"oc-invisible-sr"},[e._v(e._s(e.pageTitle))]),e._v(" "),i("div",{staticClass:"oc-login-card uk-position-center"},[i("img",{staticClass:"oc-login-logo",attrs:{src:e.logoImg,alt:"","aria-hidden":!0}}),e._v(" "),i("div",{staticClass:"oc-login-card-body"},[e.loading?[i("h2",{staticClass:"oc-login-card-title"},[i("translate",[e._v("Loading public link…")])],1),e._v(" "),i("oc-spinner",{attrs:{"aria-hidden":!0}})]:e.errorMessage?[i("h2",{staticClass:"oc-login-card-title"},[i("translate",[e._v("An error occurred while loading the public link")])],1),e._v(" "),i("p",{staticClass:"oc-text-lead"},[e._v(e._s(e.errorMessage))])]:e.passwordRequired?[i("form",{on:{submit:function(t){return t.preventDefault(),e.resolvePublicLink.apply(null,arguments)}}},[i("h2",{staticClass:"oc-login-card-title"},[i("translate",[e._v("This resource is password-protected.")])],1),e._v(" "),i("oc-text-input",{ref:"passwordInput",staticClass:"oc-mb-s",attrs:{"error-message":e.inputErrorMessage,label:e.passwordFieldLabel,type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),i("oc-button",{staticClass:"oc-login-authorize-button",attrs:{variation:"primary",appearance:"filled",disabled:!e.password}},[i("translate",[e._v("Continue")])],1)],1)]:e._e()],2),e._v(" "),i("div",{staticClass:"oc-login-card-footer"},[i("p",[e._v("\n        "+e._s(e.configuration.theme.general.slogan)+"\n      ")])])])])};Dt._withStripped=!0;const Lt=e.normalizeComponent({render:Dt,staticRenderFns:[]},undefined,It,undefined,false,undefined,!1,void 0,void 0,void 0);const Ot={components:{vueDropzone:e.vue2Dropzone},mixins:[s],data:()=>({loading:!0,errorMessage:null,uploadedFiles:new Map,uploadedFilesChangeTracker:0}),computed:{...e.mapGetters$1(["configuration"]),...e.mapGetters$1("Files",["davProperties","publicLinkPassword"]),pageTitle(){return this.$gettext(this.$route.meta.title)},publicLinkToken(){return this.$route.params.token},title(){if(this.share){const e=this.$gettext("%{owner} shared this folder with you for uploading");return this.$gettextInterpolate(e,{owner:this.share.getProperty(this.$client.publicFiles.PUBLIC_LINK_SHARE_OWNER)},!0)}return""},url(){return this.$client.publicFiles.getFileUrl(this.publicLinkToken)+"/"},getUploadedFiles(){return this.uploadedFilesChangeTracker&&this.uploadedFiles.values()},dropzoneOptions(){return{url:this.url,clickable:!0,createImageThumbnails:!1,autoQueue:!1,previewsContainer:"#previews"}}},mounted(){this.resolvePublicLink()},methods:{resolvePublicLink(){this.loading=!0;const e=this.davProperties.concat([this.$client.publicFiles.PUBLIC_LINK_ITEM_TYPE,this.$client.publicFiles.PUBLIC_LINK_PERMISSION,this.$client.publicFiles.PUBLIC_LINK_EXPIRATION,this.$client.publicFiles.PUBLIC_LINK_SHARE_DATETIME,this.$client.publicFiles.PUBLIC_LINK_SHARE_OWNER]);this.$client.publicFiles.list(this.publicLinkToken,this.publicLinkPassword,e,"0").then((e=>{e[0].getProperty("4"!==this.$client.publicFiles.PUBLIC_LINK_SHARE_DATETIME)?this.$router.push({name:"files-public-list",params:{item:this.publicLinkToken}}):this.share=e[0]})).catch((e=>{401!==e.statusCode?this.errorMessage=e:this.$router.push({name:"files-public-link",params:{token:this.publicLinkToken}})})).finally((()=>{this.loading=!1}))},dropZoneFileAdded(e){const t=e.upload.uuid;this.uploadedFilesChangeTracker++,this.uploadedFiles.set(t,{name:e.name,size:e.size,status:"init"}),this.uploadQueue.add((()=>this.$client.publicFiles.putFileContents(this.publicLinkToken,e.name,this.publicLinkPassword,e,{headers:{"OC-Autorename":1},onProgress:i=>{this.uploadedFilesChangeTracker++,this.uploadedFiles.set(t,{name:e.name,size:e.size,status:"uploading"})}}))).then((i=>{this.uploadedFilesChangeTracker++,this.uploadedFiles.set(t,{name:e.name,size:e.size,status:"done"})})).catch((i=>{console.error("Error uploading file ",e.name,": ",i),this.uploadedFilesChangeTracker++,this.uploadedFiles.set(t,{name:e.name,size:e.size,status:"error"})}))},$_ocUploadingFileMessage(e){const t=this.$gettext('Uploading file "%{fileName}"');return this.$gettextInterpolate(t,{fileName:e},!0)}}};var Nt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-height-1-1 uk-flex uk-flex-column uk-flex-between",attrs:{id:"files-drop-container"}},[i("h1",{staticClass:"oc-invisible-sr"},[e._v(e._s(e.pageTitle))]),e._v(" "),i("div",{staticClass:"oc-p uk-height-1-1"},[e.loading?i("div",{key:"loading-drop",staticClass:"uk-flex uk-flex-column uk-flex-middle"},[i("h2",{staticClass:"oc-login-card-title"},[i("translate",[e._v("Loading public link…")])],1),e._v(" "),i("oc-spinner",{attrs:{"aria-hidden":!0}})],1):i("div",{key:"loaded-drop",staticClass:"uk-flex uk-flex-column uk-flex-middle uk-height-1-1"},[i("div",{staticClass:"uk-text-center uk-width-1-1 uk-width-xxlarge@m"},[i("h2",{domProps:{textContent:e._s(e.title)}}),e._v(" "),i("vue-dropzone",{attrs:{id:"oc-dropzone",options:e.dropzoneOptions,"use-custom-slot":!0,"include-styling":!1},on:{"vdropzone-file-added":e.dropZoneFileAdded}},[i("div",{staticClass:"uk-flex uk-flex-middle uk-flex-center uk-placeholder"},[i("oc-icon",{attrs:{name:"file_upload"}}),e._v(" "),i("translate",[e._v("Drop files here to upload or click to select file")])],1)]),e._v(" "),i("div",{attrs:{id:"previews",hidden:""}})],1),e._v(" "),i("div",{staticClass:"uk-flex uk-flex-center uk-overflow-auto uk-width-1-1",class:{"files-empty":!e.getUploadedFiles}},[e.getUploadedFiles?i("oc-table-simple",{staticClass:"uk-width-1-1 uk-width-xxlarge@m"},[i("oc-tbody",e._l(e.getUploadedFiles,(function(t,s){return i("oc-tr",{key:s},[i("oc-td",{staticClass:"oc-pl-rm",domProps:{textContent:e._s(t.name)}}),e._v(" "),i("oc-td",{staticClass:"uk-text-nowrap oc-text-muted",attrs:{width:"shrink"}},[i("oc-resource-size",{attrs:{size:t.size}})],1),e._v(" "),i("oc-td",{staticClass:"oc-pr-rm uk-preserve-width",attrs:{width:"shrink"}},["done"===t.status?i("oc-icon",{attrs:{name:"ready",size:"small",variation:"success"}}):e._e(),e._v(" "),"error"===t.status?i("oc-icon",{attrs:{name:"info",size:"small",variation:"danger"}}):e._e(),e._v(" "),"uploading"===t.status||"init"===t.status?i("oc-spinner",{attrs:{size:"small","aria-label":e.$_ocUploadingFileMessage(t.name)}}):e._e()],1)],1)})),1)],1):e._e()],1),e._v(" "),e.errorMessage?i("div",{staticClass:"uk-text-center"},[i("h2",[i("translate",[e._v("An error occurred while loading the public link")])],1),e._v(" "),i("p",{staticClass:"oc-m-rm",domProps:{textContent:e._s(e.errorMessage)}})]):e._e()])]),e._v(" "),i("div",{staticClass:"uk-text-center"},[i("p",{domProps:{textContent:e._s(e.configuration.theme.general.slogan)}})])])};Nt._withStripped=!0;const Ut=e.normalizeComponent({render:Nt,staticRenderFns:[]},undefined,Ot,undefined,false,undefined,!1,void 0,void 0,void 0),zt="move",Mt="copy";const Gt={metaInfo(){return{title:`${this.title} - ${this.configuration.theme.general.name}`}},components:{NoContentMessage:Ke,ListLoader:Ye,ListInfo:st,Pagination:at},mixins:[s,r,Ue],data:()=>({headerPosition:0,originalLocation:"",loading:!0}),computed:{...e.mapState("Files",["selectedResourcesForMove","locationPickerTargetFolder","currentFolder"]),...e.mapGetters$1("Files",["activeFiles","publicLinkPassword","davProperties","totalFilesCount","totalFilesSize"]),...e.mapGetters$1(["configuration"]),title(){const t=this.currentAction===zt?this.$gettext("Move into »%{ target }«"):this.$gettext("Copy into »%{ target }«"),i=e.basename(this.target)||this.$gettext("All files");return this.$gettextInterpolate(t,{target:i})},currentAction(){return this.$route.params.action},isPublicContext(){return"public"===this.$route.params.context},target(){return this.$route.params.item},resources(){const e=V(this.$route.query.resource);return"string"==typeof e?[e]:e},resourcesCount(){return this.resources.length},breadcrumbs(){const t=[],i=this.target.split("/").filter((e=>""!==e));if(this.isPublicContext){const s=encodeURIComponent(e.join.apply(null,i.slice(0,1)));t.push(this.createBreadcrumbNode(0,this.$gettext("Public link"),s));for(let s=1;s<i.length;s++){const r=encodeURIComponent(e.join.apply(null,i.slice(0,s+1)));t.push(this.createBreadcrumbNode(s+1,i[s],r))}}else{t.push(this.createBreadcrumbNode(0,this.$gettext("All files"),"/"));for(let s=0;s<i.length;s++){const r=encodeURIComponent(e.join.apply(null,i.slice(0,s+1)));t.push(this.createBreadcrumbNode(s+1,i[s],r))}}return delete t[t.length-1].to,t},canConfirm(){return this.currentFolder&&this.currentFolder.canCreate()},confirmBtnText(){switch(this.currentAction){case zt:return this.$pgettext("Confirm action in the location picker for move","Move here");case Mt:return this.$pgettext("Confirm action in the location picker for copy","Paste here");default:return this.$gettext("Confirm")}},disabledResources(){return V(this.activeFiles).filter((e=>"folder"!==e.type||this.resources.includes(e.path))).map((e=>e.id))},isEmpty(){return this.activeFiles.length<1},targetRoute(){return{name:this.$route.name,query:{resource:this.resources},params:{action:this.currentAction}}},currentHint(){return"move"===this.currentAction?this.$gettext("Navigate into the desired folder and move selected resources into it.\n          You can navigate into a folder by clicking on its name.\n          To navigate back, you can click on the breadcrumbs.\n          Resources will be moved into the folder where you are currently located."):this.$gettext("Navigate into the desired folder and copy selected resources into it.\n        You can navigate into a folder by clicking on its name.\n        To navigate back, you can click on the breadcrumbs.\n        Resources will be copied into the folder where you are currently located.")}},watch:{$route:{handler:function(e,t){const i=e.name===t?.name,s=e.params?.item===t?.params?.item;i&&s||this.navigateToTarget(this.$route),this.$_filesListPagination_updateCurrentPage()},immediate:!0}},created(){window.onresize=this.adjustTableHeaderPosition,this.originalLocation=this.target},mounted(){this.adjustTableHeaderPosition()},methods:{...e.mapMutations("Files",["CLEAR_CURRENT_FILES_LIST"]),...e.mapActions$1("Files",["loadFiles","loadIndicators"]),...e.mapActions$1(["showMessage"]),createBreadcrumbNode(e,t,i){return{index:e,text:t,to:{name:this.$route.name,params:{action:this.currentAction,item:i},query:{resource:this.resources}}}},adjustTableHeaderPosition(){this.$nextTick((()=>{const e=document.querySelector("#files-app-bar");this.headerPosition=e.getBoundingClientRect().bottom}))},async navigateToTarget(e){this.loading=!0,this.CLEAR_CURRENT_FILES_LIST(),"object"==typeof e&&(e=this.target);const t=this.isPublicContext?await this.$client.publicFiles.list(e,this.publicLinkPassword,this.davProperties):await this.$client.files.list(e,1,this.davProperties);this.loadFiles({currentFolder:t[0],files:t.slice(1)}),this.loadIndicators({client:this.$client,currentFolder:this.$route.params.item||"/"}),this.adjustTableHeaderPosition(),this.loading=!1},leaveLocationPicker(e){this.isPublicContext?this.$router.push({name:"files-public-list",params:{token:e}}):this.$router.push({name:"files-personal",params:{item:e||"/"}})},isRowDisabled(e){return"folder"!==e.type||!e.canCreate()||this.resources.some((t=>t===e.path))},async confirmAction(){const t=[];let i=null;for(const s of this.resources){let r=this.target||"/";const o=e.basename(s);r+="/"+o;if(this.activeFiles.some((t=>e.basename(t.name)===o))){const e=this.$gettext("Resource with name %{name} already exists");t.push({resource:o,message:this.$gettextInterpolate(e,{name:o},!0)})}else{switch(this.currentAction){case zt:i=this.isPublicContext?this.$client.publicFiles.move(s,r,this.publicLinkPassword):this.$client.files.move(s,r);break;case Mt:i=this.isPublicContext?this.$client.publicFiles.copy(s,r,this.publicLinkPassword):this.$client.files.copy(s,r);break;default:return}await i.catch((e=>{e.resource=o,t.push(e)}))}}if(0===t.length)return void this.leaveLocationPicker(this.target);let s="",r="";if(1!==t.length){switch(this.currentAction){case zt:s=this.$gettext("An error occurred while moving several resources"),r=this.$ngettext("%{count} resource could not be moved","%{count} resources could not be moved",t.length);break;case Mt:s=this.$gettext("An error occurred while copying several resources"),r=this.$ngettext("%{count} resource could not be copied","%{count} resources could not be copied",t.length);break;default:return}this.showMessage({title:s,desc:this.$gettextInterpolate(r,{count:t.length},!1),status:"danger"})}else{switch(this.currentAction){case zt:s=this.$gettext("An error occurred while moving %{resource}");break;case Mt:s=this.$gettext("An error occurred while copying %{resource}");break;default:return}this.showMessage({title:this.$gettextInterpolate(s,{resource:t[0].resource},!0),desc:t[0].message,status:"danger"})}}}};var Bt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{staticClass:"uk-flex uk-height-1-1",attrs:{id:"files-location-picker"}},[i("div",{staticClass:"files-list-wrapper uk-width-expand",attrs:{tabindex:"-1"}},[i("div",{staticClass:"oc-p-s",attrs:{id:"files-app-bar"}},[i("h1",{staticClass:"location-picker-selection-info oc-mb",domProps:{textContent:e._s(e.title)}}),e._v(" "),i("p",{staticClass:"oc-text-muted uk-text-meta",domProps:{textContent:e._s(e.currentHint)}}),e._v(" "),i("hr",{staticClass:"oc-mt-rm"}),e._v(" "),i("oc-breadcrumb",{staticClass:"oc-mb-s",attrs:{items:e.breadcrumbs}}),e._v(" "),i("oc-grid",{staticClass:"uk-flex-middle",attrs:{gutter:"small",flex:""}},[i("div",[i("oc-button",{attrs:{size:"small"},on:{click:function(t){return e.leaveLocationPicker(e.originalLocation)}}},[i("translate",[e._v("Cancel")])],1)],1),e._v(" "),i("div",[i("oc-button",{attrs:{id:"location-picker-btn-confirm",variation:"primary",appearance:"filled",size:"small",disabled:!e.canConfirm},on:{click:e.confirmAction}},[i("span",{domProps:{textContent:e._s(e.confirmBtnText)}})])],1)])],1),e._v(" "),i("div",{attrs:{id:"files-view"}},[e.loading?i("list-loader"):[e.isEmpty?i("no-content-message",{staticClass:"files-empty",attrs:{id:"files-location-picker-empty",icon:"folder"},scopedSlots:e._u([{key:"message",fn:function(){return[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("There are no resources in this folder.")])]},proxy:!0}],null,!1,3449492595)}):i("oc-table-files",{staticClass:"files-table",attrs:{id:"files-location-picker-table","are-thumbnails-displayed":!1,resources:e.activeFiles,disabled:e.disabledResources,"target-route":e.targetRoute,"has-actions":!1,"is-selectable":!1,"header-position":e.headerPosition},scopedSlots:e._u([{key:"footer",fn:function(){return[i("pagination"),e._v(" "),e.activeFiles.length>0?i("list-info",{staticClass:"uk-width-1-1 oc-my-s",attrs:{files:e.totalFilesCount.files,folders:e.totalFilesCount.folders,size:e.totalFilesSize}}):e._e()]},proxy:!0}])})]],2)])])};Bt._withStripped=!0;const Ht=e.normalizeComponent({render:Bt,staticRenderFns:[]},undefined,Gt,"data-v-4a7e8316",false,undefined,!1,void 0,void 0,void 0),Vt=new Ge;const qt={components:{ListInfo:st,ListLoader:Ye,NoContentMessage:Ke,NotFoundMessage:et,Pagination:at},mixins:[Oe,ie,Ne,Ue,ze],data:()=>({loading:!0}),computed:{...e.mapGetters$1("Files",["publicLinkPassword","activeFiles","selectedFiles","davProperties","currentFolder","highlightedFile","inProgress","currentFolder","totalFilesCount","totalFilesSize"]),...e.mapGetters$1(["configuration"]),isEmpty(){return this.activeFiles.length<1},isSidebarOpen(){return null!==this.highlightedFile},uploadProgressVisible(){return this.inProgress.length>0},selected:{get(){return this.selectedFiles},set(e){this.SELECT_RESOURCES(e)}},folderNotFound(){return null===this.currentFolder},targetRoute(){return{name:this.$route.name}},displayThumbnails(){return!this.configuration.options.disablePreviews}},watch:{$route:{handler:function(e,t){const i=e.name===t?.name,s=e.params?.item===t?.params?.item;i&&s||this.loadResources(i),this.$_filesListPagination_updateCurrentPage()},immediate:!0},uploadProgressVisible(){this.adjustTableHeaderPosition()}},beforeDestroy(){Vt.disconnect()},methods:{...e.mapActions$1("Files",["loadPreview"]),...e.mapMutations("Files",["SELECT_RESOURCES","SET_CURRENT_FOLDER","LOAD_FILES","CLEAR_CURRENT_FILES_LIST"]),rowMounted(t,i){if(!this.displayThumbnails)return;const s=e.debounce((({unobserve:e})=>{e(),this.loadPreview({resource:t,isPublic:!0,dimensions:Be.Thumbnail,type:He.Thumbnail})}),250);Vt.observe(i.$el,{onEnter:s,onExit:s.cancel})},async loadResources(e){this.loading=!0,this.CLEAR_CURRENT_FILES_LIST();const t=this.davProperties.concat([this.$client.publicFiles.PUBLIC_LINK_ITEM_TYPE,this.$client.publicFiles.PUBLIC_LINK_PERMISSION,this.$client.publicFiles.PUBLIC_LINK_EXPIRATION,this.$client.publicFiles.PUBLIC_LINK_SHARE_DATETIME,this.$client.publicFiles.PUBLIC_LINK_SHARE_OWNER]);try{let e=await this.$client.publicFiles.list(this.$route.params.item,this.publicLinkPassword,t);if("4"===e[0].getProperty(this.$client.publicFiles.PUBLIC_LINK_PERMISSION))return void this.$router.push({name:"files-public-link",params:{token:this.$route.params.item}});e=e.map(A),this.LOAD_FILES({currentFolder:e[0],files:e.slice(1)}),this.adjustTableHeaderPosition(),window.onresize=this.adjustTableHeaderPosition}catch(e){this.SET_CURRENT_FOLDER(null),console.error(e),401===e.statusCode&&this.redirectToResolvePage()}this.loading=!1,this.accessibleBreadcrumb_focusAndAnnounceBreadcrumb(e)},redirectToResolvePage(){this.$router.push({name:"files-public-link",params:{token:this.$route.params.item}})}}};var jt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.loading?i("list-loader"):[e.folderNotFound?i("not-found-message",{staticClass:"files-not-found uk-height-1-1"}):e.isEmpty?i("no-content-message",{staticClass:"files-empty",attrs:{id:"files-public-list-empty",icon:"folder"},scopedSlots:e._u([{key:"message",fn:function(){return[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("There are no resources in this folder")])]},proxy:!0},e.currentFolder.canCreate()?{key:"callToAction",fn:function(){return[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v('Drag files and folders here or use the "+ New" button to upload')])]},proxy:!0}:null],null,!0)}):i("oc-table-files",{staticClass:"files-table",class:{"files-table-squashed":e.isSidebarOpen},attrs:{id:"files-public-files-table","are-thumbnails-displayed":e.displayThumbnails,resources:e.activeFiles,"target-route":e.targetRoute,highlighted:e.highlightedFile?e.highlightedFile.id:null,"header-position":e.headerPosition},on:{showDetails:e.$_mountSideBar_showDetails,fileClick:e.$_fileActions_triggerDefaultAction,rowMounted:e.rowMounted},scopedSlots:e._u([{key:"footer",fn:function(){return[i("pagination"),e._v(" "),e.activeFiles.length>0?i("list-info",{staticClass:"uk-width-1-1 oc-my-s",attrs:{files:e.totalFilesCount.files,folders:e.totalFilesCount.folders,size:e.totalFilesSize}}):e._e()]},proxy:!0}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})]],2)};jt._withStripped=!0;const Wt=e.normalizeComponent({render:jt,staticRenderFns:[]},undefined,qt,undefined,false,undefined,!1,void 0,void 0,void 0);const Yt={mixins:[s,ge,r],title:e=>e("Details"),data:()=>({loading:!1}),computed:{...e.mapGetters$1("Files",["highlightedFile","versions"]),...e.mapGetters$1(["getToken"]),...e.mapGetters$1(["user"]),hasContent(){return this.highlightedFile.preview||this.hasTimestamp||this.ownerName||this.showSize||this.showShares||this.showVersions},noContentText(){return this.$gettext("No information to display")},detailsTableLabel(){return this.$gettext("Overview of the information about the selected file")},showShares(){return this.hasAnyShares&&!this.isPublicPage},detailSharingInformation(){return"folder"===this.highlightedFile.type?this.$gettext("This folder has been shared."):this.$gettext("This file has been shared.")},peopleSharesLabel(){return this.$gettext("Show invited people")},linkSharesLabel(){return this.$gettext("Show links")},hasTimestamp(){return this.highlightedFile.mdate?.length>0||this.highlightedFile.sdate?.length>0},timestampTitle(){return this.highlightedFile.mdate?this.$gettext("Last modified:"):this.$gettext("Shared:")},ownerTitle(){return this.$gettext("Owner:")},ownerName(){return this.highlightedFile.ownerDisplayName||this.highlightedFile.shareOwnerDisplayname||this.highlightedFile.owner?.[0].displayName},ownerAdditionalInfo(){return this.highlightedFile.owner?.[0].additionalInfo},showSize(){return"?"!==this.getResourceSize(this.highlightedFile.size)},sizeTitle(){return this.$gettext("Size:")},showVersions(){if("folder"!==this.highlightedFile.type)return this.versions.length>0&&!this.isPublicPage},versionsTitle(){return this.$gettext("Versions:")},seeVersionsLabel(){return this.$gettext("See all versions")},capitalizedTimestamp(){let t="";return t=this.highlightedFile.mdate?this.formDateFromNow(this.highlightedFile.mdate,"Http"):this.formDateFromNow(this.highlightedFile.sdate,"Http"),e.upperFirst(t)},hasAnyShares(){return this.highlightedFile.shareTypes?.length>0||this.highlightedFile.indicators?.length>0},hasPeopleShares(){return e.intersection(this.highlightedFile.shareTypes,l).length>0||this.highlightedFile.indicators?.filter((e=>"group"===e.icon)).length>0},hasLinkShares(){return this.highlightedFile.shareTypes.includes(n.link)||this.highlightedFile.indicators?.filter((e=>"link"===e.icon)).length>0},ownedByCurrentUser(){return this.highlightedFile.ownerId===this.user.id||this.highlightedFile.owner?.[0].username===this.user.id||this.highlightedFile.shareOwner===this.user.id}},watch:{highlightedFile(){this.loadData()}},mounted(){this.loadData()},methods:{...e.mapActions$1("Files",["setHighlightedFile","loadPreview","loadVersions"]),...e.mapMutations("Files",["SET_APP_SIDEBAR_EXPANDED_ACCORDION"]),expandPeoplesAccordion(){this.SET_APP_SIDEBAR_EXPANDED_ACCORDION("sharing-item")},expandLinksAccordion(){this.SET_APP_SIDEBAR_EXPANDED_ACCORDION("links-item")},expandVersionsAccordion(){this.SET_APP_SIDEBAR_EXPANDED_ACCORDION("versions-item")},async loadData(){this.loading=!0;const e=[this.loadPreview({resource:this.highlightedFile,isPublic:this.isPublicPage,dimensions:Be.Preview,type:He.Preview})];"file"!==this.highlightedFile.type||this.isPublicPage||e.push(this.loadVersions({client:this.$client,fileId:this.highlightedFile.id})),await Promise.all(e.map((e=>e.catch((e=>e))))),this.loading=!1}}};var Xt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"oc-file-details-sidebar"}},[e.loading?i("oc-loader"):e.hasContent?i("div",[e.highlightedFile.preview?i("div",{staticClass:"details-preview uk-flex uk-flex-middle uk-flex-center oc-mb-m"},[i("oc-img",{attrs:{src:e.highlightedFile.preview,alt:""}})],1):e._e(),e._v(" "),e.showShares?i("div",{staticClass:"uk-flex uk-flex-middle oc-my-m",attrs:{"data-testid":"sharingInfo"}},[e.hasPeopleShares?i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.peopleSharesLabel,expression:"peopleSharesLabel"}],staticClass:"oc-mr-xs",attrs:{appearance:"raw","aria-label":e.peopleSharesLabel},on:{click:e.expandPeoplesAccordion}},[i("oc-icon",{attrs:{name:"group"}})],1):e._e(),e._v(" "),e.hasLinkShares?i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.linkSharesLabel,expression:"linkSharesLabel"}],staticClass:"oc-mr-xs",attrs:{appearance:"raw","aria-label":e.linkSharesLabel},on:{click:e.expandLinksAccordion}},[i("oc-icon",{attrs:{name:"link"}})],1):e._e(),e._v(" "),i("p",{staticClass:"oc-my-rm oc-mx-s",domProps:{textContent:e._s(e.detailSharingInformation)}})],1):e._e(),e._v(" "),i("table",{staticClass:"details-table",attrs:{"aria-label":"detailsTableLabel"}},[e.hasTimestamp?i("tr",{attrs:{"data-testid":"timestamp"}},[i("th",{staticClass:"oc-pr-s",attrs:{scope:"col"},domProps:{textContent:e._s(e.timestampTitle)}}),e._v(" "),i("td",[e.showVersions?i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.seeVersionsLabel,expression:"seeVersionsLabel"}],attrs:{appearance:"raw","aria-label":e.seeVersionsLabel},domProps:{textContent:e._s(e.capitalizedTimestamp)},on:{click:e.expandVersionsAccordion}}):i("span",{domProps:{textContent:e._s(e.capitalizedTimestamp)}})],1)]):e._e(),e._v(" "),e.ownerName?i("tr",{attrs:{"data-testid":"ownerName"}},[i("th",{staticClass:"oc-pr-s",attrs:{scope:"col"},domProps:{textContent:e._s(e.ownerTitle)}}),e._v(" "),i("td",[i("p",{staticClass:"oc-m-rm"},[e._v("\n            "+e._s(e.ownerName)+"\n            "),e.ownedByCurrentUser?i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("(me)")]):e._e(),e._v(" "),!e.ownedByCurrentUser&&e.ownerAdditionalInfo?i("span",[e._v("("+e._s(e.ownerAdditionalInfo)+")")]):e._e()])])]):e._e(),e._v(" "),e.showSize?i("tr",{attrs:{"data-testid":"sizeInfo"}},[i("th",{staticClass:"oc-pr-s",attrs:{scope:"col"},domProps:{textContent:e._s(e.sizeTitle)}}),e._v(" "),i("td",{domProps:{textContent:e._s(e.getResourceSize(e.highlightedFile.size))}})]):e._e(),e._v(" "),e.showVersions?i("tr",{attrs:{"data-testid":"versionsInfo"}},[i("th",{staticClass:"oc-pr-s",attrs:{scope:"col"},domProps:{textContent:e._s(e.versionsTitle)}}),e._v(" "),i("td",[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.seeVersionsLabel,expression:"seeVersionsLabel"}],attrs:{appearance:"raw","aria-label":e.seeVersionsLabel},domProps:{textContent:e._s(e.versions.length)},on:{click:e.expandVersionsAccordion}})],1)]):e._e()])]):i("p",{attrs:{"data-testid":"noContentText"},domProps:{textContent:e._s(e.noContentText)}})],1)};Xt._withStripped=!0;const Qt=e.normalizeComponent({render:Xt,staticRenderFns:[]},undefined,Yt,"data-v-533083b6",false,undefined,!1,void 0,void 0,void 0);const Kt={name:"ActionsAccordion",title:e=>e("Actions"),mixins:[ie],computed:{...e.mapGetters$1("Files",["highlightedFile","currentFolder"]),actions(){return this.$_fileActions_editorActions.concat(this.$_fileActions_systemActions).filter((e=>e.isEnabled({resource:this.highlightedFile,parent:this.currentFolder})))}},methods:{getComponentProps:(e,t)=>"router-link"===e.componentType&&e.route?{to:{name:e.route,params:{item:t.path}}}:{appearance:"raw"}}};var Zt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"uk-list oc-mt-s oc-files-actions-sidebar-actions",attrs:{id:"oc-files-actions-sidebar"}},e._l(e.actions,(function(t,s){return i("li",{key:"action-"+s,staticClass:"oc-py-xs"},[i(t.componentType,e._b({tag:"component",class:["oc-text-bold",t.class],on:{click:function(i){return i.stopPropagation(),t.handler(e.highlightedFile,t.handlerData)}}},"component",e.getComponentProps(t,e.highlightedFile),!1),[i("oc-icon",{attrs:{name:t.icon,size:"medium"}}),e._v(" "),i("span",{staticClass:"oc-files-actions-sidebar-action-label"},[e._v(e._s(t.label(e.highlightedFile)))]),e._v(" "),t.opensInNewWindow?i("span",{staticClass:"oc-invisible-sr",domProps:{textContent:e._s(e.$gettext("(Opens in new window)"))}}):e._e()],1)],1)})),0)};Zt._withStripped=!0;const Jt=e.normalizeComponent({render:Zt,staticRenderFns:[]},undefined,Kt,undefined,false,undefined,!1,void 0,void 0,void 0);const ei={mixins:[s,ge],title:e=>e("Versions"),data:()=>({loading:!1}),computed:{...e.mapGetters$1("Files",["highlightedFile","versions"]),...e.mapGetters$1(["getToken"]),hasVersion(){return this.versions.length>0}},watch:{highlightedFile(){this.fetchFileVersions()}},mounted(){this.fetchFileVersions()},methods:{...e.mapActions$1("Files",["loadVersions"]),currentVersionId(e){const t=e.name.split("/");return t[t.length-1]},async fetchFileVersions(){this.loading=!0,await this.loadVersions({client:this.$client,fileId:this.highlightedFile.id}),this.loading=!1},revertVersion(e){this.$client.fileVersions.restoreFileVersion(this.highlightedFile.id,this.currentVersionId(e),this.highlightedFile.path).then((()=>{this.fetchFileVersions()}))},downloadVersion(e){const t=this.currentVersionId(e);return this.downloadFile(this.highlightedFile,null,t)}}};var ti=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"oc-file-versions-sidebar"}},[e.loading?i("oc-loader"):e._e(),e._v(" "),!e.loading&&e.hasVersion?i("oc-table-simple",[i("oc-tbody",e._l(e.versions,(function(t,s){return i("oc-tr",{key:s,staticClass:"file-row"},[i("oc-td",{attrs:{width:"shrink"}},[i("oc-icon",{attrs:{name:e.fileTypeIcon(e.highlightedFile)}})],1),e._v(" "),i("oc-td",{staticClass:"oc-text-muted uk-text-nowrap",attrs:{width:"shrink"}},[e._v("\n          "+e._s(e.formDateFromNow(t.fileInfo["{DAV:}getlastmodified"],"Http"))+"\n        ")]),e._v(" "),i("oc-td",{staticClass:"oc-text-muted uk-text-nowrap",attrs:{width:"expand"}},[e._v("\n          "+e._s(e.getResourceSize(t.fileInfo["{DAV:}getcontentlength"]))+"\n        ")]),e._v(" "),i("oc-td",{attrs:{width:"shrink"}},[i("div",{staticClass:"uk-button-group"},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.$gettext("Restore older version"),expression:"$gettext('Restore older version')"}],attrs:{appearance:"raw","aria-label":e.$gettext("Restore older version")},on:{click:function(i){return e.revertVersion(t)}}},[i("oc-icon",{attrs:{name:"restore"}})],1)],1)]),e._v(" "),i("oc-td",{attrs:{width:"shrink"}},[i("div",{staticClass:"uk-button-group"},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.$gettext("Download older version"),expression:"$gettext('Download older version')"}],attrs:{appearance:"raw","aria-label":e.$gettext("Download older version")},on:{click:function(i){return e.downloadVersion(t)}}},[i("oc-icon",{attrs:{name:"cloud_download"}})],1)],1)])],1)})),1)],1):i("div",[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("No Versions available for this file")])])],1)};ti._withStripped=!0;const ii=e.normalizeComponent({render:ti,staticRenderFns:[]},undefined,ei,undefined,false,undefined,!1,void 0,void 0,void 0);var si={computed:{...e.mapGetters$1(["getToken","user","isOcis"]),...e.mapGetters$1("Files",["highlightedFile"]),ownerRole(){return{name:"owner",label:this.$gettext("Owner")}},resharerRole(){return{name:"resharer",label:this.$gettext("Resharer")}},advancedRole(){const e={name:"advancedRole",label:this.$gettext("Advanced permissions"),description:this.$gettext("Set detailed permissions"),permissions:["read"],additionalPermissions:{update:{name:"update",description:this.$gettext("Allow editing")}}};if("folder"===this.highlightedFile.type){const t=e.additionalPermissions;t.create={name:"create",description:this.$gettext("Allow creating")},t.delete={name:"delete",description:this.$gettext("Allow deleting")}}return this.isOcis||(e.additionalPermissions.share={name:"share",description:this.$gettext("Allow sharing")}),e},roles(){const e="folder"===this.highlightedFile.type,t=this.$gettext,i=S({$gettext:t,isFolder:e,allowSharePerm:!this.isOcis});return i.push(this.advancedRole),i},displayRoles(){const e=this.roles;return e.push(this.resharerRole,this.ownerRole),e}},methods:{collaboratorOptionChanged({role:e,permissions:t,expirationDate:i}){this.selectedRole=e,this.additionalPermissions=t,this.expirationDate=i},getCollaboratorTypeLabel(e){switch(e){case n.user:return this.$gettext("User");case n.group:return this.$gettext("Group");case n.guest:return this.$gettext("Guest");case n.remote:return this.$gettext("Remote user");default:return this.$gettext("Unknown type")}}}};function ri(e){const t=[];let i,s=0,r=-1,o=0;for(;s<e.length;){i=e.charAt(s);const a=!o&&"."===i||i>="0"&&i<="9";a!==o&&(r++,t[r]="",o=a),t[r]+=i,s++}return t}const oi={naturalSortCompare:function(e,t){const i=ri(e),s=ri(t);let r,o,a;for(r=0;i[r]&&s[r];r++)if(i[r]!==s[r])return o=Number(i[r]),a=Number(s[r]),o==i[r]&&a==s[r]?o-a:i[r].localeCompare(s[r],"en");return i.length-s.length}};const ai={name:"Collaborator",mixins:[s,si],props:{collaborator:{type:Object,required:!0},modifiable:{type:Boolean,default:!1},firstColumn:{type:Boolean,default:!0}},data:function(){return{removalInProgress:!1}},computed:{...e.mapGetters$1(["user"]),shareTypes:()=>n,shareId(){return this.collaborator.id},$_resharerToggleId(){return"collaborator-"+this.collaborator.collaborator.name+"-resharer-details-toggle"},$_loadingSpinnerVisible(){return this.modifiable&&this.removalInProgress},$_deleteButtonVisible(){return this.modifiable&&!this.removalInProgress},$_editButtonVisible(){return this.modifiable&&!this.removalInProgress},editShareHint(){const e=this.$gettext("Edit share with %{ currentCollaborator }");return this.$gettextInterpolate(e,{currentCollaborator:this.collaborator.collaborator.displayName},!0)},deleteShareHint(){const e=this.$gettext("Delete share with %{ currentCollaborator }");return this.$gettextInterpolate(e,{currentCollaborator:this.collaborator.collaborator.displayName},!0)},isIndirectShare(){return this.collaborator.incoming||this.collaborator.outgoing},$_reshareInformation(){try{return this.collaborator.resharers.forEach((function(e){if("string"!=typeof e.displayName||!e.displayName)throw Error("displayName of resharer is not a string")})),this.collaborator.resharers.map((e=>e.displayName)).join(", ")}catch(e){return null}},viaLabel(){if(!this.isIndirectShare)return null;const t=this.$gettext("Via %{folderName}");return this.$gettextInterpolate(t,{folderName:e.basename(this.collaborator.path)},!0)},viaRouterParams(){return{name:"files-personal",params:{item:this.collaborator.path||"/"}}},viaTooltip(){return this.$gettext("Navigate to the parent")},originalRole(){const e=this.displayRoles.find((e=>e.name===this.collaborator.role.name));return e||{label:this.$gettext("Unknown Role")}},isUser(){return this.collaborator.shareType===this.shareTypes.user},isRemoteUser(){return this.collaborator.shareType===this.shareTypes.remote},isGroup(){return this.collaborator.shareType===this.shareTypes.group},expirationDate(){return e.DateTime_1.fromJSDate(this.collaborator.expires).endOf("day").setLocale(this.$language.current).toRelative()},collaboratorListItemClass(){return"files-collaborators-collaborator-info-"+(this.isUser||this.isRemoteUser?this.isRemoteUser?"remote":"user":"group")},isCurrentUser(){return!this.isGroup&&this.collaborator.collaborator.name===this.user.id},collaboratorTypeTagIcon(){return this.isGroup?"group":"person"},roleTagIcon(){switch(this.collaborator.role.name){case"viewer":return"remove_red_eye";case"editor":return"edit";case"advancedRole":return"checklist";default:return"key"}}},methods:{$_removeShare(){this.removalInProgress=!0,this.$emit("onDelete",this.collaborator)}}};var ni=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("oc-table-simple",{staticClass:"files-collaborators-collaborator",attrs:{top:"",role:"presentation"}},[i("oc-tr",{staticClass:"files-collaborators-collaborator-table-row-info"},[i("oc-td",{staticClass:"oc-py-rm oc-pr-s",attrs:{width:"shrink"}},[i("div",{key:"collaborator-avatar-loaded"},[e.isUser?i("avatar-image",{staticClass:"oc-mr-s files-collaborators-collaborator-indicator",attrs:{width:48,userid:e.collaborator.collaborator.name,"user-name":e.collaborator.collaborator.displayName}}):i("div",{key:"collaborator-avatar-placeholder"},[e.collaborator.shareType===e.shareTypes.group?i("oc-icon",{key:"avatar-group",staticClass:"oc-mr-s files-collaborators-collaborator-indicator",attrs:{name:"group",size:"xlarge","accessible-label":e.$gettext("Group")}}):i("oc-icon",{key:"avatar-generic-person",staticClass:"oc-mr-s files-collaborators-collaborator-indicator",attrs:{name:"person",size:"xlarge","accessible-label":e.$gettext("Remote user")}})],1)],1)]),e._v(" "),i("oc-td",{staticClass:"oc-py-rm oc-pr-s"},[i("div",{staticClass:"uk-flex uk-flex-column uk-flex-center",class:e.collaboratorListItemClass},[i("div",{staticClass:"oc-text-initial oc-mb-xs"},[i("p",{staticClass:"files-collaborators-collaborator-name oc-text-bold oc-mb-rm",domProps:{textContent:e._s(e.collaborator.collaborator.displayName)}}),e._v(" "),e.isCurrentUser?i("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-muted files-collaborators-collaborator-additional-info oc-my-rm",attrs:{"translate-comment":"Indicator for current user in list of people"}},[e._v("\n            (me)\n          ")]):e._e(),e._v(" "),e.collaborator.collaborator.additionalInfo?i("p",{staticClass:"oc-text-muted files-collaborators-collaborator-additional-info oc-my-rm",domProps:{textContent:e._s(e.collaborator.collaborator.additionalInfo)}}):e._e()]),e._v(" "),i("span",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-invisible-sr",attrs:{id:"collaborator-list-label-"+e.shareId}},[e._v("Tags")]),e._v(" "),i("ul",{staticClass:"collaborator-list oc-my-rm oc-pl-rm",attrs:{"aria-labelledby":"collaborator-list-label-"+e.shareId}},[e.isCurrentUser?e._e():i("li",{staticClass:"oc-py-rm"},[i("oc-tag",{staticClass:"files-collaborators-collaborator-share-type"},[i("oc-icon",{attrs:{name:e.collaboratorTypeTagIcon}}),e._v("\n              "+e._s(e.getCollaboratorTypeLabel(e.collaborator.shareType))+"\n            ")],1)],1),e._v(" "),e.$_reshareInformation?i("li",{staticClass:"oc-py-rm"},[i("oc-tag",{staticClass:"files-collaborators-collaborator-reshare-information",attrs:{id:e.$_resharerToggleId,type:"button"}},[i("oc-icon",{attrs:{name:"repeat"}}),e._v(" "),i("translate",{attrs:{"translate-params":{resharer:e.$_reshareInformation}}},[e._v("\n                Shared by %{resharer}\n              ")])],1),e._v(" "),i("oc-drop",{ref:"menu",staticClass:"oc-mt-s",attrs:{"drop-id":e.$_resharerToggleId+"-drop",toggle:"#"+e.$_resharerToggleId,mode:"click",options:{pos:"bottom-left",delayHide:0},"close-on-click":""}},[i("h4",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{id:"resharer-info-"+e.shareId}},[e._v("Shared by")]),e._v(" "),i("ul",{staticClass:"uk-list uk-list-divider uk-overflow-hidden oc-m-rm",attrs:{"aria-labelledby":"resharer-info-"+e.shareId}},e._l(e.collaborator.resharers,(function(t){return i("li",{key:t.name,staticClass:"oc-py-rm"},[i("div",{staticClass:"uk-flex uk-flex-middle uk-flex-left"},[i("avatar-image",{staticClass:"oc-mr-s",attrs:{width:48,userid:t.name,"user-name":t.displayName}}),e._v(" "),i("div",[i("p",{staticClass:"files-collaborators-resharer-name oc-text-bold oc-my-rm",domProps:{textContent:e._s(t.displayName)}}),e._v(" "),t.additionalInfo?i("p",{staticClass:"oc-text-muted files-collaborators-resharer-additional-info oc-my-rm",domProps:{textContent:e._s(t.additionalInfo)}}):e._e()])],1)])})),0)])],1):e._e(),e._v(" "),i("li",{staticClass:"oc-py-rm"},[i("oc-tag",{staticClass:"files-collaborators-collaborator-role"},[i("oc-icon",{attrs:{name:e.roleTagIcon}}),e._v("\n              "+e._s(e.originalRole.label)+"\n            ")],1)],1),e._v(" "),e.collaborator.expires?i("li",{staticClass:"oc-py-rm"},[i("oc-tag",{staticClass:"files-collaborators-collaborator-expires"},[i("oc-icon",{attrs:{name:"text-calendar"}}),e._v(" "),i("translate",{attrs:{"translate-params":{expires:e.expirationDate}}},[e._v("\n                Expires %{expires}\n              ")])],1)],1):e._e(),e._v(" "),e.isIndirectShare?i("li",{staticClass:"oc-py-rm"},[i("oc-tag",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.viaTooltip,expression:"viaTooltip"}],staticClass:"files-collaborators-collaborator-follow-via",attrs:{"aria-label":e.viaTooltip,type:"router-link",to:e.viaRouterParams}},[i("oc-icon",{attrs:{name:"exit_to_app"}}),e._v(" "),i("span",{staticClass:"uk-text-truncate files-collaborators-collaborator-via-label",domProps:{textContent:e._s(e.viaLabel)}})],1)],1):e._e()])])]),e._v(" "),i("oc-td",{staticClass:"oc-py-rm oc-pr-s",attrs:{width:"shrink","align-v":"top"}},[i("div",{staticClass:"uk-flex uk-flex-nowrap uk-flex-middle"},[e.$_editButtonVisible?i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.editShareHint,expression:"editShareHint"}],staticClass:"files-collaborators-collaborator-edit oc-mr-xs",attrs:{"aria-label":e.editShareHint,appearance:"raw"},on:{click:function(t){return e.$emit("onEdit",e.collaborator)}}},[i("oc-icon",{attrs:{name:"edit"}})],1):e._e(),e._v(" "),i("div",[e.$_deleteButtonVisible?i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.deleteShareHint,expression:"deleteShareHint"}],staticClass:"files-collaborators-collaborator-delete",attrs:{"aria-label":e.deleteShareHint,appearance:"raw"},on:{click:e.$_removeShare}},[i("oc-icon",{attrs:{name:"delete"}})],1):e.$_loadingSpinnerVisible?i("oc-spinner",{attrs:{"aria-label":e.$gettext("Removing person")}}):i("oc-icon",{staticClass:"uk-invisible",attrs:{name:"lock"}})],1)],1)])],1)],1)};ni._withStripped=!0;const li=e.normalizeComponent({render:ni,staticRenderFns:[]},undefined,ai,"data-v-1275d187",false,undefined,!1,void 0,void 0,void 0);const ci={name:"RoleItem",props:{role:{type:Object,required:!0}}};var di=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"roles-select-role-item",attrs:{id:"files-role-"+e.role.name}},[i("span",{staticClass:"oc-text-bold uk-display-block uk-width-1-1",domProps:{textContent:e._s(e.role.label)}}),e._v(" "),i("span",{staticClass:"oc-m-rm",domProps:{textContent:e._s(e.role.description)}})])};di._withStripped=!0;const ui=e.normalizeComponent({render:di,staticRenderFns:[]},undefined,ci,undefined,false,undefined,!1,void 0,void 0,void 0);const hi={name:"AdditionalPermissions",props:{availablePermissions:{type:Object,required:!0},collaboratorsPermissions:{type:Object,required:!1,default:()=>{}}},computed:{permissions(){const e=this.availablePermissions;for(const t in e)this.collaboratorsPermissions&&this.collaboratorsPermissions[t]?e[t].value=!0:e[t].value=!1;return e}},methods:{permissionChecked(){const t=[],i=e.filterObj(this.permissions,((e,t)=>!0===t.value));for(const e in i)t.push(e);this.$emit("permissionChecked",t)}}};var pi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("oc-grid",{attrs:{gutter:"small"}},e._l(e.permissions,(function(t){return i("oc-checkbox",{key:t.name,staticClass:"oc-mr-xs files-collaborators-permission-checkbox",attrs:{id:"files-collaborators-permission-"+t.name,label:t.description},on:{input:e.permissionChecked},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"permission.value"}})})),1)};pi._withStripped=!0;const mi={name:"CollaboratorsEditOptions",components:{RoleItem:ui,AdditionalPermissions:e.normalizeComponent({render:pi,staticRenderFns:[]},undefined,hi,undefined,false,undefined,!1,void 0,void 0,void 0)},mixins:[si],props:{existingRole:{type:Object,required:!1,default:void 0},collaboratorsPermissions:{type:Object,required:!1,default:void 0},expirationDate:{type:Date,required:!1,default:void 0},existingCollaboratorType:{type:[Object,String],required:!1,default:null,validator:function(e){return["user","group"].indexOf(e)>-1||null===e}}},data:()=>({selectedRole:null,additionalPermissions:null,enteredExpirationDate:null}),computed:{...e.mapGetters$1(["capabilities"]),editingUser(){return"user"===this.existingCollaboratorType},editingGroup(){return"group"===this.existingCollaboratorType},$_ocCollaborators_hasAdditionalPermissions(){return this.selectedRole&&this.selectedRole.additionalPermissions},datePickerLabel(){return this.expirationDateEnforced?this.$gettext("Expiration date (required)"):this.$gettext("Expiration date")},expirationSupported(){return this.userExpirationDate&&this.groupExpirationDate},defaultExpirationDateSet(){return this.editingUser?this.userExpirationDate.enabled:this.editingGroup?this.groupExpirationDate.enabled:this.userExpirationDate.enabled||this.groupExpirationDate.enabled},userExpirationDate(){return this.capabilities.files_sharing.user.expire_date},groupExpirationDate(){return this.capabilities.files_sharing.group.expire_date},defaultExpirationDate(){if(!this.defaultExpirationDateSet)return null;const t=parseInt(this.userExpirationDate.days,10),i=parseInt(this.groupExpirationDate.days,10);if(this.editingUser)return e.DateTime_1.now().plus({days:t}).endOf("day").toISO();if(this.editingGroup)return e.DateTime_1.now().plus({days:i}).endOf("day").toISO();let s=0;return s=t&&i?Math.min(t,i):t||i,e.DateTime_1.now().plus({days:s}).endOf("day").toISO()},expirationDateEnforced(){return this.editingUser?this.userExpirationDate.enforced:this.editingGroup?this.groupExpirationDate.enforced:this.userExpirationDate.enforced||this.groupExpirationDate.enforced},maxExpirationDate(){return this.expirationDateEnforced?this.defaultExpirationDate:null},minExpirationDate:()=>e.DateTime_1.now().plus({days:1}).endOf("day").toISO(),expirationDatePlaceholder(){return this.$gettext("Expiration date")},expirationDateRemoveTooltip(){return this.$gettext("Remove expiration date")},canResetExpirationDate(){return!this.expirationDateEnforced&&this.enteredExpirationDate}},watch:{selectedRole:{handler:"publishChange"}},created(){this.existingRole&&"advancedRole"===this.existingRole.name&&!this.selectedRole||this.selectedRole&&"advancedRole"===this.selectedRole.name?this.selectedRole=this.advancedRole:this.existingRole&&!this.selectedRole?this.selectedRole=this.existingRole:this.selectedRole=this.roles[0]},mounted(){this.expirationSupported&&(this.editingUser||this.editingGroup?this.enteredExpirationDate=this.expirationDate?e.DateTime_1.fromJSDate(this.expirationDate).plus({minutes:e.DateTime_1.now().offset}).toISO():null:this.enteredExpirationDate=this.defaultExpirationDate)},methods:{checkAdditionalPermissions(e){this.additionalPermissions=e,this.publishChange()},setExpirationDate(e){this.enteredExpirationDate=""===e?null:e,this.publishChange()},resetExpirationDate(){this.enteredExpirationDate=null,this.publishChange()},publishChange(){this.$emit("optionChange",{role:this.selectedRole,permissions:this.additionalPermissions,expirationDate:this.enteredExpirationDate})}}};var fi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("translate",{staticClass:"oc-label",attrs:{tag:"label",for:"files-collaborators-role-button"}},[e._v("Role")]),e._v(" "),i("oc-select",{staticClass:"files-collaborators-role-button-wrapper",attrs:{"input-id":"files-collaborators-role-button",options:e.roles,clearable:!1,label:"label"},scopedSlots:e._u([{key:"option",fn:function(e){return[i("role-item",{attrs:{role:e}})]}},{key:"no-options",fn:function(){return[e._v("\n      No matching role found\n    ")]},proxy:!0}]),model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}}),e._v(" "),e.$_ocCollaborators_hasAdditionalPermissions?["advancedRole"!==e.selectedRole.name?i("label",{staticClass:"oc-label oc-mt-s"},[i("translate",[e._v("Additional permissions")])],1):e._e(),e._v(" "),i("additional-permissions",{class:{"oc-mt-s":"advancedRole"===e.selectedRole.name},attrs:{"available-permissions":e.selectedRole.additionalPermissions,"collaborators-permissions":e.collaboratorsPermissions},on:{permissionChecked:e.checkAdditionalPermissions}})]:e._e(),e._v(" "),e.expirationSupported?i("div",{staticClass:"oc-mt-m"},[i("div",{staticClass:"uk-position-relative"},[i("oc-datepicker",{key:"collaborator-datepicker-"+e.enteredExpirationDate,attrs:{id:"files-collaborators-collaborator-expiration-input",date:e.enteredExpirationDate,"max-datetime":e.maxExpirationDate,"min-datetime":e.minExpirationDate,label:e.datePickerLabel},on:{input:e.setExpirationDate}}),e._v(" "),e.canResetExpirationDate?i("div",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.expirationDateRemoveTooltip,expression:"expirationDateRemoveTooltip"}],staticClass:"uk-position-small uk-position-center-right oc-cursor-pointer",attrs:{id:"files-collaborators-collaborator-expiration-delete","uk-close":""},on:{click:e.resetExpirationDate}}):e._e()],1)]):e._e()],2)};fi._withStripped=!0;const gi=e.normalizeComponent({render:fi,staticRenderFns:[]},undefined,mi,undefined,false,undefined,!1,void 0,void 0,void 0);const vi={name:"EditCollaborator",components:{Collaborator:li,CollaboratorsEditOptions:gi},mixins:[si],props:{collaborator:{type:Object,required:!0}},data:()=>({selectedRole:null,additionalPermissions:null,saving:!1,expirationDate:null,errors:!1}),computed:{...e.mapGetters$1("Files",["highlightedFile"]),...e.mapGetters$1(["user","isOcis"]),collaboratorType(){const e=this.collaborator.shareType;return e===n.user||e===n.guest||e===n.remote?"user":e===n.group?"group":null},editCollaboratorHint(){const e=this.$gettext("Editing share with %{ currentCollaborator }");return this.$gettextInterpolate(e,{currentCollaborator:this.collaborator.collaborator.displayName},!0)},$_originalPermissions(){const t=this.collaborator.customPermissions;return e.filterObj(t,((e,t)=>t))},$_originalRole(){return this.roles.find((e=>e.name===this.collaborator.role.name))},$_permissionsBitmask(){return F(this.selectedRole||this.$_originalRole,this.additionalPermissions||Object.keys(this.$_originalPermissions))},$_hasChanges(){if(null!==this.selectedRole&&this.selectedRole.name!==this.$_originalRole.name)return!0;const t=this.originalExpirationDate?e.DateTime_1.fromJSDate(this.originalExpirationDate).plus({minutes:e.DateTime_1.now().offset}).toISO():null;if(e.DateTime_1.fromISO(this.expirationDate).ts!==e.DateTime_1.fromISO(t).ts)return!0;return F(this.$_originalRole,Object.keys(this.$_originalPermissions))!==this.$_permissionsBitmask},originalExpirationDate(){const e=this.collaborator.expires;return e||null}},methods:{...e.mapActions$1("Files",["changeShare"]),$_ocCollaborators_saveChanges(){this.saving=!0,this.selectedRole||(this.selectedRole=this.$_originalRole);const e=this.$_permissionsBitmask;this.changeShare({client:this.$client,share:this.collaborator,role:R(e,"folder"===this.highlightedFile.type,!this.isOcis),permissions:e,expirationDate:this.expirationDate}).then((()=>this.$_ocCollaborators_cancelChanges())).catch((e=>{this.errors=e,this.saving=!1}))},$_ocCollaborators_cancelChanges(){this.selectedRole=null,this.additionalPermissions=null,this.expirationDate=this.originalExpirationDate,this.errors=!1,this.saving=!1,this.close()},close(){this.$emit("close")}}};var bi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"files-collaborators-collaborator-edit-dialog"},[i("h4",{staticClass:"oc-invisible-sr",attrs:{id:"collaborator-edit-hint",tabindex:"-1"},domProps:{textContent:e._s(e.editCollaboratorHint)}}),e._v(" "),i("transition",{attrs:{"enter-active-class":"uk-animation-slide-top-small","leave-active-class":"uk-animation-slide-top-small uk-animation-reverse",name:"custom-classes-transition"}},[e.errors?i("oc-alert",{staticClass:"oc-files-collaborators-collaborator-error-alert",attrs:{variation:"danger"}},[e._v("\n      "+e._s(e.errors)+"\n    ")]):e._e()],1),e._v(" "),e.user.id!==e.collaborator.owner.name?i("p",{staticClass:"oc-text-muted uk-flex uk-flex-middle oc-mb-s"},[i("oc-icon",{staticClass:"oc-mr-s",attrs:{name:"repeat"}}),e._v(" "+e._s(e.collaborator.owner.displayName)+"\n  ")],1):e._e(),e._v(" "),i("collaborator",{staticClass:"uk-width-expand",attrs:{collaborator:e.collaborator,"first-column":!1}}),e._v(" "),i("collaborators-edit-options",{staticClass:"oc-mb",attrs:{"existing-role":e.$_originalRole,"collaborators-permissions":e.$_originalPermissions,"expiration-date":e.originalExpirationDate,"existing-collaborator-type":e.collaboratorType},on:{optionChange:e.collaboratorOptionChanged}}),e._v(" "),i("hr",{staticClass:"divider"}),e._v(" "),i("oc-grid",{staticClass:"oc-mb",attrs:{gutter:"small"}},[i("div",[i("oc-button",{key:"edit-collaborator-cancel-button",staticClass:"files-collaborators-collaborator-cancel",attrs:{disabled:e.saving},on:{click:e.$_ocCollaborators_cancelChanges}},[i("translate",[e._v("Cancel")])],1)],1),e._v(" "),i("div",[e.saving?i("oc-button",{key:"edit-collaborator-saving-button",attrs:{disabled:!0}},[i("oc-spinner",{attrs:{"aria-label":e.$gettext("Saving Share"),size:"small"}}),e._v(" "),i("span",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"aria-hidden":!0}},[e._v("Saving Share")])],1):i("oc-button",{key:"edit-collaborator-saving-button",attrs:{id:"files-collaborators-collaborator-save-share-button","aria-label":e.$gettext("Save Share"),disabled:!e.$_hasChanges,variation:"primary"},on:{click:e.$_ocCollaborators_saveChanges}},[i("translate",[e._v("Save")])],1)],1)])],1)};bi._withStripped=!0;const _i=e.normalizeComponent({render:bi,staticRenderFns:[]},undefined,vi,undefined,false,undefined,!1,void 0,void 0,void 0);const wi={name:"AutocompleteItem",mixins:[si],props:{item:{type:Object,required:!0}},data:()=>({loading:!1}),computed:{shareTypes:()=>n,isUser(){return this.item.value.shareType===this.shareTypes.user},isRemoteUser(){return this.item.value.shareType===this.shareTypes.remote},collaboratorClass(){return"files-collaborators-search-"+(this.isUser||this.isRemoteUser?this.isRemoteUser?"remote":"user":"group")}}};var Ei=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-flex uk-flex-middle",class:e.collaboratorClass},[e.isUser?i("avatar-image",{staticClass:"oc-mr-s",attrs:{width:48,userid:e.item.value.shareWith,"user-name":e.item.label}}):[e.item.value.shareType===e.shareTypes.group?i("oc-icon",{key:"avatar-group",staticClass:"oc-mr-s",attrs:{name:"group",size:"xlarge","accessible-label":e.$gettext("Group")}}):i("oc-icon",{key:"avatar-generic-person",staticClass:"oc-mr-s",attrs:{name:"person",size:"xlarge","accessible-label":e.$gettext("User")}})],e._v(" "),i("div",{staticClass:"files-collaborators-autocomplete-user-text"},[i("span",{staticClass:"oc-text-bold files-collaborators-autocomplete-username",domProps:{textContent:e._s(e.item.label)}}),e._v(" "),e.item.value.shareWithAdditionalInfo?i("span",{staticClass:"oc-text-muted files-collaborators-autocomplete-additional-info",domProps:{textContent:e._s(e.item.value.shareWithAdditionalInfo)}}):e._e(),e._v(" "),i("div",{staticClass:"files-collaborators-autocomplete-share-type",domProps:{textContent:e._s(e.getCollaboratorTypeLabel(e.item.value.shareType))}})])],2)};Ei._withStripped=!0;const ki={name:"NewCollaborator",components:{AutocompleteItem:e.normalizeComponent({render:Ei,staticRenderFns:[]},undefined,wi,undefined,false,undefined,!1,void 0,void 0,void 0),CollaboratorsEditOptions:gi},mixins:[si],data:()=>({autocompleteResults:[],announcement:"",autocompleteInProgress:!1,selectedCollaborators:[],selectedRole:null,additionalPermissions:null,saving:!1,expirationDate:null}),computed:{...e.mapGetters$1("Files",["currentFileOutgoingCollaborators","highlightedFile"]),...e.mapGetters$1(["user"]),$_ocCollaborationStatus_autocompleteDescriptionMessage(){return this.$gettext("Add new person by name, email or federation ID's")},$_announcementWhenCollaboratorAdded(){return this.$gettext("Person was added")},$_isValid(){return this.selectedCollaborators.length>0}},mounted(){this.$nextTick((()=>{this.$refs.ocSharingAutocomplete.focus()})),this.$_onAutocompleteInput=e.debounce(this.$_onAutocompleteInput,1e3)},methods:{...e.mapActions$1("Files",["addShare"]),close(){this.$emit("close")},$_onAutocompleteInput(e){const t=parseInt(this.user.capabilities.files_sharing.search_min_length,10);if(e.length<t)return this.autocompleteInProgress=!1,void(this.autocompleteResults=[]);this.autocompleteInProgress=!0,this.autocompleteResults=[],this.$client.shares.getRecipients(e,"folder").then((e=>{this.autocompleteInProgress=!1;const t=e.exact.users.concat(e.users).filter((e=>e.value.shareWith!==this.user.id)),i=e.exact.groups.concat(e.groups),s=e.exact.remotes.concat(e.remotes);this.autocompleteResults=t.concat(i,s).filter((e=>{const t=this.selectedCollaborators.find((t=>e.value.shareWith===t.value.shareWith&&parseInt(e.value.shareType,10)===parseInt(t.value.shareType,10))),i=this.currentFileOutgoingCollaborators.find((t=>e.value.shareWith===t.collaborator.name&&parseInt(e.value.shareType,10)===t.shareType));return!t&&!i&&(this.announcement=this.$_announcementWhenCollaboratorAdded,!0)}))})).catch((e=>{console.log(e),this.autocompleteInProgress=!1}))},filterRecipients:(e,t)=>e.value.shareType===n.remote||(e.label.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1||e.value.shareWith.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1||(e.value.shareWithAdditionalInfo||"").toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1),$_ocCollaborators_newCollaboratorsCancel(){this.selectedCollaborators=[],this.saving=!1,this.close()},share(){this.saving=!0;const t=new e._default({concurrency:4}),i=[];return this.selectedCollaborators.forEach((e=>{i.push(t.add((()=>this.addShare({client:this.$client,path:this.highlightedFile.path,$gettext:this.$gettext,shareWith:e.value.shareWith,shareType:e.value.shareType,permissions:F(this.selectedRole,this.additionalPermissions),expirationDate:this.expirationDate}))))})),Promise.all(i).then((()=>{this.$_ocCollaborators_newCollaboratorsCancel()}))},$_ocCollaborators_selectAutocompleteResult(e){this.selectedCollaborators.push(e)},$_ocCollaborators_removeFromSelection(e){this.selectedCollaborators=this.selectedCollaborators.filter((t=>e!==t))}}};var Ci=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"files-collaborators-collaborator-add-dialog"},[i("oc-autocomplete",{ref:"ocSharingAutocomplete",staticClass:"uk-width-1-1 oc-mb",attrs:{id:"oc-sharing-autocomplete",label:e.$gettext("Select a person to add"),items:e.autocompleteResults,"items-loading":e.autocompleteInProgress,"description-message":e.$_ocCollaborationStatus_autocompleteDescriptionMessage,filter:e.filterRecipients,"fill-on-selection":!1,"dropdown-class":"uk-width-1-1"},on:{input:e.$_ocCollaborators_selectAutocompleteResult,"update:input":e.$_onAutocompleteInput},scopedSlots:e._u([{key:"item",fn:function(e){var t=e.item;return[i("autocomplete-item",{attrs:{item:t}})]}}])}),e._v(" "),e.selectedCollaborators.length>0?i("div",[i("h4",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-initial oc-mb-rm"},[e._v("Selected people")]),e._v(" "),i("ul",{staticClass:"uk-list files-collaborators-collaborator-autocomplete-items oc-mt-s oc-mb-m"},e._l(e.selectedCollaborators,(function(t){return i("li",{key:t.value.shareWith+"-"+t.value.shareType,staticClass:"uk-flex files-collaborators-collaborator-autocomplete-item"},[i("oc-button",{staticClass:"files-collaborators-collaborator-autocomplete-item-remove oc-mr-xs",attrs:{"aria-label":e.$gettext("Delete share"),appearance:"raw",size:"small"},on:{click:function(i){return e.$_ocCollaborators_removeFromSelection(t)}}},[i("oc-icon",{attrs:{name:"close"}})],1),e._v(" "),i("autocomplete-item",{attrs:{item:t}})],1)})),0)]):e._e(),e._v(" "),i("collaborators-edit-options",{staticClass:"oc-mb",on:{optionChange:e.collaboratorOptionChanged}}),e._v(" "),i("hr",{staticClass:"divider"}),e._v(" "),i("oc-grid",{staticClass:"oc-mb",attrs:{gutter:"small"}},[i("div",[i("oc-button",{key:"new-collaborator-cancel-button",staticClass:"files-collaborators-collaborator-cancel",attrs:{disabled:e.saving},on:{click:e.$_ocCollaborators_newCollaboratorsCancel}},[i("translate",[e._v("Cancel")])],1)],1),e._v(" "),i("div",[e.saving?i("oc-button",{key:"new-collaborator-saving-button",attrs:{disabled:!0}},[i("oc-spinner",{attrs:{"aria-label":e.$gettext("Adding People"),size:"small"}}),e._v(" "),i("span",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"aria-hidden":!0}},[e._v("Adding People")])],1):i("oc-button",{key:"new-collaborator-save-button",attrs:{id:"files-collaborators-collaborator-save-new-share-button",disabled:!e.$_isValid,variation:"primary",appearance:"filled"},on:{click:e.share}},[i("translate",[e._v("Share")])],1)],1)]),e._v(" "),i("oc-hidden-announcer",{attrs:{level:"assertive",announcement:e.announcement}})],1)};Ci._withStripped=!0;const xi="showCollaborators",Si="editCollaborator",yi="newCollaborator";const Fi={title:e=>e("People"),name:"SharingAccordion",components:{EditCollaborator:_i,NewCollaborator:e.normalizeComponent({render:Ci,staticRenderFns:[]},undefined,ki,undefined,false,undefined,!1,void 0,void 0,void 0),ShowCollaborator:li},mixins:[si],data:()=>({currentShare:null,transitionGroupActive:!1,PANEL_SHOW:xi,PANEL_EDIT:Si,PANEL_NEW:yi}),computed:{...e.mapGetters$1("Files",["highlightedFile","currentFileOutgoingCollaborators","currentFileOutgoingSharesLoading","sharesTreeLoading"]),...e.mapGetters$1(["isOcis"]),...e.mapState("Files",["incomingShares","incomingSharesLoading","sharesTree","appSidebarAccordionContext"]),...e.mapState(["user"]),currentPanel(){return this.appSidebarAccordionContext||xi},$_transitionGroupEnter(){return this.transitionGroupActive?"uk-animation-slide-left-medium":""},$_transitionGroupLeave(){return this.transitionGroupActive?"uk-animation-slide-right-medium uk-animation-reverse":""},sharesLoading(){return this.currentFileOutgoingSharesLoading||this.incomingSharesLoading||this.sharesTreeLoading},$_currentUserAsCollaborator(){const e=this.currentUsersPermissions,t="folder"===this.highlightedFile.type;let i={name:""};return e>0?i=R(e,t,!this.isOcis):i.name="owner",{collaborator:{name:this.user.id,displayName:this.user.displayname,additionalInfo:null},owner:{},fileOwner:{},shareType:n.user,role:i}},$_ownerAsCollaborator(){if(!this.$_allIncomingShares.length)return null;const e=this.$_allIncomingShares[0],t={...e,collaborator:e.fileOwner,owner:{},fileOwner:{},key:"owner-"+e.id,role:this.ownerRole},i=new Map;return this.$_allIncomingShares.forEach((e=>{e.owner.name!==t.collaborator.name&&i.set(e.owner.name,e.owner)})),t.resharers=Array.from(i.values()).sort(this.collaboratorsComparator.bind(this)),t},$_allIncomingShares(){const e=[...this.incomingShares],t=c(this.highlightedFile.path,!0);return 0===t.length?[]:(t.pop(),t.forEach((t=>{const i=this.sharesTree[t];i&&i.forEach((t=>{t.incoming&&e.push(t)}))})),e)},collaborators(){return[...this.currentFileOutgoingCollaborators,...this.indirectOutgoingShares].sort(this.collaboratorsComparator).map((e=>(e.key="collaborator-"+e.id,e.owner.name!==e.fileOwner.name&&e.owner.name!==this.user.id&&(e.resharers=[e.owner]),e)))},indirectOutgoingShares(){const e=[],t=c(this.highlightedFile.path,!1);return 0===t.length?[]:(t.pop(),t.forEach((t=>{const i=this.sharesTree[t];i&&i.forEach((t=>{t.outgoing&&this.$_isCollaboratorShare(t)&&(t.key="indirect-collaborator-"+t.id,e.push(t))}))})),e)},$_ocCollaborators_canShare(){return this.highlightedFile.canShare()},noResharePermsMessage(){const e=this.$gettext("You don't have permission to share this file."),t=this.$gettext("You don't have permission to share this folder.");return"file"===this.highlightedFile.type?e:t},currentUsersPermissions(){if(this.$_allIncomingShares.length>0){let e=y.read;for(const t of this.$_allIncomingShares)e|=t.permissions;return e}return null}},watch:{highlightedFile:{handler:function(e,t){t!==e&&this.currentPanel===xi&&(this.transitionGroupActive=!1,this.$_reloadShares())},immediate:!0}},beforeDestroy(){this.SET_APP_SIDEBAR_ACCORDION_CONTEXT(null)},methods:{...e.mapActions$1("Files",["loadCurrentFileOutgoingShares","loadSharesTree","sharesClearState","deleteShare","loadIncomingShares","incomingSharesClearState"]),...e.mapMutations("Files",["SET_APP_SIDEBAR_ACCORDION_CONTEXT"]),$_isCollaboratorShare:e=>l.includes(e.shareType),collaboratorsComparator(e,t){const i=e.collaborator?e.collaborator.displayName:e.displayName,s=t.collaborator?t.collaborator.displayName:t.displayName,r=i.toLowerCase().trim(),o=s.toLowerCase().trim(),a=e.shareType===n.user||e.shareType===n.remote,l=t.shareType===n.user||e.shareType===n.remote,c=!e.indirect,d=!t.indirect;return a===l?c===d?r===o?oi.naturalSortCompare(e.stime+"",t.stime+""):oi.naturalSortCompare(r,o):c?-1:1:a?-1:1},$_ocCollaborators_addShare(){this.transitionGroupActive=!0,this.SET_APP_SIDEBAR_ACCORDION_CONTEXT(yi)},$_ocCollaborators_editShare(e){this.currentShare=e,this.SET_APP_SIDEBAR_ACCORDION_CONTEXT(Si)},toggleCollaboratorNew(e,t){this.toggleCollaborator(e,t,"#oc-sharing-autocomplete")},toggleCollaboratorEdit(e,t){this.toggleCollaborator(e,t,"#collaborator-edit-hint")},toggleCollaborator(e,t,i){this.focus({from:document.activeElement,to:e.$el.querySelector(i),revert:"beforeDestroy"===t})},$_ocCollaborators_deleteShare(e){this.transitionGroupActive=!0,this.deleteShare({client:this.$client,share:e})},$_ocCollaborators_showList(){this.SET_APP_SIDEBAR_ACCORDION_CONTEXT(xi),this.currentShare=null},$_ocCollaborators_isUser:e=>e.shareType===n.user||e.shareType===n.remote,$_ocCollaborators_isGroup:e=>e.shareType===n.group,$_reloadShares(){this.$_ocCollaborators_showList(),this.loadCurrentFileOutgoingShares({client:this.$client,path:this.highlightedFile.path,$gettext:this.$gettext}),this.loadIncomingShares({client:this.$client,path:this.highlightedFile.path,$gettext:this.$gettext}),this.loadSharesTree({client:this.$client,path:e.dirname(this.highlightedFile.path),$gettext:this.$gettext})}}};var Ri=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-position-relative",attrs:{id:"oc-files-sharing-sidebar"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.currentPanel===e.PANEL_SHOW,expression:"currentPanel === PANEL_SHOW"}],key:e.PANEL_SHOW,attrs:{"aria-hidden":e.currentPanel!==e.PANEL_SHOW}},[e.sharesLoading?i("oc-loader",{attrs:{"aria-label":e.$gettext("Loading people list")}}):[e.$_ocCollaborators_canShare?i("div",{staticClass:"oc-mt-s oc-mb-s"},[i("oc-button",{ref:"addCollaborators",staticClass:"files-collaborators-open-add-share-dialog-button",attrs:{variation:"primary"},on:{click:e.$_ocCollaborators_addShare}},[i("oc-icon",{attrs:{name:"add"}}),e._v(" "),i("translate",[e._v("Add people")])],1)],1):i("p",{key:"no-reshare-permissions-message",attrs:{"data-testid":"files-collaborators-no-reshare-permissions-message"},domProps:{textContent:e._s(e.noResharePermsMessage)}}),e._v(" "),e.$_ownerAsCollaborator?[i("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-invisible-sr",attrs:{id:"original-sharing-user"}},[e._v("File owner")]),e._v(" "),i("show-collaborator",{attrs:{collaborator:e.$_ownerAsCollaborator,"aria-describedby":"original-sharing-user"}}),e._v(" "),i("hr"),e._v(" "),i("show-collaborator",{attrs:{collaborator:e.$_currentUserAsCollaborator}})]:[i("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-invisible-sr",attrs:{id:"collaborator-as-fileowner"}},[e._v("\n          You are the file owner\n        ")]),e._v(" "),i("show-collaborator",{attrs:{collaborator:e.$_currentUserAsCollaborator,"aria-describedby":"collaborator-as-fileowner"}})],e._v(" "),e.collaborators.length>0?i("hr",{staticClass:"oc-mt-s oc-mb-s"}):e._e(),e._v(" "),i("transition-group",{staticClass:"uk-list uk-list-divider uk-overflow-hidden oc-m-rm",attrs:{id:"files-collaborators-list","enter-active-class":e.$_transitionGroupEnter,"leave-active-class":e.$_transitionGroupLeave,name:"custom-classes-transition",tag:"ul","aria-label":e.$gettext("Share receivers")}},e._l(e.collaborators,(function(t){return i("li",{key:t.key},[i("show-collaborator",{attrs:{collaborator:t,modifiable:!t.indirect},on:{onDelete:e.$_ocCollaborators_deleteShare,onEdit:e.$_ocCollaborators_editShare}})],1)})),0)]],2),e._v(" "),e.$_ocCollaborators_canShare&&e.currentPanel===e.PANEL_NEW?i("new-collaborator",{key:"new-collaborator",on:{close:e.$_ocCollaborators_showList,beforeDestroy:e.toggleCollaboratorNew,mounted:e.toggleCollaboratorNew}}):e._e(),e._v(" "),e.$_ocCollaborators_canShare&&e.currentPanel===e.PANEL_EDIT?i("edit-collaborator",{key:"edit-collaborator",attrs:{collaborator:e.currentShare},on:{close:e.$_ocCollaborators_showList,beforeDestroy:e.toggleCollaboratorEdit,mounted:e.toggleCollaboratorEdit}}):e._e()],1)};Ri._withStripped=!0;const $i=e.normalizeComponent({render:Ri,staticRenderFns:[]},undefined,Fi,undefined,false,undefined,!1,void 0,void 0,void 0);function Pi(e){return e}const Ti={components:{RoleItem:ui},mixins:[s],data(){return{saving:!1,password:null,errors:!1,name:null,hasPassword:!1,expireDate:null,placeholder:{mailTo:this.$gettext("Mail recipients"),mailBody:this.$gettext("Personal note")},selectedRole:null}},title:e=>e("Links"),computed:{...e.mapGetters$1("Files",["highlightedFile"]),...e.mapGetters$1(["getToken","capabilities"]),...e.mapState("Files",["publicLinkInEdit"]),$_isNew(){return!this.publicLinkInEdit.id},$_isFolder(){return"folder"===this.highlightedFile.type},$_isFile(){return!this.$_isFolder},$_hasChanges(){const t=this.publicLinkInEdit.expireDate?e.DateTime_1.fromHTTP(this.publicLinkInEdit.expireDate).toFormat("dd-MM-yyyy"):null;return(this.expireDate?e.DateTime_1.fromHTTP(this.expireDate).toFormat("dd-MM-yyyy"):null)!==t||this.name!==this.publicLinkInEdit.name||this.selectedRole.permissions!==this.publicLinkInEdit.permissions||(this.publicLinkInEdit.hasPassword?null!==this.password:null!==this.password&&this.password.trim().length>0)},$_sendMailEnabled(){return Object.keys(this.capabilities.files_sharing.public.send_mail).length>0},roles(){return(({isFolder:e=!1,$gettext:t=Pi})=>{const i=[{name:"viewer",label:t("Viewer"),description:t("Recipients can view and download contents."),permissions:1}];return e&&i.push({name:"contributor",label:t("Contributor"),description:t("Recipients can view, download and upload contents."),permissions:5},{name:"editor",label:t("Editor"),description:t("Recipients can view, download, edit, delete and upload contents."),permissions:15},{name:"uploader",label:t("Uploader"),description:t("Recipients can upload but existing contents are not revealed."),permissions:4}),i})({$gettext:this.$gettext,isFolder:this.$_isFolder})},$_expirationDate(){const e=this.capabilities.files_sharing.public.expire_date;return{enabled:!!e.enabled,days:!!e.days&&e.days,enforced:!!e.enforced}},$_minExpirationDate:()=>e.DateTime_1.now().plus({days:1}).endOf("day").toISO(),$_maxExpirationDate(){if(!this.$_expirationDate.enforced)return null;const t=parseInt(this.$_expirationDate.days,10);return e.DateTime_1.now().plus({days:t}).endOf("day").toISO()},$_expirationIsValid(){return!(this.$_expirationDate.enforced&&""===this.expireDate)},$_passwordIsValid(){return!!this.hasPassword||!(this.$_passwordEnforced&&(""===this.password||null===this.password))},$_isValid(){return this.$_expirationIsValid&&this.$_passwordIsValid},$_passwordEnforced(){const e=parseInt(this.selectedRole.permissions,10),t=this.capabilities.files_sharing.public.password.enforced_for;return 1===e&&"1"===t.read_only||(4===e&&"1"===t.upload_only||e>=5&&"1"===t.read_write)},expirationDateLabel(){return this.$_expirationDate.enforced?this.$gettext("Expiration date (required)"):this.$gettext("Expiration date")},passwordLabel(){return this.$_passwordEnforced?this.$gettext("Password (required)"):this.$gettext("Password")}},created(){this.name=this.publicLinkInEdit.name,this.hasPassword=this.publicLinkInEdit.hasPassword,this.expireDate=this.publicLinkInEdit.expireDate,this.setRole()},methods:{...e.mapActions$1("Files",["addLink","updateLink"]),...e.mapMutations("Files",["SET_APP_SIDEBAR_ACCORDION_CONTEXT"]),setRole(){const e=parseInt(this.publicLinkInEdit.permissions,10);if(e){const t=this.roles.find((t=>t.permissions===e));if(t)return void(this.selectedRole=t)}this.selectedRole=this.roles[0]},$_addLink(){this.saving=!0;const e={expireDate:this.expireDate,permissions:this.selectedRole.permissions,name:this.name};null!==this.password&&(e.password=this.password),this.addLink({path:this.highlightedFile.path,client:this.$client,$gettext:this.$gettext,params:e}).then((e=>{this.saving=!1,this.errors=!1,this.$_closeForm()})).catch((e=>{this.saving=!1,this.errors=e}))},$_updateLink(){this.saving=!0;const e={expireDate:this.expireDate,permissions:this.selectedRole.permissions,name:this.name};null!==this.password&&(e.password=this.password),this.updateLink({id:this.publicLinkInEdit.id,client:this.$client,$gettext:this.$gettext,params:e}).then((()=>{this.saving=!1,this.errors=!1,this.$_closeForm()})).catch((e=>{this.saving=!1,this.errors=e}))},$_closeForm(){this.SET_APP_SIDEBAR_ACCORDION_CONTEXT("showLinks")},removePassword:function(){this.password="",this.hasPassword=!1}}};var Ai=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-files-edit-public-link oc-files-file-link-form"},[i("form",{on:{submit:function(e){e.preventDefault()}}},[i("transition",{attrs:{"enter-active-class":"uk-animation-slide-top-small","leave-active-class":"uk-animation-slide-top-small uk-animation-reverse",name:"custom-classes-transition"}},[e.errors?i("oc-alert",{staticClass:"oc-files-file-link-error-alert",attrs:{variation:"danger"}},[e._v("\n        "+e._s(e.errors)+"\n      ")]):e._e()],1),e._v(" "),i("div",{staticClass:"oc-mb"},[i("oc-text-input",{attrs:{id:"oc-files-file-link-name",label:e.$gettext("Name")},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),i("translate",{staticClass:"oc-label",attrs:{tag:"label",for:"files-file-link-role-button"}},[e._v("\n      Role\n    ")]),e._v(" "),i("oc-select",{staticClass:"oc-mb files-file-link-role-button-wrapper",attrs:{"input-id":"files-file-link-role-button",options:e.roles,clearable:!1,label:"label"},scopedSlots:e._u([{key:"option",fn:function(e){return[i("role-item",{attrs:{role:e}})]}},{key:"no-options",fn:function(){return[e._v("\n        No matching role found\n      ")]},proxy:!0}]),model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}}),e._v(" "),i("div",{staticClass:"oc-mb uk-grid-small uk-flex",attrs:{"uk-grid":""}},[e.$_expirationDate?i("div",{staticClass:"uk-width-1-1 uk-width-2-5@m"},[i("div",{staticClass:"uk-position-relative"},[i("oc-datepicker",{key:"oc-datepicker-"+e.expireDate,attrs:{id:"oc-files-file-link-expire-date",label:e.expirationDateLabel,date:e.expireDate,"max-datetime":e.$_maxExpirationDate,"min-datetime":e.$_minExpirationDate},on:{input:function(t){e.expireDate=t}}}),e._v(" "),!e.$_expirationDate.enforced&&e.expireDate?i("oc-button",{staticClass:"oc-mt-s",attrs:{id:"oc-files-file-link-expire-date-delete",appearance:"raw"},domProps:{textContent:e._s(e.$gettext("Remove expiration date"))},on:{click:function(t){e.expireDate=null}}}):e._e()],1)]):e._e(),e._v(" "),i("div",{staticClass:"uk-width-1-1 uk-width-3-5@m"},[i("oc-text-input",{attrs:{id:"oc-files-file-link-password",type:"password",label:e.passwordLabel},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),e.$_passwordEnforced||!e.password&&!e.hasPassword?e._e():i("oc-button",{staticClass:"oc-mt-s",attrs:{id:"oc-files-file-link-password-delete",appearance:"raw"},domProps:{textContent:e._s(e.$gettext("Remove password"))},on:{click:e.removePassword}})],1)]),e._v(" "),i("hr",{staticClass:"divider"}),e._v(" "),i("oc-grid",{staticClass:"oc-mb",attrs:{gutter:"small"}},[i("div",[i("oc-button",{attrs:{id:"oc-files-file-link-cancel",disabled:e.saving},on:{click:e.$_closeForm}},[i("translate",[e._v("Cancel")])],1)],1),e._v(" "),i("div",[e.saving?i("oc-button",{attrs:{variation:"primary",appearance:"filled",disabled:""}},[e.$_isNew?[i("oc-spinner",{attrs:{"aria-label":e.$gettext("Creating Public Link"),size:"small"}}),e._v(" "),i("span",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"aria-hidden":!0}},[e._v("Creating")])]:[i("oc-spinner",{attrs:{"aria-label":e.$gettext("Saving Public Link"),size:"small"}}),e._v(" "),i("span",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"aria-hidden":!0}},[e._v("Saving")])]],2):[e.$_isNew?i("oc-button",{attrs:{id:"oc-files-file-link-create",disabled:!e.$_isValid,variation:"primary",appearance:"filled"},on:{click:e.$_addLink}},[i("translate",[e._v("Create")])],1):i("oc-button",{attrs:{id:"oc-files-file-link-save",disabled:!e.$_isValid||!e.$_hasChanges,variation:"primary",appearance:"filled"},on:{click:e.$_updateLink}},[i("translate",[e._v("Save")])],1)]],2)])],1)])};Ai._withStripped=!0;const Ii=e.normalizeComponent({render:Ai,staticRenderFns:[]},undefined,Ti,undefined,false,undefined,!1,void 0,void 0,void 0);const Di={name:"LinkActions",props:{link:{type:Object,required:!0}},data:()=>({removalInProgress:!1}),computed:{editButtonLabel(){return this.$gettext("Edit public link")},deleteButtonLabel(){return this.$gettext("Delete public link")}},methods:{...e.mapActions$1(["showMessage","createModal","hideModal"]),...e.mapActions$1("Files",["removeLink"]),...e.mapMutations("Files",["TRIGGER_PUBLIC_LINK_EDIT"]),$_removeLink(){const e={variation:"danger",title:this.$gettext("Delete public link"),message:this.$gettext("Are you sure you want to delete this link? Recreating the same link again is not possible."),cancelText:this.$gettext("Cancel"),confirmText:this.$gettext("Delete"),onCancel:this.hideModal,onConfirm:this.deleteLink};this.createModal(e)},deleteLink(){this.hideModal(),this.removeLink({client:this.$client,share:this.link}),this.showMessage({title:this.$gettext("Public link was successfully deleted"),autoClose:{enabled:!0}})},editLink(){this.TRIGGER_PUBLIC_LINK_EDIT(this.link)}}};var Li=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-flex uk-flex-nowrap uk-flex-middle"},[e.removalInProgress?i("oc-spinner",{attrs:{"aria-label":e.$gettext("Removing public link")}}):[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.editButtonLabel,expression:"editButtonLabel"}],staticClass:"oc-files-file-link-edit oc-mr-xs",attrs:{"aria-label":e.editButtonLabel,appearance:"raw"},on:{click:e.editLink}},[i("oc-icon",{attrs:{name:"edit"}})],1),e._v(" "),i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.deleteButtonLabel,expression:"deleteButtonLabel"}],staticClass:"oc-files-file-link-delete",attrs:{"aria-label":e.deleteButtonLabel,appearance:"raw"},on:{click:e.$_removeLink}},[i("oc-icon",{attrs:{name:"delete"}})],1)]],2)};Li._withStripped=!0;const Oi=e.normalizeComponent({render:Li,staticRenderFns:[]},undefined,Di,undefined,false,undefined,!1,void 0,void 0,void 0);const Ni={props:{value:{type:String,required:!0},label:{type:String,required:!0},successMsgTitle:{type:String,required:!0},successMsgText:{type:String,required:!0}},data:()=>({copied:!1,timeout:null}),methods:{...e.mapActions$1(["showMessage"]),copyValueToClipboard(){e.copyToClipboard(this.value),this.clipboardSuccessHandler(),this.showMessage({title:this.successMsgTitle,desc:this.successMsgText,status:"success",autoClose:{enabled:!0}})},clipboardSuccessHandler(){this.copied=!0,clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.copied=!1}),550)}}};var Ui=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.label,expression:"label"}],attrs:{"aria-label":e.label,appearance:"raw"},on:{click:e.copyValueToClipboard}},[e.copied?i("oc-icon",{key:"oc-copy-to-clipboard-copied",staticClass:"_clipboard-success-animation",attrs:{name:"ready"}}):i("oc-icon",{key:"oc-copy-to-clipboard-copy",attrs:{name:"copy_to_clipboard"}})],1)};Ui._withStripped=!0;const zi=e.normalizeComponent({render:Ui,staticRenderFns:[]},undefined,Ni,"data-v-18232aa2",false,undefined,!1,void 0,void 0,void 0);const Mi={name:"LinkInfo",components:{CopyToClipboardButton:zi},mixins:[s],props:{link:{type:Object,required:!0}},computed:{linkName(){return this.link.name?this.link.name:this.link.token},roleTagIcon(){switch(this.link.description){case"Viewer":return"remove_red_eye";case"Contributor":case"Editor":return"edit";case"Uploader":return"file_upload";default:return"key"}},viaLabel(){if(!this.link.indirect)return null;const t=this.$gettext("Via %{folderName}");return this.$gettextInterpolate(t,{folderName:e.basename(this.link.path)},!0)},viaRouterParams(){const t=this.link.path;return{name:"files-personal",params:{item:e.dirname(t)||"/"},query:{scrollTo:e.basename(t)}}},viaTooltip(){return this.$gettext("Navigate to the parent")},copyToClipboardLabel(){return this.$gettext("Copy link to clipboard")},copyToClipboardSuccessMsgTitle(){return this.$gettext("Public link copied")}},methods:{getCopyToClipboardSuccessMsgText(e){const t=this.$gettext('The public link "%{linkName}" has been copied to your clipboard.');return this.$gettextInterpolate(t,{linkName:e.name},!0)}}};var Gi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-width-expand"},[i("div",{staticClass:"oc-mb-s uk-width-1-1"},[i("h5",{staticClass:"oc-text-bold uk-text-truncate oc-files-file-link-name oc-my-rm oc-text-initial",domProps:{textContent:e._s(e.linkName)}}),e._v(" "),i("div",{staticClass:"uk-flex uk-flex-middle uk-width-1-1"},[i("a",{staticClass:"oc-files-file-link-url uk-text-truncate",attrs:{href:e.link.url,target:"_blank"},domProps:{textContent:e._s(e.link.url)}}),e._v(" "),i("copy-to-clipboard-button",{staticClass:"oc-files-public-link-copy-url oc-ml-xs",attrs:{value:e.link.url,label:e.copyToClipboardLabel,"success-msg-title":e.copyToClipboardSuccessMsgTitle,"success-msg-text":e.getCopyToClipboardSuccessMsgText(e.link)}})],1)]),e._v(" "),i("oc-grid",{attrs:{gutter:"small"}},[i("div",[i("oc-tag",{staticClass:"oc-files-file-link-role"},[i("oc-icon",{attrs:{name:e.roleTagIcon}}),e._v("\n        "+e._s(e.link.description)+"\n      ")],1)],1),e._v(" "),e.link.expiration?i("div",[i("oc-tag",{staticClass:"oc-files-public-link-expires"},[i("oc-icon",{attrs:{name:"text-calendar"}}),e._v(" "),i("translate",{attrs:{"translate-params":{expires:e.formDateFromNow(e.link.expiration,"ISO")}}},[e._v("\n          Expires %{expires}\n        ")])],1)],1):e._e(),e._v(" "),e.link.password?i("div",[i("oc-tag",[i("oc-icon",{attrs:{name:"lock"}}),e._v(" "),i("translate",[e._v("Password protected")])],1)],1):e._e(),e._v(" "),e.link.indirect?i("div",[i("oc-tag",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.viaTooltip,expression:"viaTooltip"}],staticClass:"oc-files-file-link-via",attrs:{type:"router-link",to:e.viaRouterParams}},[i("oc-icon",{attrs:{name:"exit_to_app"}}),e._v(" "),i("span",{staticClass:"uk-text-truncate files-file-links-link-via-label",domProps:{textContent:e._s(e.viaLabel)}})],1)],1):e._e()])],1)};Gi._withStripped=!0;const Bi={name:"PublicLinkListItem",components:{LinkActions:Oi,LinkInfo:e.normalizeComponent({render:Gi,staticRenderFns:[]},undefined,Mi,undefined,false,undefined,!1,void 0,void 0,void 0)},props:{link:{type:Object,required:!0}}};var Hi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("oc-grid",{staticClass:"files-file-links-link files-file-links-link-table-row-info uk-flex uk-flex-top uk-flex-between",attrs:{gutter:"small"}},[i("link-info",{attrs:{link:e.link}}),e._v(" "),e.link.indirect?e._e():i("link-actions",{attrs:{link:e.link}})],1)};Hi._withStripped=!0;const Vi=e.normalizeComponent({render:Hi,staticRenderFns:[]},undefined,Bi,"data-v-28e8944e",false,undefined,!1,void 0,void 0,void 0);const qi={name:"PrivateLinkItem",components:{CopyToClipboardButton:zi},computed:{...e.mapGetters$1("Files",["highlightedFile"]),...e.mapGetters$1(["capabilities"]),link(){if(this.highlightedFile.isMounted()){const e=encodeURIComponent(this.highlightedFile.name);return window.location.href.split("?")[0]+`?scrollTo=${e}`}return this.highlightedFile.privateLink},privateLinkEnabled(){return this.capabilities.files.privateLinks},copyToClipboardLabel(){return this.$gettext("Copy private link to clipboard")},copyToClipboardSuccessMsgTitle(){return this.$gettext("Private link copied")},copyToClipboardSuccessMsgText(){return this.$gettext("The private link has been copied to your clipboard.")}}};var ji=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.privateLinkEnabled?i("div",[i("h4",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-bold oc-m-rm oc-text-initial"},[e._v("Private Link")]),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-muted oc-my-rm"},[e._v("Only invited people can use this link.")]),e._v(" "),i("div",{staticClass:"uk-width-1-1 uk-flex uk-flex-middle"},[i("a",{staticClass:"uk-text-truncate",attrs:{href:e.link,target:"_blank"},domProps:{textContent:e._s(e.link)}}),e._v(" "),i("copy-to-clipboard-button",{staticClass:"oc-files-private-link-copy-url oc-ml-xs",attrs:{value:e.link,label:e.copyToClipboardLabel,"success-msg-title":e.copyToClipboardSuccessMsgTitle,"success-msg-text":e.copyToClipboardSuccessMsgText}})],1),e._v(" "),i("hr")]):e._e()};ji._withStripped=!0;const Wi="showLinks";const Yi={components:{LinkEdit:Ii,ListItem:Vi,PrivateLinkItem:e.normalizeComponent({render:ji,staticRenderFns:[]},undefined,qi,undefined,false,undefined,!1,void 0,void 0,void 0)},mixins:[s],title:e=>e("Links"),data:()=>({PANEL_SHOW:Wi,PANEL_EDIT:"editPublicLink"}),computed:{...e.mapGetters$1("Files",["highlightedFile","currentFileOutgoingLinks","currentFileOutgoingSharesLoading","sharesTreeLoading"]),...e.mapGetters$1(["getToken","capabilities","configuration"]),...e.mapState("Files",["sharesTree","appSidebarAccordionContext"]),$_transitionGroupEnter:()=>"uk-animation-slide-left-medium",$_transitionGroupLeave:()=>"uk-animation-slide-right-medium uk-animation-reverse",canCreatePublicLinks(){return this.highlightedFile.canShare()},noResharePermsMessage(){const e=this.$gettext("You don't have permission to share this file."),t=this.$gettext("You don't have permission to share this folder.");return"file"===this.highlightedFile.type?e:t},linksLoading(){return this.currentFileOutgoingSharesLoading||this.sharesTreeLoading},links(){return[...this.currentFileOutgoingLinks,...this.indirectLinks].sort(this.linksComparator).map((e=>(e.key="direct-link-"+e.id,e)))},indirectLinks(){const e=[],t=c(this.highlightedFile.path,!1);return 0===t.length?[]:(t.pop(),t.forEach((t=>{const i=V(this.sharesTree[t]);i&&i.forEach((t=>{t.outgoing&&t.shareType===n.link&&(t.key="indirect-link-"+t.id,e.push(t))}))})),e.sort(this.linksComparator))},$_noPublicLinks(){return 0===this.links.length},$_expirationDate(){const e=this.capabilities.files_sharing.public.expire_date;return{enabled:!!e.enabled,days:!!e.days&&e.days,enforced:"1"===e.enforced}},$_addButtonLabel(){return this.$gettext("Public link")},$_addButtonAriaLabel(){return this.$gettext("Create new public link")},currentPanel(){return this.appSidebarAccordionContext||Wi}},watch:{highlightedFile(e,t){t!==e&&this.$_reloadLinks()}},mounted(){this.$_reloadLinks()},beforeDestroy(){this.SET_APP_SIDEBAR_ACCORDION_CONTEXT(null)},methods:{...e.mapActions$1("Files",["loadSharesTree","loadCurrentFileOutgoingShares"]),...e.mapMutations("Files",["TRIGGER_PUBLIC_LINK_CREATE","SET_APP_SIDEBAR_ACCORDION_CONTEXT"]),$_showList(){this.SET_APP_SIDEBAR_ACCORDION_CONTEXT(Wi)},$_reloadLinks(){this.$_showList(),this.loadCurrentFileOutgoingShares({client:this.$client,path:this.highlightedFile.path,$gettext:this.$gettext}),this.loadSharesTree({client:this.$client,path:e.dirname(this.highlightedFile.path),$gettext:this.$gettext})},linksComparator(e,t){const i=e.name.toLowerCase().trim(),s=t.name.toLowerCase().trim(),r=!e.indirect;return r===!t.indirect?i===s?e.stime-t.stime:oi.naturalSortCompare(i,s):r?-1:1},addNewLink(){this.TRIGGER_PUBLIC_LINK_CREATE({name:this.capabilities.files_sharing.public.defaultPublicLinkShareName,expireDate:this.$_expirationDate.days?e.DateTime_1.now().plus({days:this.$_expirationDate.days}).endOf("day").toISO():null})}}};var Xi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-position-relative",attrs:{id:"oc-files-file-link"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.appSidebarAccordionContext===e.PANEL_SHOW,expression:"appSidebarAccordionContext === PANEL_SHOW"}],key:e.PANEL_SHOW,attrs:{"aria-hidden":e.appSidebarAccordionContext!==e.PANEL_SHOW}},[e.linksLoading?i("oc-loader",{attrs:{"aria-label":e.$gettext("Loading list of file links")}}):[i("private-link-item"),e._v(" "),i("h4",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-bold oc-m-rm oc-text-initial"},[e._v("Public Links")]),e._v(" "),e.canCreatePublicLinks?i("div",{staticClass:"oc-my-s"},[i("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-muted"},[e._v("\n          Any external person with the respective link can access this resource. No sign-in\n          required. Assign a password to avoid unintended document exposure.\n        ")]),e._v(" "),i("oc-button",{attrs:{id:"files-file-link-add",icon:"add",variation:"primary","aria-label":e.$_addButtonAriaLabel},on:{click:e.addNewLink}},[i("oc-icon",{attrs:{name:"add"}}),e._v("\n          "+e._s(e.$_addButtonLabel)+"\n        ")],1)],1):i("p",{staticClass:"oc-mt-s",attrs:{"data-testid":"files-links-no-reshare-permissions-message"},domProps:{textContent:e._s(e.noResharePermsMessage)}}),e._v(" "),i("transition-group",{staticClass:"uk-list uk-list-divider uk-overflow-hidden oc-m-rm",attrs:{"enter-active-class":e.$_transitionGroupEnter,"leave-active-class":e.$_transitionGroupLeave,name:"custom-classes-transition",tag:"ul"}},e._l(e.links,(function(e){return i("li",{key:e.key},[i("list-item",{attrs:{link:e}})],1)})),0),e._v(" "),e.$_noPublicLinks&&e.canCreatePublicLinks?i("p",{directives:[{name:"translate",rawName:"v-translate"}],key:"oc-file-links-no-results",staticClass:"oc-my-rm"},[e._v("\n        No public links\n      ")]):e._e()]],2),e._v(" "),e.appSidebarAccordionContext===e.PANEL_EDIT?i("div",{key:e.PANEL_EDIT},[i("transition",{attrs:{"enter-active-class":"uk-animation-slide-right uk-animation-fast","leave-active-class":"uk-animation-slide-right uk-animation-reverse uk-animation-fast",name:"custom-classes-transition"}},[i("link-edit")],1)],1):e._e()])};Xi._withStripped=!0;const Qi=e.normalizeComponent({render:Xi,staticRenderFns:[]},undefined,Yi,undefined,false,undefined,!1,void 0,void 0,void 0);function Ki(e,t){return t.state.user.capabilities.files_sharing&&t.state.user.capabilities.files_sharing.api_enabled&&e.canShare()}var Zi={collaborators:{id:"collaborators",label:"Add people",icon:"group-add",handler:function(e){e.store.dispatch("Files/setHighlightedFile",e.item),setTimeout((()=>{e.store.commit("Files/SET_APP_SIDEBAR_EXPANDED_ACCORDION","sharing-item"),e.store.commit("Files/SET_APP_SIDEBAR_ACCORDION_CONTEXT","newCollaborator")}))},displayed:Ki},publicLink:{id:"public-link",label:"Create and copy public link",icon:"link-add",handler:function(t){const i={name:"Quick action link",permissions:1},s=t.store.state.user.capabilities.files_sharing.public.expire_date;return s.enabled&&(i.expireDate=e.DateTime_1.now().plus({days:parseInt(s.days,10)}).endOf("day").toISO()),new Promise(((s,r)=>{t.store.dispatch("Files/setHighlightedFile",t.item).then((()=>{t.store.dispatch("Files/addLink",{path:t.item.path,client:t.client,params:i}).then((i=>{e.copyToClipboard(i.url),t.store.dispatch("showMessage",{title:"Public link created",desc:"Public link has been successfully created and copied into your clipboard.",status:"success",autoClose:{enabled:!0}}),s()})).catch((e=>{r(e)}))}))}))},displayed:Ki}},Ji=function(){function e(e,t){this.value=e,this.expires=t?(new Date).getTime()+t:0}return Object.defineProperty(e.prototype,"expired",{get:function(){return this.expires>0&&this.expires<(new Date).getTime()},enumerable:!1,configurable:!0}),e}(),es=function(){function t(e){this.ttl=e.ttl||0,this.capacity=e.capacity||0,this.map=new Map}return t.prototype.set=function(e,t,i){return this.evict(),this.map.set(e,new Ji(t,isNaN(i)?this.ttl:i)),t},t.prototype.get=function(e){this.evict();var t=this.map.get(e);if(t)return t.value},t.prototype.delete=function(e){return this.map.delete(e)},t.prototype.clear=function(){return this.map.clear()},t.prototype.entries=function(){return this.evict(),e.__spreadArray([],e.__read(this.map.entries())).map((function(e){return[e[0],e[1].value]}))},t.prototype.keys=function(){return this.evict(),e.__spreadArray([],e.__read(this.map.keys()))},t.prototype.values=function(){return this.evict(),e.__spreadArray([],e.__read(this.map.values())).map((function(e){return e.value}))},t.prototype.evict=function(){var t,i,s=this;if(this.map.forEach((function(e,t){e.expired&&s.delete(t)})),this.capacity)try{for(var r=e.__values(e.__spreadArray([],e.__read(this.map.entries()))),o=r.next();!o.done;o=r.next()){var a=e.__read(o.value,1)[0];if(this.map.size<=this.capacity)break;this.delete(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}},t}(),ts=new es({ttl:1e4,capacity:250}),is=new es({ttl:1e4,capacity:250}),ss=new(function(){function e(){}return Object.defineProperty(e.prototype,"avatarUrl",{get:function(){return is},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filePreview",{get:function(){return ts},enumerable:!1,configurable:!0}),e}()),rs=function(){function t(t){this.cancelToken=e.axios.CancelToken.source(),this.instance=e.axios.create(t)}return t.prototype.cancel=function(e){this.cancelToken.cancel(e)},t.prototype.delete=function(e,t){return this.instance.delete(e,this.obtainConfig(t))},t.prototype.get=function(e,t){return this.instance.get(e,this.obtainConfig(t))},t.prototype.head=function(e,t){return this.instance.head(e,this.obtainConfig(t))},t.prototype.options=function(e,t){return this.instance.options(e,this.obtainConfig(t))},t.prototype.patch=function(e,t,i){return this.instance.patch(e,t,this.obtainConfig(i))},t.prototype.post=function(e,t,i){return this.instance.post(e,t,this.obtainConfig(i))},t.prototype.put=function(e,t,i){return this.instance.put(e,t,this.obtainConfig(i))},t.prototype.request=function(e){return this.instance.request(this.obtainConfig(e))},t.prototype.obtainConfig=function(t){return e.merge({cancelToken:this.cancelToken.token},t)},t}(),os=new(function(){function e(){}return e.prototype.httpAuthenticated=function(e){return this.httpAuthenticatedClient&&this.httpAuthenticatedClient.token===e||(this.httpAuthenticatedClient={token:e,instance:new rs({headers:{Authorization:"Bearer "+e,"X-Requested-With":"XMLHttpRequest"}})}),this.httpAuthenticatedClient.instance},Object.defineProperty(e.prototype,"httpUnAuthenticated",{get:function(){return this.httpUnAuthenticatedClient||(this.httpUnAuthenticatedClient=new rs({headers:{"X-Requested-With":"XMLHttpRequest"}})),this.httpUnAuthenticatedClient},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"owncloudSdk",{get:function(){return window.Vue.prototype.$client},enumerable:!1,configurable:!0}),e}()),as=function(t){return e.queryString.stringify(e.__assign(e.__assign(e.__assign({scalingup:t.scalingup||0,preview:Object.hasOwnProperty.call(t,"preview")?t.preview:1,a:Object.hasOwnProperty.call(t,"a")?t.a:1},t.etag&&{c:t.etag.replaceAll('"',"")}),t.dimensions&&t.dimensions[0]&&{x:t.dimensions[0]}),t.dimensions&&t.dimensions[1]&&{y:t.dimensions[1]}))},ns=function(i,s){return void 0===s&&(s=!1),e.__awaiter(void 0,void 0,void 0,(function(){var r,o;return e.__generator(this,(function(e){switch(e.label){case 0:if(s)return[2,ls(i)];r=[i.server,"remote.php/dav/files/",i.userId,t.encodePath(i.resource.path),"?",as({etag:i.resource.etag,dimensions:i.dimensions})].join(""),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,os.httpAuthenticated(i.token).get(r,{responseType:"blob"})];case 2:return o=e.sent().data,[2,window.URL.createObjectURL(o)];case 3:return e.sent(),[3,4];case 4:return[2]}}))}))},ls=function(t){return e.__awaiter(void 0,void 0,void 0,(function(){var i,s;return e.__generator(this,(function(r){switch(r.label){case 0:if((i=ss.filePreview.get(t.resource.id))&&i.etag===t.resource.etag&&e.isEqual(t.dimensions,i.dimensions))return[2,i.src];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,ns(t)];case 2:return s=r.sent(),[2,ss.filePreview.set(t.resource.id,{src:s,etag:t.resource.etag,dimensions:t.dimensions},0).src];case 3:return r.sent(),[3,4];case 4:return[2]}}))}))},cs=function(t,i){return void 0===i&&(i=!1),e.__awaiter(void 0,void 0,void 0,(function(){var s,r,o,a,n,l;return e.__generator(this,(function(c){switch(c.label){case 0:return s=t.size||Be.Avatar,i?[2,ds(e.__assign(e.__assign({},t),{size:s}))]:(r=[t.server,"remote.php/dav/avatars/",t.username,"/"+s+".png"].join(""),[4,os.httpAuthenticated(t.token).head(r)]);case 1:if(o=c.sent(),a=o.status,n=o.statusText,200!==a)throw new Error(n);return(l=os.owncloudSdk)&&"function"==typeof l.signUrl?[2,l.signUrl(r)]:[2,r]}}))}))},ds=function(t){return e.__awaiter(void 0,void 0,void 0,(function(){var i,s;return e.__generator(this,(function(e){switch(e.label){case 0:if((i=ss.avatarUrl.get(t.username))&&i.size===t.size)return[2,i.src];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,cs(t)];case 2:return s=e.sent(),[2,ss.avatarUrl.set(t.username,{src:s,size:t.size},0).src];case 3:return e.sent(),[3,4];case 4:return[2]}}))}))};function us(e,t,i){const s=[...e.files],r=s.findIndex((e=>e.id===t.id)),o=r>-1;(o||i)&&(o?s.splice(r,1,t):s.push(t),e.files=s)}function hs(e){return e.map((e=>parseInt(e.size))).reduce(((e,t)=>e+t),0)}function ps(e){return{files:e.filter((e=>"file"===e.type)).length,folders:e.filter((e=>"folder"===e.type)).length}}const ms={name:"Files",id:"files",icon:"folder",isFileEditor:!1,extensions:[],fileSideBars:[{app:"details-item",icon:"info_outline",component:Qt,enabled:()=>!0},{app:"actions-item",component:Jt,icon:"slideshow",enabled:()=>!0},{app:"sharing-item",icon:"group",component:$i,enabled:e=>!!e.files_sharing&&e.files_sharing.api_enabled},{app:"links-item",icon:"link",component:Qi,enabled:e=>!!e.files_sharing&&e.files_sharing.public.enabled},{app:"versions-item",icon:"file_version",component:ii,enabled:(e,t)=>!!e.core&&t&&"folder"!==t.type}]};return{appInfo:ms,store:{namespaced:!0,state:{currentFolder:null,files:[],filesSearched:[],selected:[],inProgress:[],searchTermGlobal:"",davProperties:["{http://owncloud.org/ns}permissions","{http://owncloud.org/ns}favorite","{http://owncloud.org/ns}fileid","{http://owncloud.org/ns}owner-id","{http://owncloud.org/ns}owner-display-name","{http://owncloud.org/ns}share-types","{http://owncloud.org/ns}privatelink","{DAV:}getcontentlength","{http://owncloud.org/ns}size","{DAV:}getlastmodified","{DAV:}getetag","{DAV:}resourcetype","{http://owncloud.org/ns}downloadURL"],dropzone:!1,shareOpen:null,versions:[],currentFileOutgoingShares:[],currentFileOutgoingSharesError:null,currentFileOutgoingSharesLoading:!1,incomingShares:[],incomingSharesError:null,incomingSharesLoading:!1,sharesTree:{},sharesTreeError:null,sharesTreeLoading:!1,loadingFolder:!1,highlightedResourceId:null,publicLinkPassword:null,uploaded:[],actionsInProgress:[],appSidebarExpandedAccordion:null,appSidebarAccordionContext:null,publicLinkInEdit:{id:null,name:"",permissions:1,hasPassword:!1,expireDate:null},currentPage:1,filesPageLimit:100,areHiddenFilesShown:!0},getters:{inProgress:e=>e.inProgress,selectedFiles:e=>0===e.selected.length?[]:e.selected,files:e=>e.files,filesAll:e=>e.searchTermGlobal?e.filesSearched:e.files,currentFolder:e=>e.currentFolder,flatFileList:e=>!1==!!e.currentFolder,searchTerm:e=>e.searchTermGlobal,atSearchPage:e=>""!==e.searchTermGlobal,pages:(e,t)=>Math.ceil(t.filesAll.length/e.filesPageLimit),activeFiles:(e,t)=>{let i=[].concat(t.filesAll);if(e.areHiddenFilesShown||(i=i.filter((e=>!e.name.startsWith(".")))),e.filesPageLimit>0){const t=(e.currentPage-1)*e.filesPageLimit;return i.splice(t,e.filesPageLimit)}return i},activeFilesSize:(e,t)=>hs(t.activeFiles),activeFilesCount:(e,t)=>ps(t.activeFiles),totalFilesSize:(e,t)=>hs(t.filesAll),totalFilesCount:(e,t)=>ps(t.filesAll),davProperties:e=>e.davProperties,dropzone:e=>e.dropzone,currentFileOutgoingCollaborators:e=>e.currentFileOutgoingShares.filter((e=>l.includes(e.shareType))),currentFileOutgoingLinks:e=>e.currentFileOutgoingShares.filter((e=>e.shareType===n.link)),currentFileOutgoingSharesLoading:e=>e.currentFileOutgoingSharesLoading,sharesTree:e=>e.sharesTree,sharesTreeLoading:e=>e.sharesTreeLoading,loadingFolder:e=>e.loadingFolder||null===e.highlightedResourceId&&e.sharesTreeLoading,quota:e=>e.quota,highlightedFile:(e,t)=>e.highlightedResourceId?t.filesAll.find((t=>t.id===e.highlightedResourceId)):null,versions:e=>e.versions,publicLinkPassword:e=>{if(e.publicLinkPassword)return e.publicLinkPassword;let t=sessionStorage.getItem("publicLinkInfo");if(t)try{t=atob(t)}catch(e){sessionStorage.removeItem("publicLinkInfo")}return t},uploaded:e=>e.uploaded,actionsInProgress:e=>e.actionsInProgress},actions:{updateFileProgress({commit:e},t){e("UPDATE_FILE_PROGRESS",t)},addFileToProgress({commit:e},t){e("ADD_FILE_TO_PROGRESS",t)},removeFileFromProgress({commit:e},t){e("REMOVE_FILE_FROM_PROGRESS",t)},loadFiles(e,{currentFolder:t,files:i}){t&&(t=A(t)),i=i.map(A),e.commit("LOAD_FILES",{currentFolder:t,files:i})},addFileSelection(e,t){e.commit("ADD_FILE_SELECTION",t)},removeFileSelection(e,t){e.commit("REMOVE_FILE_SELECTION",t)},toggleFileSelection(e,t){e.state.selected.includes(t)?e.commit("REMOVE_FILE_SELECTION",t):e.commit("ADD_FILE_SELECTION",t)},resetFileSelection(e){e.commit("RESET_SELECTION")},markFavorite(e,t){const i=t.file,s=t.client,r=!i.starred;s.files.favorite(i.path,r).then((()=>{e.commit("FAVORITE_FILE",i)})).catch((e=>{throw new Error(e)}))},deleteFiles(e,{files:t,client:i,publicPage:s,firstRun:r=!0}){const o=[];for(const a of t){let t=null;t=s?i.publicFiles.delete(a.path,null,e.getters.publicLinkPassword):i.files.delete(a.path);const n=t.then((()=>{e.commit("REMOVE_FILE",a),e.commit("REMOVE_FILE_SELECTION",a),e.commit("REMOVE_FILE_FROM_SEARCHED",a)})).catch((t=>{let o=u('Error while deleting "%{file}"');if(423===t.statusCode){if(r)return e.dispatch("deleteFiles",{files:[a],client:i,publicPage:s,firstRun:!1});o=u('Error while deleting "%{file}" - the file is locked')}const n=p(o,{file:a.name},!0);e.dispatch("showMessage",{title:n,status:"danger",autoClose:{enabled:!0}},{root:!0})}));o.push(n)}return Promise.all(o)},removeFilesFromTrashbin(e,t){for(const i of t)e.commit("REMOVE_FILE",i)},renameFile(e,{file:t,newValue:i,client:s,publicPage:r}){if(void 0!==t&&void 0!==i&&i!==t.name){const o=t.path.substr(1,t.path.lastIndexOf("/"));return r?s.publicFiles.move(t.path,o+i,e.getters.publicLinkPassword).then((()=>{e.commit("RENAME_FILE",{file:t,newValue:i,newPath:o})})):s.files.move(t.path,o+i).then((()=>{e.commit("RENAME_FILE",{file:t,newValue:i,newPath:o})}))}},searchForFile:(e,t)=>(e.commit("UPDATE_CURRENT_PAGE",1),new Promise((function(i,s){const r=t.client,o=t.searchTerm;e.commit("SET_SEARCH_TERM",o),o&&r.files.search(o,null,e.state.davProperties).then((t=>{t=t.map((e=>A(e))),e.commit("LOAD_FILES_SEARCHED",t),i(t)})).catch((t=>{e.dispatch("showMessage",{title:this.$gettext("Error while searching."),desc:t.message,status:"danger",autoClose:{enabled:!0}},{root:!0}),s(t)}))}))),loadCurrentFileOutgoingShares(e,{client:t,path:i}){e.commit("CURRENT_FILE_OUTGOING_SHARES_SET",[]),e.commit("CURRENT_FILE_OUTGOING_SHARES_ERROR",null),e.commit("CURRENT_FILE_OUTGOING_SHARES_LOADING",!0),t.shares.getShares(i,{reshares:!0}).then((t=>{e.commit("CURRENT_FILE_OUTGOING_SHARES_SET",t.map((t=>L(t.shareInfo,e.getters.highlightedFile,!e.rootGetters.isOcis)))),e.commit("UPDATE_CURRENT_FILE_SHARE_TYPES"),e.commit("CURRENT_FILE_OUTGOING_SHARES_LOADING",!1)})).catch((t=>{e.commit("CURRENT_FILE_OUTGOING_SHARES_ERROR",t.message),e.commit("CURRENT_FILE_OUTGOING_SHARES_LOADING",!1)}))},loadIncomingShares(e,t){e.commit("INCOMING_SHARES_LOAD",[]),e.commit("INCOMING_SHARES_ERROR",null),e.commit("INCOMING_SHARES_LOADING",!0);const i=t.client,s=t.path;i.shares.getShares(s,{shared_with_me:!0}).then((t=>{e.commit("INCOMING_SHARES_LOAD",t.map((t=>N(t.shareInfo,e.getters.highlightedFile,!e.rootGetters.isOcis)))),e.commit("INCOMING_SHARES_LOADING",!1)})).catch((t=>{e.commit("INCOMING_SHARES_ERROR",t.message),e.commit("INCOMING_SHARES_LOADING",!1)}))},sharesClearState(e,t){e.commit("CURRENT_FILE_OUTGOING_SHARES_SET",[]),e.commit("CURRENT_FILE_OUTGOING_SHARES_ERROR",null)},incomingSharesClearState(e,t){e.commit("INCOMING_SHARES_LOAD",[]),e.commit("INCOMING_SHARES_ERROR",null)},changeShare({commit:e,getters:t,rootGetters:i},{client:s,share:r,role:o,permissions:a,expirationDate:n}){const l={permissions:a,expireDate:n};return new Promise(l.permissions?(o,a)=>{s.shares.updateShare(r.id,l).then((s=>{const r=N(s.shareInfo,t.highlightedFile,!i.isOcis);e("CURRENT_FILE_OUTGOING_SHARES_UPDATE",r),o(r)})).catch((e=>{a(e)}))}:(e,t)=>{t(new Error("Nothing changed"))})},addShare(e,{client:t,path:i,shareWith:s,shareType:r,permissions:o,expirationDate:a}){if(r===n.group)return void t.shares.shareFileWithGroup(i,s,{permissions:o,expirationDate:a}).then((t=>{e.commit("CURRENT_FILE_OUTGOING_SHARES_ADD",N(t.shareInfo,e.getters.highlightedFile,!e.rootGetters.isOcis)),e.commit("UPDATE_CURRENT_FILE_SHARE_TYPES"),e.commit("LOAD_INDICATORS")})).catch((t=>{e.dispatch("showMessage",{title:u("Error while sharing."),desc:t,status:"danger",autoClose:{enabled:!0}},{root:!0})}));const l=r===n.remote;t.shares.shareFileWithUser(i,s,{permissions:o,remoteUser:l,expirationDate:a}).then((t=>{e.commit("CURRENT_FILE_OUTGOING_SHARES_ADD",N(t.shareInfo,e.getters.highlightedFile,!e.rootGetters.isOcis)),e.commit("UPDATE_CURRENT_FILE_SHARE_TYPES"),e.commit("LOAD_INDICATORS")})).catch((t=>{e.dispatch("showMessage",{title:u("Error while sharing."),desc:t,status:"danger",autoClose:{enabled:!0}},{root:!0})}))},deleteShare(e,{client:t,share:i}){t.shares.deleteShare(i.id).then((()=>{e.commit("CURRENT_FILE_OUTGOING_SHARES_REMOVE",i),e.commit("UPDATE_CURRENT_FILE_SHARE_TYPES"),e.commit("LOAD_INDICATORS")})).catch((e=>{console.log(e)}))},resetSearch({commit:e}){e("SET_SEARCH_TERM",""),e("UPDATE_CURRENT_PAGE",1)},pruneSharesTreeOutsidePath(e,t){e.commit("SHARESTREE_PRUNE_OUTSIDE_PATH",t)},loadSharesTree(t,{client:i,path:s}){t.commit("SHARESTREE_ERROR",null),t.dispatch("pruneSharesTreeOutsidePath",s);const r=c(s,!0),o={};if(!r.length)return Promise.resolve();r.pop(),t.commit("SHARESTREE_LOADING",!0);const a=new e._default({concurrency:2}),n=[];return r.forEach((e=>{if(t.getters.sharesTree[e])return Promise.resolve();o[e]=[],n.push(a.add((()=>i.shares.getShares(e,{reshares:!0}).then((i=>{i.forEach((i=>{o[e].push({...L(i.shareInfo,{type:"folder"},!t.rootGetters.isOcis),outgoing:!0,indirect:!0})}))})).catch((e=>{console.error("SHARESTREE_ERROR",e),t.commit("SHARESTREE_ERROR",e.message),t.commit("SHARESTREE_LOADING",!1)}))))),n.push(a.add((()=>i.shares.getShares(e,{shared_with_me:!0}).then((i=>{i.forEach((i=>{o[e].push({...N(i.shareInfo,{type:"folder"},!t.rootGetters.isOcis),incoming:!0,indirect:!0})}))})).catch((e=>{console.error("SHARESTREE_ERROR",e),t.commit("SHARESTREE_ERROR",e.message),t.commit("SHARESTREE_LOADING",!1)})))))})),Promise.all(n).then((()=>{t.commit("SHARESTREE_ADD",o),t.commit("SHARESTREE_LOADING",!1)}))},async loadVersions(e,{client:t,fileId:i}){let s;try{s=await t.fileVersions.listVersions(i)}catch(e){console.error(e),s=[]}e.commit("SET_VERSIONS",s)},dragOver(e,t){e.commit("DRAG_OVER",t)},setHighlightedFile(e,t){e.commit("SET_HIGHLIGHTED_FILE",t)},setPublicLinkPassword(e,t){e.commit("SET_PUBLIC_LINK_PASSWORD",t)},addLink:(e,{path:t,client:i,params:s})=>new Promise(((r,o)=>{i.shares.shareFileWithLink(t,s).then((t=>{const i=L(t.shareInfo,null,!e.rootGetters.isOcis);e.commit("CURRENT_FILE_OUTGOING_SHARES_ADD",i),e.commit("UPDATE_CURRENT_FILE_SHARE_TYPES"),e.commit("LOAD_INDICATORS"),r(i)})).catch((e=>{o(e)}))})),updateLink:(e,{id:t,client:i,params:s})=>new Promise(((r,o)=>{i.shares.updateShare(t,s).then((t=>{const i=L(t.shareInfo,null,!e.rootGetters.isOcis);e.commit("CURRENT_FILE_OUTGOING_SHARES_UPDATE",i),r(i)})).catch((e=>{o(e)}))})),removeLink(e,{share:t,client:i}){i.shares.deleteShare(t.id).then((()=>{e.commit("CURRENT_FILE_OUTGOING_SHARES_REMOVE",t),e.commit("UPDATE_CURRENT_FILE_SHARE_TYPES"),e.commit("LOAD_INDICATORS")})).catch((t=>e.commit("CURRENT_FILE_OUTGOING_SHARES_ERROR",t.message)))},addActionToProgress({commit:e},t){e("ADD_ACTION_TO_PROGRESS",t)},removeActionFromProgress({commit:e},t){e("REMOVE_ACTION_FROM_PROGRESS",t)},pushResourcesToDeleteList({commit:e},t){e("PUSH_RESOURCES_TO_DELETE_LIST",t)},clearResourcesToDeleteList({commit:e}){e("CLEAR_RESOURCES_TO_DELETE_LIST")},async loadIndicators({dispatch:e,commit:t},{client:i,currentFolder:s}){await e("loadSharesTree",{client:i,path:s}),t("LOAD_INDICATORS")},loadAvatars({commit:t,rootGetters:i},{resource:s}){["sharedWith","owner"].forEach((r=>{(s[r]||[]).forEach(((o,a)=>{e.has(o,"avatar")&&cs({username:o.username,server:i.configuration.server,token:i.getToken},!0).then((e=>t("UPDATE_RESOURCE_FIELD",{id:s.id,field:`${r}.[${a}].avatar`,value:e})))}))}))},async loadPreview({commit:t,rootGetters:i},{resource:s,isPublic:r,dimensions:o,type:a}){if(i.previewFileExtensions.length&&!i.previewFileExtensions.includes(s.extension))return;const n=await function(t,i){var s=t.resource,r=t.isPublic,o=t.dimensions,a=t.server,n=t.userId,l=t.token;return void 0===i&&(i=!1),e.__awaiter(void 0,void 0,void 0,(function(){var t;return e.__generator(this,(function(c){switch(c.label){case 0:return t="","folder"!==s.type&&s.extension&&(r||a&&n&&l)?r?[4,(d={resource:s,dimensions:o},e.__awaiter(void 0,void 0,void 0,(function(){var t,i,s,r,o;return e.__generator(this,(function(a){switch(a.label){case 0:return t=e.__read(d.resource.downloadURL.split("?"),2),i=t[0],s=t[1],r=[as({etag:d.resource.etag,dimensions:d.dimensions}),s].filter(Boolean).join("&"),o=[i,r].filter(Boolean).join("?"),[4,os.httpUnAuthenticated.head(o)];case 1:return 404!==a.sent().status?[2,o]:[2]}}))})))]:[3,2]:[2,t];case 1:return t=c.sent(),[3,4];case 2:return[4,ns({server:a,userId:n,token:l,resource:s,dimensions:o},i)];case 3:t=c.sent(),c.label=4;case 4:return[2,t]}var d}))}))}({resource:s,isPublic:r,dimensions:o,server:i.configuration.server,userId:i.user.id,token:i.getToken},!0);n&&t("UPDATE_RESOURCE_FIELD",{id:s.id,field:a,value:n})}},mutations:{UPDATE_FILE_PROGRESS(e,t){const i=[...e.inProgress],s=i.findIndex((e=>e.id===t.id));-1!==s&&(i[s].progress=t.progress,e.inProgress=i)},ADD_FILE_TO_PROGRESS(e,t){const i=[...e.inProgress];i.push({id:t.id,name:t.name,type:t.type,size:t.size,progress:0,action:"upload"}),e.inProgress=i},REMOVE_FILE_FROM_PROGRESS(e,t){const i=[...e.inProgress],s=i.findIndex((e=>e.id===t.id));if(i.splice(s,1),i.length<1)return e.inProgress=[],void(e.uploaded=[]);e.inProgress=i;const r=[...e.uploaded];t.progress=100,r.push(t),e.uploaded=r},LOAD_FILES(e,{currentFolder:t,files:i}){e.currentFolder=t,e.files=i},SET_CURRENT_FOLDER(e,t){e.currentFolder=t},LOAD_FILES_SEARCHED(e,t){e.filesSearched=t},REMOVE_FILE_FROM_SEARCHED(e,t){e.filesSearched=e.filesSearched.filter((e=>t.id!==e.id))},ADD_FILE_SELECTION(e,t){const i=[...e.selected];-1===i.findIndex((e=>e.id===t.id))&&(i.push(t),e.selected=i)},REMOVE_FILE_SELECTION(e,t){const i=[...e.selected];i.length>1?e.selected=i.filter((e=>t.id!==e.id)):e.selected=[]},RESET_SELECTION(e){e.selected=[]},FAVORITE_FILE(e,t){const i=[...e.files],s=i.findIndex((e=>e.id===t.id));i[s].starred=!t.starred,e.files=i},REMOVE_FILE(e,t){e.files=[...e.files].filter((e=>e.id!==t.id))},SET_SEARCH_TERM(e,t){e.searchTermGlobal=t},UPDATE_CURRENT_FILE_SHARE_TYPES(e){const t=[...e.files];if(!e.highlightedResourceId)return;const i=t.findIndex((t=>t.id===e.highlightedResourceId));t[i].shareTypes=function(e){const t=new Set;return e.forEach((e=>{t.add(e.shareType)})),Array.from(t)}(e.currentFileOutgoingShares),e.files=t},RENAME_FILE(e,{file:t,newValue:i,newPath:s}){const r=[...e.files],o=r.findIndex((e=>e.id===t.id));r[o].name=i,r[o].path="/"+s+i,e.files=r},DRAG_OVER(e,t){e.dropzone=t},CURRENT_FILE_OUTGOING_SHARES_SET(e,t){e.currentFileOutgoingShares=t},CURRENT_FILE_OUTGOING_SHARES_ADD(e,t){e.currentFileOutgoingShares.push(t)},CURRENT_FILE_OUTGOING_SHARES_REMOVE(e,t){e.currentFileOutgoingShares=e.currentFileOutgoingShares.filter((e=>t.id!==e.id))},CURRENT_FILE_OUTGOING_SHARES_UPDATE(t,i){const s=t.currentFileOutgoingShares.findIndex((e=>e.id===i.id));s>=0?e.Vue.set(t.currentFileOutgoingShares,s,i):t.currentFileOutgoingShares.push(i)},CURRENT_FILE_OUTGOING_SHARES_ERROR(e,t){e.currentFileOutgoingShares=[],e.currentFileOutgoingSharesError=t},CURRENT_FILE_OUTGOING_SHARES_LOADING(e,t){e.currentFileOutgoingSharesLoading=t},INCOMING_SHARES_LOAD(e,t){e.incomingShares=t},INCOMING_SHARES_ERROR(e,t){e.incomingShares=[],e.incomingSharesError=t},INCOMING_SHARES_LOADING(e,t){e.incomingSharesLoading=t},SHARESTREE_PRUNE_OUTSIDE_PATH(t,i){""!==i&&"/"!==i?("/"!==(i+="/").charAt(0)&&(i="/"+i),t.sharesTree=e.pickBy(t.sharesTree,((e,t)=>i.startsWith(t+"/")))):t.sharesTree={}},SHARESTREE_ADD(e,t){Object.assign(e.sharesTree,t)},SHARESTREE_ERROR(e,t){e.sharesTreeError=t},SHARESTREE_LOADING(e,t){e.sharesTreeLoading=t},UPDATE_FOLDER_LOADING(e,t){e.loadingFolder=t},SET_HIGHLIGHTED_FILE(e,t){if("string"==typeof t){const i=e.files.findIndex((e=>e.name===t));if(-1===i)return;t=e.files[i]}e.highlightedResourceId=t?t.id:t},SET_PUBLIC_LINK_PASSWORD(e,t){e.publicLinkPassword=t,t?sessionStorage.setItem("publicLinkInfo",btoa(t)):sessionStorage.removeItem("publicLinkInfo")},ADD_ACTION_TO_PROGRESS(e,t){e.actionsInProgress.push(t)},REMOVE_ACTION_FROM_PROGRESS(e,t){const i=e.actionsInProgress.findIndex((e=>e===t));e.actionsInProgress.splice(i,1)},CLEAR_CURRENT_FILES_LIST(e){e.currentFolder=null,e.selected=[],e.highlightedResourceId=null,e.files.forEach((e=>{e.previewUrl&&e.previewUrl.startsWith("blob:")&&window.URL.revokeObjectURL(e.previewUrl)})),e.files=[]},SET_VERSIONS(e,t){e.versions=t},SET_APP_SIDEBAR_EXPANDED_ACCORDION(e,t){e.appSidebarExpandedAccordion=t},SET_APP_SIDEBAR_ACCORDION_CONTEXT(e,t){e.appSidebarAccordionContext=t},TRIGGER_PUBLIC_LINK_EDIT(t,i){i={id:i.id,name:i.name,permissions:parseInt(i.permissions,10),hasPassword:i.password,expireDate:null!==i.expiration?e.DateTime_1.fromHTTP(i.expiration).endOf("day").toISO():null},t.publicLinkInEdit=i,t.appSidebarAccordionContext="editPublicLink"},TRIGGER_PUBLIC_LINK_CREATE(e,{name:t,expireDate:i}){e.publicLinkInEdit={id:null,name:t,permissions:1,hasPassword:!1,expireDate:i},e.appSidebarAccordionContext="editPublicLink"},LOAD_INDICATORS(e){for(const t of e.files){const i=k(t,e.sharesTree);(i||t.indicators.length)&&this.commit("Files/UPDATE_RESOURCE_FIELD",{id:t.id,field:"indicators",value:i})}},SELECT_RESOURCES(e,t){e.selected=t},UPSERT_RESOURCE(e,t){us(e,t,!0)},UPDATE_RESOURCE(e,t){us(e,t,!1)},UPDATE_RESOURCE_FIELD(t,i){const s=t.files.findIndex((e=>e.id===i.id));if(s<0)return;const r=t.files[s],o=e.has(r,i.field),a=e.set(r,i.field,i.value);o||e.Vue.set(t.files,s,a)},UPDATE_CURRENT_PAGE(e,t){e.currentPage=parseInt(t)},SET_HIDDEN_FILES_VISIBILITY(e,t){e.areHiddenFilesShown=t,window.localStorage.setItem("oc_hiddenFilesShown",t)},SET_FILES_PAGE_LIMIT(e,t){e.filesPageLimit=t,window.localStorage.setItem("oc_filesPageLimit",t)}}},routes:[{path:"/",redirect:{name:"files-personal"}},{name:"list",path:"/list",redirect:{name:"files-personal"},components:{app:De},children:[{name:"personal",path:"all/:item?/:page?",component:dt,meta:{hasBulkActions:!0,title:"All files"}},{name:"favorites",path:"favorites/:page?",component:mt,meta:{hideFilelistActions:!0,hasBulkActions:!0,title:"Favorite files"}},{path:"shared-with-me/:page?",component:bt,name:"shared-with-me",meta:{hideFilelistActions:!0,hasBulkActions:!0,title:"Files shared with me"}},{path:"shared-with-others/:page?",component:kt,name:"shared-with-others",meta:{hideFilelistActions:!0,hasBulkActions:!0,title:"Files shared with others"}},{path:"shared-via-link/:page?",component:yt,name:"shared-via-link",meta:{hideFilelistActions:!0,hasBulkActions:!0,title:"Files shared via link"}},{path:"trash-bin/:page?",component:$t,name:"trashbin",meta:{hideFilelistActions:!0,hasBulkActions:!1,title:"Deleted files"}}]},{name:"public",path:"/public",components:{app:De},meta:{auth:!1},children:[{name:"public-list",path:"list/:item/:page?",component:Wt,meta:{auth:!1,hasBulkActions:!0,title:"Public files"}}]},{path:"/public-link/:token",name:"public-link",components:{fullscreen:Lt},meta:{auth:!1,hideHeadbar:!0,title:"Resolving public link"}},{path:"/private-link/:fileId",name:"private-link",components:{fullscreen:At},meta:{hideHeadbar:!0,title:"Resolving private link"}},{path:"/location-picker/:context/:action/:item?/:page?",name:"location-picker",components:{app:Ht},meta:{verbose:!0,auth:!1}},{path:"/files-drop/:token",name:"public-drop",components:{app:Ut},meta:{auth:!1,title:"Public file upload"}}],navItems:[{name:"All files",iconMaterial:ms.icon,route:{name:"files-personal",path:`/${ms.id}/list/all`}},{name:"Favorites",iconMaterial:"star",route:{name:"files-favorites",path:`/${ms.id}/list/favorites`},enabled:e=>e.files&&e.files.favorites},{name:"Shared with me",iconMaterial:"shared-with-me",route:{name:"files-shared-with-me",path:`/${ms.id}/list/shared-with-me`}},{name:"Shared with others",iconMaterial:"shared-with-others",route:{name:"files-shared-with-others",path:`/${ms.id}/list/shared-with-others`}},{name:"Shared via link",iconMaterial:"link",route:{name:"files-shared-via-link",path:`/${ms.id}/list/shared-via-link`}},{name:"Deleted files",iconMaterial:"delete",enabled:e=>e.dav&&"1.0"===e.dav.trashbin,route:{name:"files-trashbin",path:`/${ms.id}/list/trash-bin`}}],quickActions:Zi,translations:d}}));
